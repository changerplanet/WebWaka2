(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{8023:function(e,s,t){Promise.resolve().then(t.bind(t,1281))},1281:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return P}});var a=t(7437),l=t(2265),n=t(9376),i=t(1817),r=t(8728),c=t(5805),d=t(9202),o=t(2805),m=t(2660),x=t(8906),h=t(3229),u=t(7806),g=t(2369),p=t(1533),j=t(265),b=t(5051),N=t(8930);function f(e){let{tenantSlug:s,currentUserId:t}=e,[n,r]=(0,l.useState)([]),[c,d]=(0,l.useState)(!0),[o,m]=(0,l.useState)(null),[h,p]=(0,l.useState)(!1),[j,b]=(0,l.useState)(""),[N,f]=(0,l.useState)("TENANT_USER"),[y,w]=(0,l.useState)(!1),[S,C]=(0,l.useState)(null);async function A(){try{let e=await fetch("/api/tenants/".concat(s,"/members")),t=await e.json();t.success?r(t.members):m(t.error)}catch(e){m("Failed to load members")}finally{d(!1)}}async function T(){if(j){w(!0),m(null);try{let e=await fetch("/api/tenants/".concat(s,"/members"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:j,role:N})}),t=await e.json();t.success?(r([t.membership,...n]),b(""),p(!1)):m(t.error)}catch(e){m("Failed to add member")}finally{w(!1)}}}async function E(e,t){C(e),m(null);try{let a=await fetch("/api/tenants/".concat(s,"/members/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:t})}),l=await a.json();l.success?r(n.map(s=>s.id===e?l.member:s)):m(l.error)}catch(e){m("Failed to update role")}finally{C(null)}}async function k(e){if(confirm("Are you sure you want to remove this member?")){C(e),m(null);try{let t=await fetch("/api/tenants/".concat(s,"/members/").concat(e),{method:"DELETE"}),a=await t.json();a.success?r(n.filter(s=>s.id!==e)):m(a.error)}catch(e){m("Failed to remove member")}finally{C(null)}}}if((0,l.useEffect)(()=>{A()},[s]),c)return(0,a.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 animate-spin text-slate-400"})})});let Z=n.filter(e=>"TENANT_ADMIN"===e.role),D=n.filter(e=>"TENANT_USER"===e.role);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Team Members"}),(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:[n.length," member",1!==n.length?"s":""]})]}),(0,a.jsxs)("button",{onClick:()=>p(!h),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"Add Member"]})]}),h&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-slate-900 mb-3",children:"Add a New Member"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{type:"email",value:j,onChange:e=>b(e.target.value),placeholder:"Email address",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,a.jsxs)("select",{value:N,onChange:e=>f(e.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"TENANT_USER",children:"Member"}),(0,a.jsx)("option",{value:"TENANT_ADMIN",children:"Admin"})]}),(0,a.jsx)("button",{onClick:T,disabled:y||!j,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition",children:y?(0,a.jsx)(i.Z,{className:"w-5 h-5 animate-spin"}):"Add"})]})]}),o&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg",children:o}),(0,a.jsxs)("div",{className:"space-y-6",children:[Z.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-slate-500 mb-3 flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Admins (",Z.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:Z.map(e=>(0,a.jsx)(v,{member:e,isCurrentUser:e.user.id===t,loading:S===e.id,onRoleChange:E,onRemove:k},e.id))})]}),D.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-slate-500 mb-3 flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4"}),"Members (",D.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:D.map(e=>(0,a.jsx)(v,{member:e,isCurrentUser:e.user.id===t,loading:S===e.id,onRoleChange:E,onRemove:k},e.id))})]})]})]}),(0,a.jsxs)("div",{className:"bg-slate-50 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"font-medium text-slate-900 mb-3",children:"Role Permissions"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 font-medium text-slate-700 mb-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 text-amber-500"}),"Admin"]}),(0,a.jsxs)("ul",{className:"space-y-1 text-slate-600",children:[(0,a.jsx)("li",{children:"• Manage team members"}),(0,a.jsx)("li",{children:"• Configure settings & branding"}),(0,a.jsx)("li",{children:"• Add custom domains"}),(0,a.jsx)("li",{children:"• View all data"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 font-medium text-slate-700 mb-2",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 text-slate-500"}),"Member"]}),(0,a.jsxs)("ul",{className:"space-y-1 text-slate-600",children:[(0,a.jsx)("li",{children:"• Access workspace"}),(0,a.jsx)("li",{children:"• View own data"}),(0,a.jsx)("li",{children:"• Use core features"}),(0,a.jsx)("li",{children:"• Update own profile"})]})]})]})]})]})}function v(e){var s;let{member:t,isCurrentUser:n,loading:r,onRoleChange:c,onRemove:d}=e,[o,m]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-medium",children:(null===(s=t.user.name)||void 0===s?void 0:s.charAt(0))||t.user.email.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-slate-900 flex items-center gap-2",children:[t.user.name||t.user.email,n&&(0,a.jsx)("span",{className:"text-xs text-slate-500",children:"(you)"}),"SUPER_ADMIN"===t.user.globalRole&&(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full",children:"Super Admin"})]}),(0,a.jsx)("div",{className:"text-sm text-slate-500",children:t.user.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("TENANT_ADMIN"===t.role?"bg-amber-100 text-amber-700":"bg-slate-200 text-slate-700"),children:"TENANT_ADMIN"===t.role?"Admin":"Member"}),r?(0,a.jsx)(i.Z,{className:"w-5 h-5 animate-spin text-slate-400"}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>m(!o),className:"p-2 hover:bg-slate-200 rounded-lg transition",children:(0,a.jsx)(p.Z,{className:"w-4 h-4 text-slate-500"})}),o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>m(!1)}),(0,a.jsxs)("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-lg shadow-lg border border-slate-200 py-1 z-20",children:["TENANT_USER"===t.role?(0,a.jsxs)("button",{onClick:()=>{c(t.id,"TENANT_ADMIN"),m(!1)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-slate-700 hover:bg-slate-50",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),"Make Admin"]}):(0,a.jsxs)("button",{onClick:()=>{c(t.id,"TENANT_USER"),m(!1)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-slate-700 hover:bg-slate-50",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),"Remove Admin"]}),(0,a.jsxs)("button",{onClick:()=>{d(t.id),m(!1)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4"}),"Remove Member"]})]})]})]})]})]})}var y=t(9397),w=t(9322),S=t(6595),C=t(401),A=t(2489),T=t(7168),E=t(8867);function k(e){let{tenantSlug:s}=e,[t,n]=(0,l.useState)([]),[r,c]=(0,l.useState)(!0),[o,m]=(0,l.useState)(null),[x,h]=(0,l.useState)(!1),[u,g]=(0,l.useState)(""),[p,j]=(0,l.useState)(!1),[b,f]=(0,l.useState)(null),[v,k]=(0,l.useState)(!1);async function Z(){try{let e=await fetch("/api/tenants/".concat(s,"/domains")),t=await e.json();t.success?n(t.domains):m(t.error)}catch(e){m("Failed to load domains")}finally{c(!1)}}async function D(){if(u){j(!0),m(null);try{let e=await fetch("/api/tenants/".concat(s,"/domains"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:u})}),a=await e.json();a.success?(n([a.domain,...t]),g(""),h(!1)):m(a.error)}catch(e){m("Failed to add domain")}finally{j(!1)}}}async function I(e){f(e),m(null);try{let a=await fetch("/api/tenants/".concat(s,"/domains/").concat(e),{method:"POST"}),l=await a.json();l.success?n(t.map(s=>s.id===e?l.domain:s)):m(l.error)}catch(e){m("Failed to verify domain")}finally{f(null)}}async function P(e){if(confirm("Are you sure you want to remove this domain?"))try{let a=await fetch("/api/tenants/".concat(s,"/domains?domainId=").concat(e),{method:"DELETE"}),l=await a.json();l.success?n(t.filter(s=>s.id!==e)):m(l.error)}catch(e){m("Failed to remove domain")}}async function R(e){try{let a=await fetch("/api/tenants/".concat(s,"/domains/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isPrimary:!0})}),l=await a.json();l.success?n(t.map(s=>({...s,isPrimary:s.id===e}))):m(l.error)}catch(e){m("Failed to update domain")}}if((0,l.useEffect)(()=>{Z()},[s]),r)return(0,a.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 animate-spin text-slate-400"})})});let U=t.find(e=>"SUBDOMAIN"===e.type),M=t.filter(e=>"CUSTOM"===e.type);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Domains"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Manage how users access your workspace"})]}),(0,a.jsxs)("button",{onClick:()=>h(!x),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),"Add Custom Domain"]})]}),o&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"}),o]}),x&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-slate-900 mb-3",children:"Add Custom Domain"}),(0,a.jsxs)("div",{className:"flex gap-3 mb-3",children:[(0,a.jsx)("input",{type:"text",value:u,onChange:e=>g(e.target.value),placeholder:"app.yourdomain.com",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,a.jsx)("button",{onClick:D,disabled:p||!u,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition",children:p?(0,a.jsx)(i.Z,{className:"w-5 h-5 animate-spin"}):"Add"})]}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"After adding, you'll need to configure DNS records to verify ownership."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[U&&(0,a.jsx)("div",{className:"p-4 border border-slate-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-5 h-5 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-slate-900 flex items-center gap-2",children:[U.domain,".saascore.com",U.isPrimary&&(0,a.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full flex items-center gap-1",children:[(0,a.jsx)(S.Z,{className:"w-3 h-3"})," Primary"]})]}),(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"Default subdomain"})]})]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 text-sm text-green-600",children:[(0,a.jsx)(C.Z,{className:"w-4 h-4"})," Verified"]})]})}),M.map(e=>(0,a.jsxs)("div",{className:"p-4 border border-slate-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat("VERIFIED"===e.status?"bg-green-100":"PENDING"===e.status?"bg-amber-100":"bg-red-100"),children:(0,a.jsx)(d.Z,{className:"w-5 h-5 ".concat("VERIFIED"===e.status?"text-green-600":"PENDING"===e.status?"text-amber-600":"text-red-600")})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-slate-900 flex items-center gap-2",children:[e.domain,e.isPrimary&&(0,a.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full flex items-center gap-1",children:[(0,a.jsx)(S.Z,{className:"w-3 h-3"})," Primary"]})]}),(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"Custom domain"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["VERIFIED"===e.status?(0,a.jsxs)("span",{className:"flex items-center gap-1 text-sm text-green-600",children:[(0,a.jsx)(C.Z,{className:"w-4 h-4"})," Verified"]}):"PENDING"===e.status?(0,a.jsxs)("span",{className:"flex items-center gap-1 text-sm text-amber-600",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"})," Pending"]}):(0,a.jsxs)("span",{className:"flex items-center gap-1 text-sm text-red-600",children:[(0,a.jsx)(A.Z,{className:"w-4 h-4"})," Failed"]}),"VERIFIED"!==e.status&&(0,a.jsx)("button",{onClick:()=>I(e.id),disabled:b===e.id,className:"p-2 hover:bg-slate-100 rounded-lg transition",title:"Verify DNS",children:b===e.id?(0,a.jsx)(i.Z,{className:"w-4 h-4 animate-spin text-slate-500"}):(0,a.jsx)(T.Z,{className:"w-4 h-4 text-slate-500"})}),"VERIFIED"===e.status&&!e.isPrimary&&(0,a.jsx)("button",{onClick:()=>R(e.id),className:"text-xs px-2 py-1 text-indigo-600 hover:bg-indigo-50 rounded transition",children:"Set Primary"}),(0,a.jsx)("button",{onClick:()=>P(e.id),className:"p-2 hover:bg-red-50 rounded-lg transition",title:"Remove domain",children:(0,a.jsx)(N.Z,{className:"w-4 h-4 text-red-500"})})]})]}),"PENDING"===e.status&&e.verificationInfo&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-amber-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-amber-800 mb-2",children:"DNS Verification Required"}),(0,a.jsx)("p",{className:"text-sm text-amber-700 mb-3",children:"Add the following TXT record to your DNS settings:"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-3 font-mono text-sm space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-slate-500",children:"Name:"}),(0,a.jsx)("span",{className:"text-slate-900",children:"_saascore-verify"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-slate-500",children:"Type:"}),(0,a.jsx)("span",{className:"text-slate-900",children:"TXT"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-slate-500",children:"Value:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-slate-900 truncate max-w-[200px]",children:e.verificationInfo.recordValue}),(0,a.jsx)("button",{onClick:()=>{var s;return s=e.verificationInfo.recordValue,void(navigator.clipboard.writeText(s),k(!0),setTimeout(()=>k(!1),2e3))},className:"p-1 hover:bg-slate-100 rounded",title:"Copy",children:v?(0,a.jsx)(C.Z,{className:"w-4 h-4 text-green-500"}):(0,a.jsx)(E.Z,{className:"w-4 h-4 text-slate-400"})})]})]})]}),(0,a.jsx)("p",{className:"text-xs text-amber-600 mt-3",children:"DNS changes may take up to 48 hours to propagate."})]})]},e.id)),0===M.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,a.jsx)(d.Z,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),(0,a.jsx)("p",{children:"No custom domains configured"}),(0,a.jsx)("p",{className:"text-sm",children:"Add a custom domain to use your own URL"})]})]})]}),(0,a.jsxs)("div",{className:"bg-slate-50 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"font-medium text-slate-900 mb-3",children:"Domain Configuration Help"}),(0,a.jsxs)("div",{className:"text-sm text-slate-600 space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Subdomain:"})," Your default address at ",s,".saascore.com"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Custom Domain:"})," Use your own domain like app.yourdomain.com"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"DNS Setup:"})," Add a CNAME record pointing to cname.saascore.com"]})]})]})]})}var Z=t(9076),D=t(2208);function I(e){let{settings:s,tenantSlug:t,onUpdate:n}=e,[r,c]=(0,l.useState)(s.branding.appName),[d,o]=(0,l.useState)(s.branding.primaryColor),[m,x]=(0,l.useState)(s.branding.secondaryColor),[u,g]=(0,l.useState)(s.branding.logoUrl||""),[p,j]=(0,l.useState)(s.branding.faviconUrl||""),[b,N]=(0,l.useState)(!1),[f,v]=(0,l.useState)(null);async function y(){N(!0),v(null);try{let e=await fetch("/api/tenants/".concat(t,"/settings"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({appName:r,primaryColor:d,secondaryColor:m,logoUrl:u||null,faviconUrl:p||null})}),a=await e.json();a.success?(n({...s,branding:{appName:r,primaryColor:d,secondaryColor:m,logoUrl:u||null,faviconUrl:p||null}}),v({type:"success",text:"Branding saved! Changes will appear on next page load."})):v({type:"error",text:a.error||"Failed to save"})}catch(e){v({type:"error",text:"Failed to save branding"})}finally{N(!1)}}return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Branding"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Customize how your workspace looks"})]})}),f&&(0,a.jsx)("div",{className:"mb-6 p-3 rounded-lg ".concat("success"===f.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:f.text}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"App Name"}),(0,a.jsx)("input",{type:"text",value:r,onChange:e=>c(e.target.value),placeholder:"Your App Name",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Displayed in the sidebar, browser tab, and PWA"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Brand Colors"}),(0,a.jsxs)("button",{onClick:function(){o("#6366f1"),x("#8b5cf6")},className:"text-xs text-slate-500 hover:text-slate-700 flex items-center gap-1",children:[(0,a.jsx)(Z.Z,{className:"w-3 h-3"}),"Reset to defaults"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-500 mb-1",children:"Primary Color"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"color",value:d,onChange:e=>o(e.target.value),className:"w-12 h-10 rounded border border-slate-300 cursor-pointer"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>o(e.target.value),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg font-mono text-sm"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-500 mb-1",children:"Secondary Color"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"color",value:m,onChange:e=>x(e.target.value),className:"w-12 h-10 rounded border border-slate-300 cursor-pointer"}),(0,a.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg font-mono text-sm"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Logo URL"}),(0,a.jsx)("input",{type:"url",value:u,onChange:e=>g(e.target.value),placeholder:"https://example.com/logo.png",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Square image, min 512x512px recommended"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Favicon URL"}),(0,a.jsx)("input",{type:"url",value:p,onChange:e=>j(e.target.value),placeholder:"https://example.com/favicon.ico",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Browser tab icon, .ico or .png"})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("button",{onClick:y,disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition",children:[b?(0,a.jsx)(i.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"Save Branding"]})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(D.Z,{className:"w-5 h-5 text-slate-500"}),(0,a.jsx)("h3",{className:"font-medium text-slate-900",children:"Preview"})]}),(0,a.jsx)("div",{className:"rounded-lg overflow-hidden border border-slate-200",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"w-16 h-40 flex flex-col items-center py-4 gap-4",style:{background:"linear-gradient(135deg, ".concat(d,", ").concat(m,")")},children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center text-white font-bold",children:r.charAt(0)}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-lg bg-white/20"}),(0,a.jsx)("div",{className:"w-6 h-6 rounded-lg bg-white/10"}),(0,a.jsx)("div",{className:"w-6 h-6 rounded-lg bg-white/10"})]})]}),(0,a.jsxs)("div",{className:"flex-1 p-4 bg-slate-50",children:[(0,a.jsx)("h4",{className:"font-semibold text-slate-900 mb-1",children:r}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Dashboard Preview"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"bg-white p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg mb-2 flex items-center justify-center",style:{backgroundColor:"".concat(d,"20")},children:(0,a.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:d}})}),(0,a.jsx)("div",{className:"h-2 bg-slate-200 rounded w-12 mb-1"}),(0,a.jsx)("div",{className:"h-2 bg-slate-100 rounded w-8"})]},e))})]})]})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"PWA Icon"}),(0,a.jsx)("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center text-white text-2xl font-bold shadow-lg",style:{background:"linear-gradient(135deg, ".concat(d,", ").concat(m,")")},children:r.charAt(0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"App Label"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl mx-auto mb-1 flex items-center justify-center text-white font-bold shadow",style:{background:"linear-gradient(135deg, ".concat(d,", ").concat(m,")")},children:r.charAt(0)}),(0,a.jsx)("span",{className:"text-xs text-slate-700",children:r.substring(0,10)})]})]})]})]})]})}function P(){let e=(0,n.useSearchParams)(),s=(0,n.useRouter)(),t=e.get("tenant"),[h,u]=(0,l.useState)(null),[g,p]=(0,l.useState)(null),[j,b]=(0,l.useState)(!0),[N,v]=(0,l.useState)(null),[y,w]=(0,l.useState)("general"),[S,C]=(0,l.useState)(null);async function A(){try{let e=await fetch("/api/auth/session"),a=await e.json();if(!a.authenticated){s.push("/login?redirect=/dashboard/settings?tenant=".concat(t));return}u(a.user);let l=a.user.memberships.find(e=>e.tenantSlug===t),n="SUPER_ADMIN"===a.user.globalRole;if(!((null==l?void 0:l.role)==="TENANT_ADMIN"||n)){v("Access denied. Only Tenant Admins can access settings."),b(!1);return}C(n?"TENANT_ADMIN":null==l?void 0:l.role);let i=await fetch("/api/tenants/".concat(t,"/settings")),r=await i.json();r.success?p(r.tenant):v(r.error||"Failed to load settings")}catch(e){v("Failed to load settings")}finally{b(!1)}}if((0,l.useEffect)(()=>{t?A():(v("No tenant specified"),b(!1))},[t]),j)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-100",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 animate-spin text-indigo-600"})});if(N)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-100",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Settings"}),(0,a.jsx)("p",{className:"text-slate-600 mb-4",children:N}),(0,a.jsx)("a",{href:"/dashboard?tenant=".concat(t),className:"text-indigo-600 hover:text-indigo-700",children:"← Back to Dashboard"})]})});if(!g)return null;let T=[{id:"general",label:"General",icon:r.Z},{id:"members",label:"Members",icon:c.Z},{id:"domains",label:"Domains",icon:d.Z},{id:"branding",label:"Branding",icon:o.Z}];return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,a.jsx)("header",{className:"bg-white border-b border-slate-200",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("a",{href:"/dashboard?tenant=".concat(t),className:"p-2 hover:bg-slate-100 rounded-lg transition",children:(0,a.jsx)(m.Z,{className:"w-5 h-5 text-slate-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:"Settings"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:g.branding.appName})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Tenant Admin"})]})]})})}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"flex gap-8",children:[(0,a.jsx)("nav",{className:"w-64 flex-shrink-0",children:(0,a.jsx)("ul",{className:"space-y-1",children:T.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>w(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition ".concat(y===e.id?"bg-indigo-50 text-indigo-700 font-medium":"text-slate-600 hover:bg-slate-100"),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),e.label]})},e.id))})}),(0,a.jsxs)("main",{className:"flex-1",children:["general"===y&&(0,a.jsx)(R,{settings:g,tenantSlug:t,onUpdate:p}),"members"===y&&(0,a.jsx)(f,{tenantSlug:t,currentUserId:(null==h?void 0:h.id)||""}),"domains"===y&&(0,a.jsx)(k,{tenantSlug:t}),"branding"===y&&(0,a.jsx)(I,{settings:g,tenantSlug:t,onUpdate:p})]})]})})]})}function R(e){let{settings:s,tenantSlug:t,onUpdate:n}=e,[r,c]=(0,l.useState)(s.name),[d,o]=(0,l.useState)(!1),[m,x]=(0,l.useState)(null);async function u(){o(!0),x(null);try{let e=await fetch("/api/tenants/".concat(t,"/settings"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r})}),a=await e.json();a.success?(n({...s,name:r}),x({type:"success",text:"Settings saved successfully!"})):x({type:"error",text:a.error||"Failed to save"})}catch(e){x({type:"error",text:"Failed to save settings"})}finally{o(!1)}}return(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-900 mb-6",children:"General Settings"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Organization Name"}),(0,a.jsx)("input",{type:"text",value:r,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Subdomain"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:s.slug,disabled:!0,className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg bg-slate-50 text-slate-500"}),(0,a.jsx)("span",{className:"text-slate-500",children:".saascore.com"})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Subdomain cannot be changed after creation"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),(0,a.jsx)("div",{className:"px-4 py-2 rounded-lg ".concat("ACTIVE"===s.status?"bg-green-50 text-green-700":"SUSPENDED"===s.status?"bg-amber-50 text-amber-700":"bg-slate-50 text-slate-700"),children:s.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Members"}),(0,a.jsxs)("div",{className:"px-4 py-2 bg-slate-50 rounded-lg text-slate-700",children:[s.memberCount," member",1!==s.memberCount?"s":""]})]})]}),m&&(0,a.jsx)("div",{className:"p-3 rounded-lg ".concat("success"===m.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:m.text}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("button",{onClick:u,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition",children:[d?(0,a.jsx)(i.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"Save Changes"]})})]})]})}}},function(e){e.O(0,[539,971,117,744],function(){return e(e.s=8023)}),_N_E=e.O()}]);