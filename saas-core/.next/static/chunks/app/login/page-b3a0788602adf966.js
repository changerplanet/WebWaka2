(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2149:function(e,t,r){Promise.resolve().then(r.bind(r,6006))},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var i=r(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,i.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:d="",children:u,iconNode:m,...h}=e;return(0,i.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:n?24*Number(s)/Number(a):s,className:l("lucide",d),...!u&&!c(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,r]=e;return(0,i.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,i.forwardRef)((r,s)=>{let{className:c,...o}=r;return(0,i.createElement)(d,{ref:s,iconNode:t,className:l("lucide-".concat(a(n(e))),"lucide-".concat(e),c),...o})});return r.displayName=n(e),r}},8420:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});let i=(0,r(9205).Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])},401:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});let i=(0,r(9205).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9322:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});let i=(0,r(9205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8867:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});let i=(0,r(9205).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});let i=(0,r(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9376:function(e,t,r){"use strict";var i=r(5475);r.o(i,"useRouter")&&r.d(t,{useRouter:function(){return i.useRouter}}),r.o(i,"useSearchParams")&&r.d(t,{useSearchParams:function(){return i.useSearchParams}})},6006:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var i=r(7437),a=r(2265),s=r(9376),n=r(8420),l=r(401),c=r(9205);let o=(0,c.Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var d=r(8867),u=r(9322);let m=(0,c.Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);var h=r(1817);let x=(0,c.Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function f(){let e=(0,s.useSearchParams)();(0,s.useRouter)();let[t,r]=(0,a.useState)(""),[c,f]=(0,a.useState)(!1),[g,p]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null),[j,k]=(0,a.useState)(null),[w,N]=(0,a.useState)(!1),v=e.get("tenant"),Z=e.get("error");async function S(e){e.preventDefault(),f(!0),b(null),k(null);try{let e=await fetch("/api/auth/magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,tenantSlug:v})}),r=await e.json();r.success?(p(!0),r.magicLink&&k(r.magicLink)):b(r.error||"Failed to send magic link")}catch(e){b("Network error. Please try again.")}finally{f(!1)}}async function C(){j&&(await navigator.clipboard.writeText(j),N(!0),setTimeout(()=>N(!1),2e3))}return(0,a.useEffect)(()=>{Z&&b({missing_token:"Invalid login link. Please request a new one.",invalid_or_expired:"This login link has expired. Please request a new one.",verification_failed:"Verification failed. Please try again."}[Z]||"An error occurred")},[Z]),(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 mb-4",children:(0,i.jsx)(n.Z,{className:"w-8 h-8 text-white"})}),(0,i.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"SaaS Core"}),v&&(0,i.jsxs)("p",{className:"text-slate-500 mt-1",children:["Signing in to ",v]})]}),(0,i.jsx)("div",{className:"bg-white rounded-2xl shadow-xl shadow-slate-200/50 p-8",children:g?(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(l.Z,{className:"w-8 h-8 text-green-600"})}),(0,i.jsx)("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:j?"Magic Link Ready":"Check your email"}),(0,i.jsx)("p",{className:"text-slate-600 mb-6",children:j?"Click the button below to sign in, or check your email.":(0,i.jsxs)(i.Fragment,{children:["We sent a magic link to ",(0,i.jsx)("strong",{children:t}),". Click the link to sign in."]})}),j&&(0,i.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,i.jsxs)("a",{href:j,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 text-white font-medium rounded-xl hover:bg-indigo-700 transition",children:[(0,i.jsx)(o,{className:"w-5 h-5"}),"Sign In Now"]}),(0,i.jsxs)("button",{onClick:C,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 transition",children:[(0,i.jsx)(d.Z,{className:"w-4 h-4"}),w?"Copied!":"Copy Link"]}),(0,i.jsx)("p",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded-lg",children:"⚠️ Dev Mode: Email sending requires a verified domain in Resend"})]}),(0,i.jsxs)("p",{className:"text-sm text-slate-500",children:["Didn't receive it?"," ",(0,i.jsx)("button",{onClick:()=>{p(!1),b(null),k(null)},className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Try again"})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"text-center mb-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"Sign in with email"}),(0,i.jsx)("p",{className:"text-slate-500 mt-1",children:"We'll send you a magic link"})]}),y&&(0,i.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-xl mb-6 text-red-700",children:[(0,i.jsx)(u.Z,{className:"w-5 h-5 flex-shrink-0"}),(0,i.jsx)("p",{className:"text-sm",children:y})]}),(0,i.jsxs)("form",{onSubmit:S,children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email address"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(m,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,i.jsx)("input",{id:"email",type:"email",required:!0,value:t,onChange:e=>r(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition",placeholder:"you@example.com"})]})]}),(0,i.jsx)("button",{type:"submit",disabled:c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 text-white font-medium rounded-xl hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Z,{className:"w-5 h-5 animate-spin"}),"Sending..."]}):(0,i.jsxs)(i.Fragment,{children:["Continue",(0,i.jsx)(x,{className:"w-5 h-5"})]})})]})]})}),(0,i.jsx)("p",{className:"text-center text-slate-500 text-sm mt-6",children:"By continuing, you agree to our Terms of Service and Privacy Policy."})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=2149)}),_N_E=e.O()}]);