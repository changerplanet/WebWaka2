(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{245:function(e,t,s){Promise.resolve().then(s.bind(s,7688))},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var a=s(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),i=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:d="",children:u,iconNode:h,...m}=e;return(0,a.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:s,strokeWidth:i?24*Number(r)/Number(n):r,className:l("lucide",d),...!u&&!c(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:c,...o}=s;return(0,a.createElement)(d,{ref:r,iconNode:t,className:l("lucide-".concat(n(i(e))),"lucide-".concat(e),c),...o})});return s.displayName=i(e),s}},8420:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])},407:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7688:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),n=s(2265),r=s(9376),i=s(1817),l=s(8420),c=s(7692),o=s(407);function d(){let e=(0,r.useRouter)(),[t,s]=(0,n.useState)(null),[d,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)(null);async function x(){try{let t=await fetch("/api/auth/session"),a=await t.json();a.authenticated&&a.user?(s(a.user),1===a.user.memberships.length&&await f(a.user.memberships[0].tenantSlug)):e.push("/login")}catch(t){e.push("/login")}finally{u(!1)}}async function f(t){m(t),e.push("/dashboard?tenant=".concat(t))}async function p(){await fetch("/api/auth/logout",{method:"POST"}),e.push("/login")}return((0,n.useEffect)(()=>{x()},[]),d)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 animate-spin text-indigo-600"})}):t?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 mb-4",children:(0,a.jsx)(l.Z,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Select Workspace"}),(0,a.jsx)("p",{className:"text-slate-500 mt-1",children:"Choose which workspace to access"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-medium",children:t.email.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-slate-900",children:t.name||t.email}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:t.email})]})]}),(0,a.jsx)("button",{onClick:p,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition",title:"Sign out",children:(0,a.jsx)(c.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-xl shadow-slate-200/50 overflow-hidden",children:0===t.memberships.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)(l.Z,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No workspaces yet"}),(0,a.jsx)("p",{className:"text-slate-500",children:"You don't have access to any workspaces."})]}):(0,a.jsx)("div",{className:"divide-y divide-slate-100",children:t.memberships.map(e=>(0,a.jsxs)("button",{onClick:()=>f(e.tenantSlug),disabled:null!==h,className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition text-left disabled:opacity-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold",children:e.tenantName.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-slate-900",children:e.tenantName}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"TENANT_ADMIN"===e.role?"Admin":"Member"})]})]}),h===e.tenantSlug?(0,a.jsx)(i.Z,{className:"w-5 h-5 animate-spin text-indigo-600"}):(0,a.jsx)(o.Z,{className:"w-5 h-5 text-slate-400"})]},e.tenantId))})}),"SUPER_ADMIN"===t.globalRole&&(0,a.jsxs)("button",{onClick:()=>e.push("/"),className:"w-full mt-4 p-4 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition flex items-center justify-center gap-2",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5"}),"Super Admin Dashboard"]})]})}):null}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=245)}),_N_E=e.O()}]);