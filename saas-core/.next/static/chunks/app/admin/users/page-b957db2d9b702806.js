(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{6028:function(e,t,s){Promise.resolve().then(s.bind(s,7678))},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var a=s(2265);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:m,iconNode:x,...h}=e;return(0,a.createElement)("svg",{ref:t,...d,width:l,height:l,stroke:s,strokeWidth:n?24*Number(r)/Number(l):r,className:i("lucide",o),...!m&&!c(h)&&{"aria-hidden":"true"},...h},[...x.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(m)?m:[m]])}),m=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:c,...d}=s;return(0,a.createElement)(o,{ref:r,iconNode:t,className:i("lucide-".concat(l(n(e))),"lucide-".concat(e),c),...d})});return s.displayName=n(e),s}},4401:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},8420:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])},2451:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},407:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7486:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("hand-coins",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]])},1817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},7168:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8728:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8906:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},6865:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7678:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Z}});var a=s(7437),l=s(2265),r=s(9376),n=s(1817),i=s(8906),c=s(8420),d=s(5805),o=s(4401),m=s(8728),x=s(7692),h=s(407),u=s(9205);let p=(0,u.Z)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var b=s(7486),f=s(3247),j=s(7168),g=s(6865),N=s(1723),y=s(2208);let v=(0,u.Z)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var w=s(2451),k=s(2489);function Z(){let e=(0,r.useRouter)(),[t,s]=(0,l.useState)(null),[u,Z]=(0,l.useState)([]),[M,S]=(0,l.useState)(null),[A,U]=(0,l.useState)(0),[R,C]=(0,l.useState)(!0),[E,P]=(0,l.useState)(null),[L,_]=(0,l.useState)(""),[D,I]=(0,l.useState)(""),[T,z]=(0,l.useState)(0),[H,q]=(0,l.useState)(null),[O,V]=(0,l.useState)(null);async function W(){try{let t=await fetch("/api/auth/session"),a=await t.json();if(!a.authenticated){e.push("/login");return}if("SUPER_ADMIN"!==a.user.globalRole){e.push("/");return}s(a.user)}catch(t){e.push("/login")}}async function F(){C(!0),P(null);try{let e=new URLSearchParams;L&&e.set("search",L),D&&e.set("role",D),e.set("limit","25"),e.set("offset",T.toString());let t=await fetch("/api/admin/users?".concat(e)),s=await t.json();s.success?(Z(s.users),U(s.total),S(s.stats)):P(s.error||"Failed to fetch users")}catch(e){P("Network error")}finally{C(!1)}}async function $(e,s){if(e===(null==t?void 0:t.id)&&"USER"===s){alert("Cannot demote yourself");return}V(e);try{let t=await fetch("/api/admin/users/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({globalRole:s})}),a=await t.json();a.success?(F(),q(null)):alert(a.error||"Failed to update user")}catch(e){alert("Network error")}finally{V(null)}}async function B(){await fetch("/api/auth/logout",{method:"POST"}),e.push("/login")}(0,l.useEffect)(()=>{W()},[]),(0,l.useEffect)(()=>{t&&F()},[t,D,T]);let G=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never",J=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",K=Math.ceil(A/25);return t?(0,a.jsxs)("div",{className:"min-h-screen bg-slate-900 text-white",children:[(0,a.jsxs)("aside",{className:"fixed left-0 top-0 h-full w-64 bg-slate-800 border-r border-slate-700 z-40",children:[(0,a.jsx)("div",{className:"p-6 border-b border-slate-700",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-indigo-600 flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-bold",children:"Super Admin"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Platform Control"})]})]})}),(0,a.jsx)("nav",{className:"p-4",children:(0,a.jsx)("ul",{className:"space-y-2",children:[{icon:c.Z,label:"Tenants",href:"/admin"},{icon:d.Z,label:"All Users",href:"/admin/users",active:!0},{icon:o.Z,label:"Audit Logs",href:"/admin/audit-logs"},{icon:m.Z,label:"Settings",disabled:!0}].map((t,s)=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>t.href&&e.push(t.href),disabled:t.disabled,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition ".concat(t.active?"bg-indigo-600/20 text-indigo-400":t.disabled?"text-slate-600 cursor-not-allowed":"text-slate-400 hover:bg-slate-700/50 hover:text-white"),children:[(0,a.jsx)(t.icon,{className:"w-5 h-5"}),t.label]})},s))})}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4 px-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-sm font-bold",children:t.email.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:t.name||t.email}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Super Admin"})]})]}),(0,a.jsxs)("button",{onClick:B,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-700/50 hover:text-white transition",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Sign Out"]})]})]}),(0,a.jsxs)("main",{className:"ml-64 p-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400 text-sm mb-2",children:[(0,a.jsx)("a",{href:"/admin",className:"hover:text-white transition",children:"Admin"}),(0,a.jsx)(h.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-white",children:"All Users"})]}),(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"All Users"}),(0,a.jsx)("p",{className:"text-slate-400 mt-1",children:"Manage platform users across all tenants"})]})}),M&&(0,a.jsx)("div",{className:"grid grid-cols-4 gap-6 mb-8",children:[{label:"Total Users",value:M.totalUsers,icon:d.Z,color:"bg-indigo-500/20 text-indigo-400"},{label:"Super Admins",value:M.superAdmins,icon:p,color:"bg-amber-500/20 text-amber-400"},{label:"In Tenants",value:M.usersWithTenants,icon:c.Z,color:"bg-emerald-500/20 text-emerald-400"},{label:"Partners",value:M.usersWithPartners,icon:b.Z,color:"bg-purple-500/20 text-purple-400"}].map((e,t)=>(0,a.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-6 border border-slate-700",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl ".concat(e.color," flex items-center justify-center mb-4"),children:(0,a.jsx)(e.icon,{className:"w-6 h-6"})}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:e.value}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:e.label})]},t))}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by email or name...",value:L,onChange:e=>_(e.target.value),onKeyDown:e=>"Enter"===e.key&&F(),className:"w-full pl-10 pr-4 py-2 bg-slate-800 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"})]}),(0,a.jsxs)("select",{value:D,onChange:e=>{I(e.target.value),z(0)},className:"px-4 py-2 bg-slate-800 border border-slate-700 rounded-xl text-white focus:ring-2 focus:ring-indigo-500 outline-none",children:[(0,a.jsx)("option",{value:"",children:"All Roles"}),(0,a.jsx)("option",{value:"SUPER_ADMIN",children:"Super Admin"}),(0,a.jsx)("option",{value:"USER",children:"User"})]}),(0,a.jsx)("button",{onClick:()=>{z(0),F()},className:"p-2 bg-slate-800 border border-slate-700 rounded-xl hover:bg-slate-700 transition",children:(0,a.jsx)(j.Z,{className:"w-5 h-5"})})]}),R?(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsx)(n.Z,{className:"w-8 h-8 animate-spin text-indigo-500"})}):E?(0,a.jsxs)("div",{className:"text-center py-20 text-red-400",children:[(0,a.jsx)(g.Z,{className:"w-12 h-12 mx-auto mb-4"}),(0,a.jsx)("p",{children:E})]}):0===u.length?(0,a.jsxs)("div",{className:"text-center py-20 bg-slate-800/50 rounded-2xl border border-slate-700 border-dashed",children:[(0,a.jsx)(d.Z,{className:"w-16 h-16 mx-auto text-slate-600 mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No users found"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Try adjusting your search or filters"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"bg-slate-800 rounded-2xl border border-slate-700 overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-400",children:"User"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-400",children:"Role"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-400",children:"Tenants"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-400",children:"Partner"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-400",children:"Last Login"}),(0,a.jsx)("th",{className:"text-right px-6 py-4 text-sm font-medium text-slate-400",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:u.map(e=>(0,a.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold",children:e.avatarUrl?(0,a.jsx)("img",{src:e.avatarUrl,alt:"",className:"w-full h-full rounded-full object-cover"}):e.email.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name||"Unnamed"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ".concat("SUPER_ADMIN"===e.globalRole?"bg-amber-500/20 text-amber-400":"bg-slate-500/20 text-slate-400"),children:["SUPER_ADMIN"===e.globalRole&&(0,a.jsx)(p,{className:"w-3 h-3"}),e.globalRole]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.memberships.length>0?(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.memberships.slice(0,2).map((e,t)=>(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 bg-indigo-500/20 text-indigo-400 rounded-full",children:e.tenantSlug},t)),e.memberships.length>2&&(0,a.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-slate-500/20 text-slate-400 rounded-full",children:["+",e.memberships.length-2]})]}):(0,a.jsx)("span",{className:"text-slate-500 text-sm",children:"None"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.partnerMembership?(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(e.partnerMembership.isActive?"bg-purple-500/20 text-purple-400":"bg-slate-500/20 text-slate-400"),children:e.partnerMembership.partnerSlug}):(0,a.jsx)("span",{className:"text-slate-500 text-sm",children:"-"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-slate-400",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4"}),G(e.lastLoginAt)]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>q(e),className:"p-2 hover:bg-slate-700 rounded-lg transition",title:"View Details",children:(0,a.jsx)(y.Z,{className:"w-4 h-4"})}),"USER"===e.globalRole?(0,a.jsx)("button",{onClick:()=>$(e.id,"SUPER_ADMIN"),disabled:O===e.id,className:"p-2 hover:bg-amber-500/20 text-amber-400 rounded-lg transition",title:"Promote to Super Admin",children:O===e.id?(0,a.jsx)(n.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(p,{className:"w-4 h-4"})}):e.id!==(null==t?void 0:t.id)?(0,a.jsx)("button",{onClick:()=>$(e.id,"USER"),disabled:O===e.id,className:"p-2 hover:bg-slate-500/20 text-slate-400 rounded-lg transition",title:"Demote to User",children:O===e.id?(0,a.jsx)(n.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(v,{className:"w-4 h-4"})}):null]})})]},e.id))})]})}),K>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-400",children:["Showing ",T+1," to ",Math.min(T+25,A)," of ",A," users"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>z(Math.max(0,T-25)),disabled:0===T,className:"p-2 bg-slate-800 border border-slate-700 rounded-lg hover:bg-slate-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(w.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("span",{className:"px-4 py-2 text-sm",children:["Page ",Math.floor(T/25)+1," of ",K]}),(0,a.jsx)("button",{onClick:()=>z(T+25),disabled:T+25>=A,className:"p-2 bg-slate-800 border border-slate-700 rounded-lg hover:bg-slate-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(h.Z,{className:"w-5 h-5"})})]})]})]})]}),H&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-slate-800 rounded-2xl w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-slate-700 sticky top-0 bg-slate-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 rounded-full bg-indigo-600 flex items-center justify-center text-xl font-bold",children:H.avatarUrl?(0,a.jsx)("img",{src:H.avatarUrl,alt:"",className:"w-full h-full rounded-full object-cover"}):H.email.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:H.name||"Unnamed User"}),(0,a.jsx)("p",{className:"text-slate-400",children:H.email})]})]}),(0,a.jsx)("button",{onClick:()=>q(null),className:"p-2 hover:bg-slate-700 rounded-lg transition",children:(0,a.jsx)(k.Z,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-slate-700/30 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Global Role"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ".concat("SUPER_ADMIN"===H.globalRole?"bg-amber-500/20 text-amber-400":"bg-slate-500/20 text-slate-400"),children:["SUPER_ADMIN"===H.globalRole&&(0,a.jsx)(p,{className:"w-3 h-3"}),H.globalRole]}),H.id!==(null==t?void 0:t.id)&&(0,a.jsx)("button",{onClick:()=>$(H.id,"SUPER_ADMIN"===H.globalRole?"USER":"SUPER_ADMIN"),disabled:O===H.id,className:"text-xs text-indigo-400 hover:text-indigo-300",children:O===H.id?"Updating...":"Change"})]})]}),(0,a.jsxs)("div",{className:"bg-slate-700/30 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Active Sessions"}),(0,a.jsx)("p",{className:"font-semibold",children:H.activeSessions})]}),(0,a.jsxs)("div",{className:"bg-slate-700/30 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Registered"}),(0,a.jsx)("p",{className:"font-semibold",children:J(H.createdAt)})]}),(0,a.jsxs)("div",{className:"bg-slate-700/30 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Last Login"}),(0,a.jsx)("p",{className:"font-semibold",children:J(H.lastLoginAt)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-indigo-400"}),"Tenant Memberships (",H.memberships.length,")"]}),0===H.memberships.length?(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"No tenant memberships"}):(0,a.jsx)("div",{className:"space-y-2",children:H.memberships.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-slate-700/30 rounded-xl p-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.tenantName}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:e.tenantSlug})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat("TENANT_ADMIN"===e.role?"bg-indigo-500/20 text-indigo-400":"bg-slate-500/20 text-slate-400"),children:e.role}),(0,a.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Since ",G(e.createdAt)]})]})]},e.id))})]}),H.partnerMembership&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5 text-purple-400"}),"Partner Membership"]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-slate-700/30 rounded-xl p-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:H.partnerMembership.partnerName}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:H.partnerMembership.partnerSlug})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(H.partnerMembership.isActive?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:H.partnerMembership.isActive?"Active":"Inactive"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:H.partnerMembership.role})]})]})]})]}),(0,a.jsx)("div",{className:"p-6 border-t border-slate-700 sticky bottom-0 bg-slate-800",children:(0,a.jsx)("button",{onClick:()=>q(null),className:"w-full px-4 py-3 border border-slate-700 rounded-xl hover:bg-slate-700/50 transition",children:"Close"})})]})})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:(0,a.jsx)(n.Z,{className:"w-8 h-8 animate-spin text-indigo-500"})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=6028)}),_N_E=e.O()}]);