"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/tenants/[id]/route";
exports.ids = ["app/api/admin/tenants/[id]/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute&page=%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute&page=%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_saas_core_src_app_api_admin_tenants_id_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/admin/tenants/[id]/route.ts */ \"(rsc)/./src/app/api/admin/tenants/[id]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/tenants/[id]/route\",\n        pathname: \"/api/admin/tenants/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/tenants/[id]/route\"\n    },\n    resolvedPagePath: \"/app/saas-core/src/app/api/admin/tenants/[id]/route.ts\",\n    nextConfigOutput,\n    userland: _app_saas_core_src_app_api_admin_tenants_id_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/admin/tenants/[id]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRnRlbmFudHMlMkYlNUJpZCU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWRtaW4lMkZ0ZW5hbnRzJTJGJTVCaWQlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZG1pbiUyRnRlbmFudHMlMkYlNUJpZCU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZhcHAlMkZzYWFzLWNvcmUlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmFwcCUyRnNhYXMtY29yZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDTTtBQUNuRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NhYXMtY29yZS8/OWM2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvYXBwL3NhYXMtY29yZS9zcmMvYXBwL2FwaS9hZG1pbi90ZW5hbnRzL1tpZF0vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL3RlbmFudHMvW2lkXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FkbWluL3RlbmFudHMvW2lkXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWRtaW4vdGVuYW50cy9baWRdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL2FwcC9zYWFzLWNvcmUvc3JjL2FwcC9hcGkvYWRtaW4vdGVuYW50cy9baWRdL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hZG1pbi90ZW5hbnRzL1tpZF0vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute&page=%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/admin/tenants/[id]/route.ts":
/*!*************************************************!*\
  !*** ./src/app/api/admin/tenants/[id]/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_authorization__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/authorization */ \"(rsc)/./src/lib/authorization.ts\");\n/* harmony import */ var _lib_audit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/audit */ \"(rsc)/./src/lib/audit.ts\");\n\n\n\n\n// GET /api/admin/tenants/[id] - Get tenant details\nasync function GET(request, { params }) {\n    const authResult = await (0,_lib_authorization__WEBPACK_IMPORTED_MODULE_2__.requireSuperAdmin)();\n    if (!authResult.authorized) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: authResult.error\n        }, {\n            status: authResult.status\n        });\n    }\n    try {\n        const { id } = await params;\n        const tenant = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tenant.findUnique({\n            where: {\n                id\n            },\n            include: {\n                domains: true,\n                memberships: {\n                    include: {\n                        user: {\n                            select: {\n                                id: true,\n                                email: true,\n                                name: true,\n                                globalRole: true,\n                                lastLoginAt: true\n                            }\n                        }\n                    }\n                },\n                _count: {\n                    select: {\n                        memberships: true\n                    }\n                }\n            }\n        });\n        if (!tenant) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Tenant not found\"\n            }, {\n                status: 404\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            tenant\n        });\n    } catch (error) {\n        console.error(\"Failed to fetch tenant:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to fetch tenant\"\n        }, {\n            status: 500\n        });\n    }\n}\n// PATCH /api/admin/tenants/[id] - Update tenant\nasync function PATCH(request, { params }) {\n    const authResult = await (0,_lib_authorization__WEBPACK_IMPORTED_MODULE_2__.requireSuperAdmin)();\n    if (!authResult.authorized) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: authResult.error\n        }, {\n            status: authResult.status\n        });\n    }\n    try {\n        const { id } = await params;\n        const body = await request.json();\n        const existingTenant = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tenant.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!existingTenant) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Tenant not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Extract allowed fields\n        const { name, appName, logoUrl, faviconUrl, primaryColor, secondaryColor, status } = body;\n        // Build update data\n        const updateData = {};\n        if (name !== undefined) updateData.name = name;\n        if (appName !== undefined) updateData.appName = appName;\n        if (logoUrl !== undefined) updateData.logoUrl = logoUrl;\n        if (faviconUrl !== undefined) updateData.faviconUrl = faviconUrl;\n        if (primaryColor !== undefined) updateData.primaryColor = primaryColor;\n        if (secondaryColor !== undefined) updateData.secondaryColor = secondaryColor;\n        // Handle status change with audit logging\n        if (status !== undefined && status !== existingTenant.status) {\n            updateData.status = status;\n            let auditAction;\n            switch(status){\n                case \"SUSPENDED\":\n                    auditAction = \"TENANT_SUSPENDED\";\n                    break;\n                case \"ACTIVE\":\n                    auditAction = \"TENANT_ACTIVATED\";\n                    break;\n                case \"DEACTIVATED\":\n                    auditAction = \"TENANT_DEACTIVATED\";\n                    break;\n                default:\n                    auditAction = \"TENANT_UPDATED\";\n            }\n            await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_3__.createAuditLog)({\n                action: auditAction,\n                actorId: authResult.user.id,\n                actorEmail: authResult.user.email,\n                targetType: \"Tenant\",\n                targetId: id,\n                metadata: {\n                    oldStatus: existingTenant.status,\n                    newStatus: status\n                }\n            });\n        } else if (Object.keys(updateData).length > 0) {\n            await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_3__.createAuditLog)({\n                action: \"TENANT_UPDATED\",\n                actorId: authResult.user.id,\n                actorEmail: authResult.user.email,\n                targetType: \"Tenant\",\n                targetId: id,\n                metadata: updateData\n            });\n        }\n        const tenant = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tenant.update({\n            where: {\n                id\n            },\n            data: updateData,\n            include: {\n                domains: true\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            tenant\n        });\n    } catch (error) {\n        console.error(\"Failed to update tenant:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to update tenant\"\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE /api/admin/tenants/[id] - Deactivate tenant (soft delete)\nasync function DELETE(request, { params }) {\n    const authResult = await (0,_lib_authorization__WEBPACK_IMPORTED_MODULE_2__.requireSuperAdmin)();\n    if (!authResult.authorized) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: authResult.error\n        }, {\n            status: authResult.status\n        });\n    }\n    try {\n        const { id } = await params;\n        const tenant = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tenant.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!tenant) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Tenant not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Soft delete - set to DEACTIVATED\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tenant.update({\n            where: {\n                id\n            },\n            data: {\n                status: \"DEACTIVATED\"\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_3__.createAuditLog)({\n            action: \"TENANT_DEACTIVATED\",\n            actorId: authResult.user.id,\n            actorEmail: authResult.user.email,\n            targetType: \"Tenant\",\n            targetId: id,\n            metadata: {\n                name: tenant.name,\n                slug: tenant.slug\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Tenant deactivated successfully\"\n        });\n    } catch (error) {\n        console.error(\"Failed to deactivate tenant:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to deactivate tenant\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hZG1pbi90ZW5hbnRzL1tpZF0vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF1RDtBQUNsQjtBQUNrQjtBQUNYO0FBTzVDLG1EQUFtRDtBQUM1QyxlQUFlSSxJQUFJQyxPQUFvQixFQUFFLEVBQUVDLE1BQU0sRUFBZTtJQUNyRSxNQUFNQyxhQUFhLE1BQU1MLHFFQUFpQkE7SUFFMUMsSUFBSSxDQUFDSyxXQUFXQyxVQUFVLEVBQUU7UUFDMUIsT0FBT1IscURBQVlBLENBQUNTLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPQyxPQUFPSixXQUFXSSxLQUFLO1FBQUMsR0FDMUM7WUFBRUMsUUFBUUwsV0FBV0ssTUFBTTtRQUFDO0lBRWhDO0lBRUEsSUFBSTtRQUNGLE1BQU0sRUFBRUMsRUFBRSxFQUFFLEdBQUcsTUFBTVA7UUFFckIsTUFBTVEsU0FBUyxNQUFNYiwrQ0FBTUEsQ0FBQ2EsTUFBTSxDQUFDQyxVQUFVLENBQUM7WUFDNUNDLE9BQU87Z0JBQUVIO1lBQUc7WUFDWkksU0FBUztnQkFDUEMsU0FBUztnQkFDVEMsYUFBYTtvQkFDWEYsU0FBUzt3QkFDUEcsTUFBTTs0QkFDSkMsUUFBUTtnQ0FDTlIsSUFBSTtnQ0FDSlMsT0FBTztnQ0FDUEMsTUFBTTtnQ0FDTkMsWUFBWTtnQ0FDWkMsYUFBYTs0QkFDZjt3QkFDRjtvQkFDRjtnQkFDRjtnQkFDQUMsUUFBUTtvQkFDTkwsUUFBUTt3QkFBRUYsYUFBYTtvQkFBSztnQkFDOUI7WUFDRjtRQUNGO1FBRUEsSUFBSSxDQUFDTCxRQUFRO1lBQ1gsT0FBT2QscURBQVlBLENBQUNTLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLE9BQU87WUFBbUIsR0FDNUM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE9BQU9aLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEk7UUFDRjtJQUNGLEVBQUUsT0FBT0gsT0FBTztRQUNkZ0IsUUFBUWhCLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU9YLHFEQUFZQSxDQUFDUyxJQUFJLENBQ3RCO1lBQUVDLFNBQVM7WUFBT0MsT0FBTztRQUF5QixHQUNsRDtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLGdEQUFnRDtBQUN6QyxlQUFlZ0IsTUFBTXZCLE9BQW9CLEVBQUUsRUFBRUMsTUFBTSxFQUFlO0lBQ3ZFLE1BQU1DLGFBQWEsTUFBTUwscUVBQWlCQTtJQUUxQyxJQUFJLENBQUNLLFdBQVdDLFVBQVUsRUFBRTtRQUMxQixPQUFPUixxREFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1lBQU9DLE9BQU9KLFdBQVdJLEtBQUs7UUFBQyxHQUMxQztZQUFFQyxRQUFRTCxXQUFXSyxNQUFNO1FBQUM7SUFFaEM7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxFQUFFLEVBQUUsR0FBRyxNQUFNUDtRQUNyQixNQUFNdUIsT0FBTyxNQUFNeEIsUUFBUUksSUFBSTtRQUUvQixNQUFNcUIsaUJBQWlCLE1BQU03QiwrQ0FBTUEsQ0FBQ2EsTUFBTSxDQUFDQyxVQUFVLENBQUM7WUFDcERDLE9BQU87Z0JBQUVIO1lBQUc7UUFDZDtRQUVBLElBQUksQ0FBQ2lCLGdCQUFnQjtZQUNuQixPQUFPOUIscURBQVlBLENBQUNTLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLE9BQU87WUFBbUIsR0FDNUM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLHlCQUF5QjtRQUN6QixNQUFNLEVBQUVXLElBQUksRUFBRVEsT0FBTyxFQUFFQyxPQUFPLEVBQUVDLFVBQVUsRUFBRUMsWUFBWSxFQUFFQyxjQUFjLEVBQUV2QixNQUFNLEVBQUUsR0FBR2lCO1FBRXJGLG9CQUFvQjtRQUNwQixNQUFNTyxhQUFrQixDQUFDO1FBQ3pCLElBQUliLFNBQVNjLFdBQVdELFdBQVdiLElBQUksR0FBR0E7UUFDMUMsSUFBSVEsWUFBWU0sV0FBV0QsV0FBV0wsT0FBTyxHQUFHQTtRQUNoRCxJQUFJQyxZQUFZSyxXQUFXRCxXQUFXSixPQUFPLEdBQUdBO1FBQ2hELElBQUlDLGVBQWVJLFdBQVdELFdBQVdILFVBQVUsR0FBR0E7UUFDdEQsSUFBSUMsaUJBQWlCRyxXQUFXRCxXQUFXRixZQUFZLEdBQUdBO1FBQzFELElBQUlDLG1CQUFtQkUsV0FBV0QsV0FBV0QsY0FBYyxHQUFHQTtRQUU5RCwwQ0FBMEM7UUFDMUMsSUFBSXZCLFdBQVd5QixhQUFhekIsV0FBV2tCLGVBQWVsQixNQUFNLEVBQUU7WUFDNUR3QixXQUFXeEIsTUFBTSxHQUFHQTtZQUVwQixJQUFJMEI7WUFDSixPQUFRMUI7Z0JBQ04sS0FBSztvQkFDSDBCLGNBQWM7b0JBQ2Q7Z0JBQ0YsS0FBSztvQkFDSEEsY0FBYztvQkFDZDtnQkFDRixLQUFLO29CQUNIQSxjQUFjO29CQUNkO2dCQUNGO29CQUNFQSxjQUFjO1lBQ2xCO1lBRUEsTUFBTW5DLDBEQUFjQSxDQUFDO2dCQUNuQm9DLFFBQVFEO2dCQUNSRSxTQUFTakMsV0FBV2EsSUFBSSxDQUFDUCxFQUFFO2dCQUMzQjRCLFlBQVlsQyxXQUFXYSxJQUFJLENBQUNFLEtBQUs7Z0JBQ2pDb0IsWUFBWTtnQkFDWkMsVUFBVTlCO2dCQUNWK0IsVUFBVTtvQkFBRUMsV0FBV2YsZUFBZWxCLE1BQU07b0JBQUVrQyxXQUFXbEM7Z0JBQU87WUFDbEU7UUFDRixPQUFPLElBQUltQyxPQUFPQyxJQUFJLENBQUNaLFlBQVlhLE1BQU0sR0FBRyxHQUFHO1lBQzdDLE1BQU05QywwREFBY0EsQ0FBQztnQkFDbkJvQyxRQUFRO2dCQUNSQyxTQUFTakMsV0FBV2EsSUFBSSxDQUFDUCxFQUFFO2dCQUMzQjRCLFlBQVlsQyxXQUFXYSxJQUFJLENBQUNFLEtBQUs7Z0JBQ2pDb0IsWUFBWTtnQkFDWkMsVUFBVTlCO2dCQUNWK0IsVUFBVVI7WUFDWjtRQUNGO1FBRUEsTUFBTXRCLFNBQVMsTUFBTWIsK0NBQU1BLENBQUNhLE1BQU0sQ0FBQ29DLE1BQU0sQ0FBQztZQUN4Q2xDLE9BQU87Z0JBQUVIO1lBQUc7WUFDWnNDLE1BQU1mO1lBQ05uQixTQUFTO2dCQUNQQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLE9BQU9sQixxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RJO1FBQ0Y7SUFDRixFQUFFLE9BQU9ILE9BQU87UUFDZGdCLFFBQVFoQixLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPWCxxREFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1lBQU9DLE9BQU87UUFBMEIsR0FDbkQ7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFQSxtRUFBbUU7QUFDNUQsZUFBZXdDLE9BQU8vQyxPQUFvQixFQUFFLEVBQUVDLE1BQU0sRUFBZTtJQUN4RSxNQUFNQyxhQUFhLE1BQU1MLHFFQUFpQkE7SUFFMUMsSUFBSSxDQUFDSyxXQUFXQyxVQUFVLEVBQUU7UUFDMUIsT0FBT1IscURBQVlBLENBQUNTLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPQyxPQUFPSixXQUFXSSxLQUFLO1FBQUMsR0FDMUM7WUFBRUMsUUFBUUwsV0FBV0ssTUFBTTtRQUFDO0lBRWhDO0lBRUEsSUFBSTtRQUNGLE1BQU0sRUFBRUMsRUFBRSxFQUFFLEdBQUcsTUFBTVA7UUFFckIsTUFBTVEsU0FBUyxNQUFNYiwrQ0FBTUEsQ0FBQ2EsTUFBTSxDQUFDQyxVQUFVLENBQUM7WUFDNUNDLE9BQU87Z0JBQUVIO1lBQUc7UUFDZDtRQUVBLElBQUksQ0FBQ0MsUUFBUTtZQUNYLE9BQU9kLHFEQUFZQSxDQUFDUyxJQUFJLENBQ3RCO2dCQUFFQyxTQUFTO2dCQUFPQyxPQUFPO1lBQW1CLEdBQzVDO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxtQ0FBbUM7UUFDbkMsTUFBTVgsK0NBQU1BLENBQUNhLE1BQU0sQ0FBQ29DLE1BQU0sQ0FBQztZQUN6QmxDLE9BQU87Z0JBQUVIO1lBQUc7WUFDWnNDLE1BQU07Z0JBQUV2QyxRQUFRO1lBQWM7UUFDaEM7UUFFQSxNQUFNVCwwREFBY0EsQ0FBQztZQUNuQm9DLFFBQVE7WUFDUkMsU0FBU2pDLFdBQVdhLElBQUksQ0FBQ1AsRUFBRTtZQUMzQjRCLFlBQVlsQyxXQUFXYSxJQUFJLENBQUNFLEtBQUs7WUFDakNvQixZQUFZO1lBQ1pDLFVBQVU5QjtZQUNWK0IsVUFBVTtnQkFBRXJCLE1BQU1ULE9BQU9TLElBQUk7Z0JBQUU4QixNQUFNdkMsT0FBT3VDLElBQUk7WUFBQztRQUNuRDtRQUVBLE9BQU9yRCxxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1Q0QyxTQUFTO1FBQ1g7SUFDRixFQUFFLE9BQU8zQyxPQUFPO1FBQ2RnQixRQUFRaEIsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsT0FBT1gscURBQVlBLENBQUNTLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPQyxPQUFPO1FBQThCLEdBQ3ZEO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Fhcy1jb3JlLy4vc3JjL2FwcC9hcGkvYWRtaW4vdGVuYW50cy9baWRdL3JvdXRlLnRzPzZiMjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvcHJpc21hJ1xuaW1wb3J0IHsgcmVxdWlyZVN1cGVyQWRtaW4gfSBmcm9tICdAL2xpYi9hdXRob3JpemF0aW9uJ1xuaW1wb3J0IHsgY3JlYXRlQXVkaXRMb2cgfSBmcm9tICdAL2xpYi9hdWRpdCdcbmltcG9ydCB7IFRlbmFudFN0YXR1cyB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG50eXBlIFJvdXRlUGFyYW1zID0ge1xuICBwYXJhbXM6IFByb21pc2U8eyBpZDogc3RyaW5nIH0+XG59XG5cbi8vIEdFVCAvYXBpL2FkbWluL3RlbmFudHMvW2lkXSAtIEdldCB0ZW5hbnQgZGV0YWlsc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgeyBwYXJhbXMgfTogUm91dGVQYXJhbXMpIHtcbiAgY29uc3QgYXV0aFJlc3VsdCA9IGF3YWl0IHJlcXVpcmVTdXBlckFkbWluKClcbiAgXG4gIGlmICghYXV0aFJlc3VsdC5hdXRob3JpemVkKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGF1dGhSZXN1bHQuZXJyb3IgfSxcbiAgICAgIHsgc3RhdHVzOiBhdXRoUmVzdWx0LnN0YXR1cyB9XG4gICAgKVxuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHsgaWQgfSA9IGF3YWl0IHBhcmFtc1xuICAgIFxuICAgIGNvbnN0IHRlbmFudCA9IGF3YWl0IHByaXNtYS50ZW5hbnQuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBkb21haW5zOiB0cnVlLFxuICAgICAgICBtZW1iZXJzaGlwczoge1xuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnbG9iYWxSb2xlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxhc3RMb2dpbkF0OiB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDogeyBtZW1iZXJzaGlwczogdHJ1ZSB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGlmICghdGVuYW50KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVGVuYW50IG5vdCBmb3VuZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgdGVuYW50XG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggdGVuYW50OicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHRlbmFudCcgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG4vLyBQQVRDSCAvYXBpL2FkbWluL3RlbmFudHMvW2lkXSAtIFVwZGF0ZSB0ZW5hbnRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQQVRDSChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgeyBwYXJhbXMgfTogUm91dGVQYXJhbXMpIHtcbiAgY29uc3QgYXV0aFJlc3VsdCA9IGF3YWl0IHJlcXVpcmVTdXBlckFkbWluKClcbiAgXG4gIGlmICghYXV0aFJlc3VsdC5hdXRob3JpemVkKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGF1dGhSZXN1bHQuZXJyb3IgfSxcbiAgICAgIHsgc3RhdHVzOiBhdXRoUmVzdWx0LnN0YXR1cyB9XG4gICAgKVxuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHsgaWQgfSA9IGF3YWl0IHBhcmFtc1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIFxuICAgIGNvbnN0IGV4aXN0aW5nVGVuYW50ID0gYXdhaXQgcHJpc21hLnRlbmFudC5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH1cbiAgICB9KVxuICAgIFxuICAgIGlmICghZXhpc3RpbmdUZW5hbnQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdUZW5hbnQgbm90IGZvdW5kJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgIClcbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCBhbGxvd2VkIGZpZWxkc1xuICAgIGNvbnN0IHsgbmFtZSwgYXBwTmFtZSwgbG9nb1VybCwgZmF2aWNvblVybCwgcHJpbWFyeUNvbG9yLCBzZWNvbmRhcnlDb2xvciwgc3RhdHVzIH0gPSBib2R5XG4gICAgXG4gICAgLy8gQnVpbGQgdXBkYXRlIGRhdGFcbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7fVxuICAgIGlmIChuYW1lICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEubmFtZSA9IG5hbWVcbiAgICBpZiAoYXBwTmFtZSAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmFwcE5hbWUgPSBhcHBOYW1lXG4gICAgaWYgKGxvZ29VcmwgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5sb2dvVXJsID0gbG9nb1VybFxuICAgIGlmIChmYXZpY29uVXJsICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuZmF2aWNvblVybCA9IGZhdmljb25VcmxcbiAgICBpZiAocHJpbWFyeUNvbG9yICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEucHJpbWFyeUNvbG9yID0gcHJpbWFyeUNvbG9yXG4gICAgaWYgKHNlY29uZGFyeUNvbG9yICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuc2Vjb25kYXJ5Q29sb3IgPSBzZWNvbmRhcnlDb2xvclxuICAgIFxuICAgIC8vIEhhbmRsZSBzdGF0dXMgY2hhbmdlIHdpdGggYXVkaXQgbG9nZ2luZ1xuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMgIT09IGV4aXN0aW5nVGVuYW50LnN0YXR1cykge1xuICAgICAgdXBkYXRlRGF0YS5zdGF0dXMgPSBzdGF0dXNcbiAgICAgIFxuICAgICAgbGV0IGF1ZGl0QWN0aW9uOiAnVEVOQU5UX1NVU1BFTkRFRCcgfCAnVEVOQU5UX0FDVElWQVRFRCcgfCAnVEVOQU5UX0RFQUNUSVZBVEVEJyB8ICdURU5BTlRfVVBEQVRFRCdcbiAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICAgIGNhc2UgJ1NVU1BFTkRFRCc6XG4gICAgICAgICAgYXVkaXRBY3Rpb24gPSAnVEVOQU5UX1NVU1BFTkRFRCdcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdBQ1RJVkUnOlxuICAgICAgICAgIGF1ZGl0QWN0aW9uID0gJ1RFTkFOVF9BQ1RJVkFURUQnXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnREVBQ1RJVkFURUQnOlxuICAgICAgICAgIGF1ZGl0QWN0aW9uID0gJ1RFTkFOVF9ERUFDVElWQVRFRCdcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGF1ZGl0QWN0aW9uID0gJ1RFTkFOVF9VUERBVEVEJ1xuICAgICAgfVxuICAgICAgXG4gICAgICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgICAgIGFjdGlvbjogYXVkaXRBY3Rpb24sXG4gICAgICAgIGFjdG9ySWQ6IGF1dGhSZXN1bHQudXNlci5pZCxcbiAgICAgICAgYWN0b3JFbWFpbDogYXV0aFJlc3VsdC51c2VyLmVtYWlsLFxuICAgICAgICB0YXJnZXRUeXBlOiAnVGVuYW50JyxcbiAgICAgICAgdGFyZ2V0SWQ6IGlkLFxuICAgICAgICBtZXRhZGF0YTogeyBvbGRTdGF0dXM6IGV4aXN0aW5nVGVuYW50LnN0YXR1cywgbmV3U3RhdHVzOiBzdGF0dXMgfVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZURhdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgICAgYWN0aW9uOiAnVEVOQU5UX1VQREFURUQnLFxuICAgICAgICBhY3RvcklkOiBhdXRoUmVzdWx0LnVzZXIuaWQsXG4gICAgICAgIGFjdG9yRW1haWw6IGF1dGhSZXN1bHQudXNlci5lbWFpbCxcbiAgICAgICAgdGFyZ2V0VHlwZTogJ1RlbmFudCcsXG4gICAgICAgIHRhcmdldElkOiBpZCxcbiAgICAgICAgbWV0YWRhdGE6IHVwZGF0ZURhdGFcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRlbmFudCA9IGF3YWl0IHByaXNtYS50ZW5hbnQudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBkYXRhOiB1cGRhdGVEYXRhLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBkb21haW5zOiB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHRlbmFudFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSB0ZW5hbnQ6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gdXBkYXRlIHRlbmFudCcgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG4vLyBERUxFVEUgL2FwaS9hZG1pbi90ZW5hbnRzL1tpZF0gLSBEZWFjdGl2YXRlIHRlbmFudCAoc29mdCBkZWxldGUpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCB7IHBhcmFtcyB9OiBSb3V0ZVBhcmFtcykge1xuICBjb25zdCBhdXRoUmVzdWx0ID0gYXdhaXQgcmVxdWlyZVN1cGVyQWRtaW4oKVxuICBcbiAgaWYgKCFhdXRoUmVzdWx0LmF1dGhvcml6ZWQpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYXV0aFJlc3VsdC5lcnJvciB9LFxuICAgICAgeyBzdGF0dXM6IGF1dGhSZXN1bHQuc3RhdHVzIH1cbiAgICApXG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgcGFyYW1zXG4gICAgXG4gICAgY29uc3QgdGVuYW50ID0gYXdhaXQgcHJpc21hLnRlbmFudC5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH1cbiAgICB9KVxuICAgIFxuICAgIGlmICghdGVuYW50KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVGVuYW50IG5vdCBmb3VuZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIC8vIFNvZnQgZGVsZXRlIC0gc2V0IHRvIERFQUNUSVZBVEVEXG4gICAgYXdhaXQgcHJpc21hLnRlbmFudC51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGRhdGE6IHsgc3RhdHVzOiAnREVBQ1RJVkFURUQnIH1cbiAgICB9KVxuICAgIFxuICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgIGFjdGlvbjogJ1RFTkFOVF9ERUFDVElWQVRFRCcsXG4gICAgICBhY3RvcklkOiBhdXRoUmVzdWx0LnVzZXIuaWQsXG4gICAgICBhY3RvckVtYWlsOiBhdXRoUmVzdWx0LnVzZXIuZW1haWwsXG4gICAgICB0YXJnZXRUeXBlOiAnVGVuYW50JyxcbiAgICAgIHRhcmdldElkOiBpZCxcbiAgICAgIG1ldGFkYXRhOiB7IG5hbWU6IHRlbmFudC5uYW1lLCBzbHVnOiB0ZW5hbnQuc2x1ZyB9XG4gICAgfSlcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdUZW5hbnQgZGVhY3RpdmF0ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGRlYWN0aXZhdGUgdGVuYW50OicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIGRlYWN0aXZhdGUgdGVuYW50JyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwicmVxdWlyZVN1cGVyQWRtaW4iLCJjcmVhdGVBdWRpdExvZyIsIkdFVCIsInJlcXVlc3QiLCJwYXJhbXMiLCJhdXRoUmVzdWx0IiwiYXV0aG9yaXplZCIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJpZCIsInRlbmFudCIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImluY2x1ZGUiLCJkb21haW5zIiwibWVtYmVyc2hpcHMiLCJ1c2VyIiwic2VsZWN0IiwiZW1haWwiLCJuYW1lIiwiZ2xvYmFsUm9sZSIsImxhc3RMb2dpbkF0IiwiX2NvdW50IiwiY29uc29sZSIsIlBBVENIIiwiYm9keSIsImV4aXN0aW5nVGVuYW50IiwiYXBwTmFtZSIsImxvZ29VcmwiLCJmYXZpY29uVXJsIiwicHJpbWFyeUNvbG9yIiwic2Vjb25kYXJ5Q29sb3IiLCJ1cGRhdGVEYXRhIiwidW5kZWZpbmVkIiwiYXVkaXRBY3Rpb24iLCJhY3Rpb24iLCJhY3RvcklkIiwiYWN0b3JFbWFpbCIsInRhcmdldFR5cGUiLCJ0YXJnZXRJZCIsIm1ldGFkYXRhIiwib2xkU3RhdHVzIiwibmV3U3RhdHVzIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInVwZGF0ZSIsImRhdGEiLCJERUxFVEUiLCJzbHVnIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/admin/tenants/[id]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/audit.ts":
/*!**************************!*\
  !*** ./src/lib/audit.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuditLog: () => (/* binding */ createAuditLog),\n/* harmony export */   getAuditLogs: () => (/* binding */ getAuditLogs)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist-node/v4.js\");\n\n\n/**\n * Create an audit log entry\n */ async function createAuditLog(params) {\n    try {\n        await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.auditLog.create({\n            data: {\n                id: (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(),\n                action: params.action,\n                actorId: params.actorId,\n                actorEmail: params.actorEmail,\n                tenantId: params.tenantId || null,\n                targetType: params.targetType || null,\n                targetId: params.targetId || null,\n                metadata: params.metadata || null,\n                ipAddress: params.ipAddress || null,\n                userAgent: params.userAgent || null\n            }\n        });\n    } catch (error) {\n        // Don't fail the request if audit logging fails\n        console.error(\"Failed to create audit log:\", error);\n    }\n}\n/**\n * Get audit logs with filtering\n */ async function getAuditLogs(options) {\n    const where = {};\n    if (options.tenantId) where.tenantId = options.tenantId;\n    if (options.actorId) where.actorId = options.actorId;\n    if (options.action) where.action = options.action;\n    if (options.targetType) where.targetType = options.targetType;\n    if (options.targetId) where.targetId = options.targetId;\n    if (options.startDate || options.endDate) {\n        where.createdAt = {};\n        if (options.startDate) where.createdAt.gte = options.startDate;\n        if (options.endDate) where.createdAt.lte = options.endDate;\n    }\n    const [logs, total] = await Promise.all([\n        _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.auditLog.findMany({\n            where,\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            take: options.limit || 50,\n            skip: options.offset || 0\n        }),\n        _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.auditLog.count({\n            where\n        })\n    ]);\n    return {\n        logs,\n        total\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1ZGl0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUM7QUFDRTtBQWVuQzs7Q0FFQyxHQUNNLGVBQWVHLGVBQWVDLE1BQXNCO0lBQ3pELElBQUk7UUFDRixNQUFNSiwyQ0FBTUEsQ0FBQ0ssUUFBUSxDQUFDQyxNQUFNLENBQUM7WUFDM0JDLE1BQU07Z0JBQ0pDLElBQUlOLGdEQUFNQTtnQkFDVk8sUUFBUUwsT0FBT0ssTUFBTTtnQkFDckJDLFNBQVNOLE9BQU9NLE9BQU87Z0JBQ3ZCQyxZQUFZUCxPQUFPTyxVQUFVO2dCQUM3QkMsVUFBVVIsT0FBT1EsUUFBUSxJQUFJO2dCQUM3QkMsWUFBWVQsT0FBT1MsVUFBVSxJQUFJO2dCQUNqQ0MsVUFBVVYsT0FBT1UsUUFBUSxJQUFJO2dCQUM3QkMsVUFBVVgsT0FBT1csUUFBUSxJQUFJO2dCQUM3QkMsV0FBV1osT0FBT1ksU0FBUyxJQUFJO2dCQUMvQkMsV0FBV2IsT0FBT2EsU0FBUyxJQUFJO1lBQ2pDO1FBQ0Y7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZCxnREFBZ0Q7UUFDaERDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO0lBQy9DO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLGVBQWVFLGFBQWFDLE9BVWxDO0lBQ0MsTUFBTUMsUUFBYSxDQUFDO0lBRXBCLElBQUlELFFBQVFULFFBQVEsRUFBRVUsTUFBTVYsUUFBUSxHQUFHUyxRQUFRVCxRQUFRO0lBQ3ZELElBQUlTLFFBQVFYLE9BQU8sRUFBRVksTUFBTVosT0FBTyxHQUFHVyxRQUFRWCxPQUFPO0lBQ3BELElBQUlXLFFBQVFaLE1BQU0sRUFBRWEsTUFBTWIsTUFBTSxHQUFHWSxRQUFRWixNQUFNO0lBQ2pELElBQUlZLFFBQVFSLFVBQVUsRUFBRVMsTUFBTVQsVUFBVSxHQUFHUSxRQUFRUixVQUFVO0lBQzdELElBQUlRLFFBQVFQLFFBQVEsRUFBRVEsTUFBTVIsUUFBUSxHQUFHTyxRQUFRUCxRQUFRO0lBRXZELElBQUlPLFFBQVFFLFNBQVMsSUFBSUYsUUFBUUcsT0FBTyxFQUFFO1FBQ3hDRixNQUFNRyxTQUFTLEdBQUcsQ0FBQztRQUNuQixJQUFJSixRQUFRRSxTQUFTLEVBQUVELE1BQU1HLFNBQVMsQ0FBQ0MsR0FBRyxHQUFHTCxRQUFRRSxTQUFTO1FBQzlELElBQUlGLFFBQVFHLE9BQU8sRUFBRUYsTUFBTUcsU0FBUyxDQUFDRSxHQUFHLEdBQUdOLFFBQVFHLE9BQU87SUFDNUQ7SUFFQSxNQUFNLENBQUNJLE1BQU1DLE1BQU0sR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7UUFDdEMvQiwyQ0FBTUEsQ0FBQ0ssUUFBUSxDQUFDMkIsUUFBUSxDQUFDO1lBQ3ZCVjtZQUNBVyxTQUFTO2dCQUFFUixXQUFXO1lBQU87WUFDN0JTLE1BQU1iLFFBQVFjLEtBQUssSUFBSTtZQUN2QkMsTUFBTWYsUUFBUWdCLE1BQU0sSUFBSTtRQUMxQjtRQUNBckMsMkNBQU1BLENBQUNLLFFBQVEsQ0FBQ2lDLEtBQUssQ0FBQztZQUFFaEI7UUFBTTtLQUMvQjtJQUVELE9BQU87UUFBRU07UUFBTUM7SUFBTTtBQUN2QiIsInNvdXJjZXMiOlsid2VicGFjazovL3NhYXMtY29yZS8uL3NyYy9saWIvYXVkaXQudHM/ZjQ2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuL3ByaXNtYSdcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnXG5pbXBvcnQgeyBBdWRpdEFjdGlvbiB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG5pbnRlcmZhY2UgQXVkaXRMb2dQYXJhbXMge1xuICBhY3Rpb246IEF1ZGl0QWN0aW9uXG4gIGFjdG9ySWQ6IHN0cmluZ1xuICBhY3RvckVtYWlsOiBzdHJpbmdcbiAgdGVuYW50SWQ/OiBzdHJpbmcgfCBudWxsXG4gIHRhcmdldFR5cGU/OiBzdHJpbmdcbiAgdGFyZ2V0SWQ/OiBzdHJpbmdcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gIGlwQWRkcmVzcz86IHN0cmluZ1xuICB1c2VyQWdlbnQ/OiBzdHJpbmdcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gYXVkaXQgbG9nIGVudHJ5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBdWRpdExvZyhwYXJhbXM6IEF1ZGl0TG9nUGFyYW1zKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgcHJpc21hLmF1ZGl0TG9nLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgYWN0aW9uOiBwYXJhbXMuYWN0aW9uLFxuICAgICAgICBhY3RvcklkOiBwYXJhbXMuYWN0b3JJZCxcbiAgICAgICAgYWN0b3JFbWFpbDogcGFyYW1zLmFjdG9yRW1haWwsXG4gICAgICAgIHRlbmFudElkOiBwYXJhbXMudGVuYW50SWQgfHwgbnVsbCxcbiAgICAgICAgdGFyZ2V0VHlwZTogcGFyYW1zLnRhcmdldFR5cGUgfHwgbnVsbCxcbiAgICAgICAgdGFyZ2V0SWQ6IHBhcmFtcy50YXJnZXRJZCB8fCBudWxsLFxuICAgICAgICBtZXRhZGF0YTogcGFyYW1zLm1ldGFkYXRhIHx8IG51bGwsXG4gICAgICAgIGlwQWRkcmVzczogcGFyYW1zLmlwQWRkcmVzcyB8fCBudWxsLFxuICAgICAgICB1c2VyQWdlbnQ6IHBhcmFtcy51c2VyQWdlbnQgfHwgbnVsbFxuICAgICAgfVxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gRG9uJ3QgZmFpbCB0aGUgcmVxdWVzdCBpZiBhdWRpdCBsb2dnaW5nIGZhaWxzXG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBhdWRpdCBsb2c6JywgZXJyb3IpXG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgYXVkaXQgbG9ncyB3aXRoIGZpbHRlcmluZ1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXVkaXRMb2dzKG9wdGlvbnM6IHtcbiAgdGVuYW50SWQ/OiBzdHJpbmdcbiAgYWN0b3JJZD86IHN0cmluZ1xuICBhY3Rpb24/OiBBdWRpdEFjdGlvblxuICB0YXJnZXRUeXBlPzogc3RyaW5nXG4gIHRhcmdldElkPzogc3RyaW5nXG4gIHN0YXJ0RGF0ZT86IERhdGVcbiAgZW5kRGF0ZT86IERhdGVcbiAgbGltaXQ/OiBudW1iZXJcbiAgb2Zmc2V0PzogbnVtYmVyXG59KSB7XG4gIGNvbnN0IHdoZXJlOiBhbnkgPSB7fVxuICBcbiAgaWYgKG9wdGlvbnMudGVuYW50SWQpIHdoZXJlLnRlbmFudElkID0gb3B0aW9ucy50ZW5hbnRJZFxuICBpZiAob3B0aW9ucy5hY3RvcklkKSB3aGVyZS5hY3RvcklkID0gb3B0aW9ucy5hY3RvcklkXG4gIGlmIChvcHRpb25zLmFjdGlvbikgd2hlcmUuYWN0aW9uID0gb3B0aW9ucy5hY3Rpb25cbiAgaWYgKG9wdGlvbnMudGFyZ2V0VHlwZSkgd2hlcmUudGFyZ2V0VHlwZSA9IG9wdGlvbnMudGFyZ2V0VHlwZVxuICBpZiAob3B0aW9ucy50YXJnZXRJZCkgd2hlcmUudGFyZ2V0SWQgPSBvcHRpb25zLnRhcmdldElkXG4gIFxuICBpZiAob3B0aW9ucy5zdGFydERhdGUgfHwgb3B0aW9ucy5lbmREYXRlKSB7XG4gICAgd2hlcmUuY3JlYXRlZEF0ID0ge31cbiAgICBpZiAob3B0aW9ucy5zdGFydERhdGUpIHdoZXJlLmNyZWF0ZWRBdC5ndGUgPSBvcHRpb25zLnN0YXJ0RGF0ZVxuICAgIGlmIChvcHRpb25zLmVuZERhdGUpIHdoZXJlLmNyZWF0ZWRBdC5sdGUgPSBvcHRpb25zLmVuZERhdGVcbiAgfVxuICBcbiAgY29uc3QgW2xvZ3MsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBwcmlzbWEuYXVkaXRMb2cuZmluZE1hbnkoe1xuICAgICAgd2hlcmUsXG4gICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICB0YWtlOiBvcHRpb25zLmxpbWl0IHx8IDUwLFxuICAgICAgc2tpcDogb3B0aW9ucy5vZmZzZXQgfHwgMFxuICAgIH0pLFxuICAgIHByaXNtYS5hdWRpdExvZy5jb3VudCh7IHdoZXJlIH0pXG4gIF0pXG4gIFxuICByZXR1cm4geyBsb2dzLCB0b3RhbCB9XG59XG4iXSwibmFtZXMiOlsicHJpc21hIiwidjQiLCJ1dWlkdjQiLCJjcmVhdGVBdWRpdExvZyIsInBhcmFtcyIsImF1ZGl0TG9nIiwiY3JlYXRlIiwiZGF0YSIsImlkIiwiYWN0aW9uIiwiYWN0b3JJZCIsImFjdG9yRW1haWwiLCJ0ZW5hbnRJZCIsInRhcmdldFR5cGUiLCJ0YXJnZXRJZCIsIm1ldGFkYXRhIiwiaXBBZGRyZXNzIiwidXNlckFnZW50IiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0QXVkaXRMb2dzIiwib3B0aW9ucyIsIndoZXJlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImNyZWF0ZWRBdCIsImd0ZSIsImx0ZSIsImxvZ3MiLCJ0b3RhbCIsIlByb21pc2UiLCJhbGwiLCJmaW5kTWFueSIsIm9yZGVyQnkiLCJ0YWtlIiwibGltaXQiLCJza2lwIiwib2Zmc2V0IiwiY291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/audit.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createMagicLink: () => (/* binding */ createMagicLink),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getCurrentSession: () => (/* binding */ getCurrentSession),\n/* harmony export */   getSessionByToken: () => (/* binding */ getSessionByToken),\n/* harmony export */   isSuperAdmin: () => (/* binding */ isSuperAdmin),\n/* harmony export */   isTenantAdmin: () => (/* binding */ isTenantAdmin),\n/* harmony export */   logout: () => (/* binding */ logout),\n/* harmony export */   setSessionCookie: () => (/* binding */ setSessionCookie),\n/* harmony export */   switchTenant: () => (/* binding */ switchTenant),\n/* harmony export */   verifyMagicLink: () => (/* binding */ verifyMagicLink)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist-node/v4.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\n\n// Token expiration times\nconst MAGIC_LINK_EXPIRY_MINUTES = 15;\nconst SESSION_EXPIRY_DAYS = 7;\n/**\n * Generate a secure random token\n */ function generateToken() {\n    return (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])() + \"-\" + (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n}\n/**\n * Create a magic link for a user\n * If user doesn't exist, creates them\n */ async function createMagicLink(email, tenantId) {\n    const normalizedEmail = email.toLowerCase().trim();\n    // Find or create user\n    let user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n        where: {\n            email: normalizedEmail\n        }\n    });\n    if (!user) {\n        user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.create({\n            data: {\n                id: (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),\n                email: normalizedEmail,\n                globalRole: \"USER\"\n            }\n        });\n    }\n    // Generate token\n    const token = generateToken();\n    const expiresAt = new Date();\n    expiresAt.setMinutes(expiresAt.getMinutes() + MAGIC_LINK_EXPIRY_MINUTES);\n    // Create magic link record\n    await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.magicLink.create({\n        data: {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),\n            token,\n            userId: user.id,\n            tenantId: tenantId || null,\n            expiresAt\n        }\n    });\n    return {\n        token,\n        user\n    };\n}\n/**\n * Verify and consume a magic link\n * Returns user and creates session if valid\n */ async function verifyMagicLink(token) {\n    // Find the magic link\n    const magicLink = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.magicLink.findUnique({\n        where: {\n            token\n        },\n        include: {\n            user: true\n        }\n    });\n    if (!magicLink) {\n        return null;\n    }\n    // Check if expired\n    if (magicLink.expiresAt < new Date()) {\n        // Delete expired token\n        await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.magicLink.delete({\n            where: {\n                id: magicLink.id\n            }\n        });\n        return null;\n    }\n    // Check if already used\n    if (magicLink.usedAt) {\n        return null;\n    }\n    // Mark as used\n    await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.magicLink.update({\n        where: {\n            id: magicLink.id\n        },\n        data: {\n            usedAt: new Date()\n        }\n    });\n    // Update user's last login\n    await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.update({\n        where: {\n            id: magicLink.userId\n        },\n        data: {\n            lastLoginAt: new Date()\n        }\n    });\n    // Create session\n    const sessionToken = generateToken();\n    const sessionExpiresAt = new Date();\n    sessionExpiresAt.setDate(sessionExpiresAt.getDate() + SESSION_EXPIRY_DAYS);\n    const session = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.session.create({\n        data: {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),\n            userId: magicLink.userId,\n            token: sessionToken,\n            activeTenant: magicLink.tenantId,\n            expiresAt: sessionExpiresAt\n        }\n    });\n    // Get user with memberships\n    const user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n        where: {\n            id: magicLink.userId\n        },\n        include: {\n            memberships: {\n                where: {\n                    isActive: true\n                },\n                include: {\n                    tenant: true\n                }\n            }\n        }\n    });\n    return {\n        user: user,\n        session: {\n            id: session.id,\n            token: sessionToken\n        },\n        tenantId: magicLink.tenantId\n    };\n}\n/**\n * Get session from token\n */ async function getSessionByToken(token) {\n    const session = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.session.findUnique({\n        where: {\n            token\n        },\n        include: {\n            user: {\n                include: {\n                    memberships: {\n                        where: {\n                            isActive: true\n                        },\n                        include: {\n                            tenant: true\n                        }\n                    }\n                }\n            }\n        }\n    });\n    if (!session) {\n        return null;\n    }\n    // Check if expired\n    if (session.expiresAt < new Date()) {\n        await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.session.delete({\n            where: {\n                id: session.id\n            }\n        });\n        return null;\n    }\n    // Update last active\n    await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.session.update({\n        where: {\n            id: session.id\n        },\n        data: {\n            lastActiveAt: new Date()\n        }\n    });\n    return {\n        user: session.user,\n        sessionId: session.id,\n        activeTenantId: session.activeTenant\n    };\n}\n/**\n * Get current session from cookies\n */ async function getCurrentSession() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const sessionToken = cookieStore.get(\"session_token\")?.value;\n    if (!sessionToken) {\n        return null;\n    }\n    return getSessionByToken(sessionToken);\n}\n/**\n * Set session cookie\n */ async function setSessionCookie(token) {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    cookieStore.set(\"session_token\", token, {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\",\n        maxAge: SESSION_EXPIRY_DAYS * 24 * 60 * 60,\n        path: \"/\"\n    });\n}\n/**\n * Clear session cookie and delete session\n */ async function logout() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const sessionToken = cookieStore.get(\"session_token\")?.value;\n    if (sessionToken) {\n        // Delete session from database\n        await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.session.deleteMany({\n            where: {\n                token: sessionToken\n            }\n        });\n    }\n    // Clear cookie\n    cookieStore.delete(\"session_token\");\n}\n/**\n * Switch active tenant for a session\n */ async function switchTenant(sessionToken, tenantId) {\n    const session = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.session.findUnique({\n        where: {\n            token: sessionToken\n        },\n        include: {\n            user: {\n                include: {\n                    memberships: true\n                }\n            }\n        }\n    });\n    if (!session) return false;\n    // Check if user has access to this tenant\n    const hasMembership = session.user.memberships.some((m)=>m.tenantId === tenantId && m.isActive);\n    // Super admins can access any tenant\n    const isSuperAdmin = session.user.globalRole === \"SUPER_ADMIN\";\n    if (!hasMembership && !isSuperAdmin) {\n        return false;\n    }\n    await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.session.update({\n        where: {\n            id: session.id\n        },\n        data: {\n            activeTenant: tenantId\n        }\n    });\n    return true;\n}\n/**\n * Check if user is Super Admin\n */ function isSuperAdmin(user) {\n    return user.globalRole === \"SUPER_ADMIN\";\n}\n/**\n * Check if user is Tenant Admin for a specific tenant\n */ async function isTenantAdmin(userId, tenantId) {\n    const membership = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.tenantMembership.findUnique({\n        where: {\n            userId_tenantId: {\n                userId,\n                tenantId\n            }\n        }\n    });\n    return membership?.role === \"TENANT_ADMIN\" && membership.isActive;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YTtRQUFhO1FBQzdCTCxTQUFTO1lBQUVmLE1BQU07Z0JBQUVlLFNBQVM7b0JBQUVXLGFBQWE7Z0JBQUs7WUFBRTtRQUFFO0lBQ3REO0lBRUEsSUFBSSxDQUFDRixTQUFTLE9BQU87SUFFckIsMENBQTBDO0lBQzFDLE1BQU13QixnQkFBZ0J4QixRQUFReEIsSUFBSSxDQUFDMEIsV0FBVyxDQUFDdUIsSUFBSSxDQUNqREMsQ0FBQUEsSUFBS0EsRUFBRXRELFFBQVEsS0FBS0EsWUFBWXNELEVBQUV2QixRQUFRO0lBRzVDLHFDQUFxQztJQUNyQyxNQUFNd0IsZUFBZTNCLFFBQVF4QixJQUFJLENBQUNNLFVBQVUsS0FBSztJQUVqRCxJQUFJLENBQUMwQyxpQkFBaUIsQ0FBQ0csY0FBYztRQUNuQyxPQUFPO0lBQ1Q7SUFFQSxNQUFNaEUsMkNBQU1BLENBQUNxQyxPQUFPLENBQUNOLE1BQU0sQ0FBQztRQUMxQmhCLE9BQU87WUFBRUcsSUFBSW1CLFFBQVFuQixFQUFFO1FBQUM7UUFDeEJELE1BQU07WUFBRXFCLGNBQWM3QjtRQUFTO0lBQ2pDO0lBRUEsT0FBTztBQUNUO0FBRUE7O0NBRUMsR0FDTSxTQUFTdUQsYUFBYW5ELElBQVU7SUFDckMsT0FBT0EsS0FBS00sVUFBVSxLQUFLO0FBQzdCO0FBRUE7O0NBRUMsR0FDTSxlQUFlOEMsY0FBY3ZDLE1BQWMsRUFBRWpCLFFBQWdCO0lBQ2xFLE1BQU15RCxhQUFhLE1BQU1sRSwyQ0FBTUEsQ0FBQ21FLGdCQUFnQixDQUFDckQsVUFBVSxDQUFDO1FBQzFEQyxPQUFPO1lBQ0xxRCxpQkFBaUI7Z0JBQUUxQztnQkFBUWpCO1lBQVM7UUFDdEM7SUFDRjtJQUVBLE9BQU95RCxZQUFZRyxTQUFTLGtCQUFrQkgsV0FBVzFCLFFBQVE7QUFDbkUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYWFzLWNvcmUvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuL3ByaXNtYSdcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJ1xuaW1wb3J0IHsgVXNlciwgR2xvYmFsUm9sZSwgVGVuYW50Um9sZSwgVGVuYW50LCBUZW5hbnRNZW1iZXJzaGlwIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbi8vIFRva2VuIGV4cGlyYXRpb24gdGltZXNcbmNvbnN0IE1BR0lDX0xJTktfRVhQSVJZX01JTlVURVMgPSAxNVxuY29uc3QgU0VTU0lPTl9FWFBJUllfREFZUyA9IDdcblxuLy8gVHlwZXNcbmV4cG9ydCB0eXBlIFNlc3Npb25Vc2VyID0gVXNlciAmIHtcbiAgbWVtYmVyc2hpcHM6IChUZW5hbnRNZW1iZXJzaGlwICYge1xuICAgIHRlbmFudDogVGVuYW50XG4gIH0pW11cbn1cblxuZXhwb3J0IHR5cGUgQXV0aFNlc3Npb24gPSB7XG4gIHVzZXI6IFNlc3Npb25Vc2VyXG4gIHNlc3Npb25JZDogc3RyaW5nXG4gIGFjdGl2ZVRlbmFudElkOiBzdHJpbmcgfCBudWxsXG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBzZWN1cmUgcmFuZG9tIHRva2VuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRva2VuKCk6IHN0cmluZyB7XG4gIHJldHVybiB1dWlkdjQoKSArICctJyArIHV1aWR2NCgpXG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbWFnaWMgbGluayBmb3IgYSB1c2VyXG4gKiBJZiB1c2VyIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZXMgdGhlbVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTWFnaWNMaW5rKGVtYWlsOiBzdHJpbmcsIHRlbmFudElkPzogc3RyaW5nKTogUHJvbWlzZTx7IHRva2VuOiBzdHJpbmc7IHVzZXI6IFVzZXIgfT4ge1xuICBjb25zdCBub3JtYWxpemVkRW1haWwgPSBlbWFpbC50b0xvd2VyQ2FzZSgpLnRyaW0oKVxuICBcbiAgLy8gRmluZCBvciBjcmVhdGUgdXNlclxuICBsZXQgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGVtYWlsOiBub3JtYWxpemVkRW1haWwgfVxuICB9KVxuICBcbiAgaWYgKCF1c2VyKSB7XG4gICAgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgZW1haWw6IG5vcm1hbGl6ZWRFbWFpbCxcbiAgICAgICAgZ2xvYmFsUm9sZTogJ1VTRVInXG4gICAgICB9XG4gICAgfSlcbiAgfVxuICBcbiAgLy8gR2VuZXJhdGUgdG9rZW5cbiAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKClcbiAgY29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUoKVxuICBleHBpcmVzQXQuc2V0TWludXRlcyhleHBpcmVzQXQuZ2V0TWludXRlcygpICsgTUFHSUNfTElOS19FWFBJUllfTUlOVVRFUylcbiAgXG4gIC8vIENyZWF0ZSBtYWdpYyBsaW5rIHJlY29yZFxuICBhd2FpdCBwcmlzbWEubWFnaWNMaW5rLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgdG9rZW4sXG4gICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICB0ZW5hbnRJZDogdGVuYW50SWQgfHwgbnVsbCxcbiAgICAgIGV4cGlyZXNBdFxuICAgIH1cbiAgfSlcbiAgXG4gIHJldHVybiB7IHRva2VuLCB1c2VyIH1cbn1cblxuLyoqXG4gKiBWZXJpZnkgYW5kIGNvbnN1bWUgYSBtYWdpYyBsaW5rXG4gKiBSZXR1cm5zIHVzZXIgYW5kIGNyZWF0ZXMgc2Vzc2lvbiBpZiB2YWxpZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5TWFnaWNMaW5rKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPHsgdXNlcjogU2Vzc2lvblVzZXI7IHNlc3Npb246IHsgaWQ6IHN0cmluZzsgdG9rZW46IHN0cmluZyB9OyB0ZW5hbnRJZDogc3RyaW5nIHwgbnVsbCB9IHwgbnVsbD4ge1xuICAvLyBGaW5kIHRoZSBtYWdpYyBsaW5rXG4gIGNvbnN0IG1hZ2ljTGluayA9IGF3YWl0IHByaXNtYS5tYWdpY0xpbmsuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgdG9rZW4gfSxcbiAgICBpbmNsdWRlOiB7IHVzZXI6IHRydWUgfVxuICB9KVxuICBcbiAgaWYgKCFtYWdpY0xpbmspIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICAvLyBDaGVjayBpZiBleHBpcmVkXG4gIGlmIChtYWdpY0xpbmsuZXhwaXJlc0F0IDwgbmV3IERhdGUoKSkge1xuICAgIC8vIERlbGV0ZSBleHBpcmVkIHRva2VuXG4gICAgYXdhaXQgcHJpc21hLm1hZ2ljTGluay5kZWxldGUoeyB3aGVyZTogeyBpZDogbWFnaWNMaW5rLmlkIH0gfSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICAvLyBDaGVjayBpZiBhbHJlYWR5IHVzZWRcbiAgaWYgKG1hZ2ljTGluay51c2VkQXQpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICAvLyBNYXJrIGFzIHVzZWRcbiAgYXdhaXQgcHJpc21hLm1hZ2ljTGluay51cGRhdGUoe1xuICAgIHdoZXJlOiB7IGlkOiBtYWdpY0xpbmsuaWQgfSxcbiAgICBkYXRhOiB7IHVzZWRBdDogbmV3IERhdGUoKSB9XG4gIH0pXG4gIFxuICAvLyBVcGRhdGUgdXNlcidzIGxhc3QgbG9naW5cbiAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogbWFnaWNMaW5rLnVzZXJJZCB9LFxuICAgIGRhdGE6IHsgbGFzdExvZ2luQXQ6IG5ldyBEYXRlKCkgfVxuICB9KVxuICBcbiAgLy8gQ3JlYXRlIHNlc3Npb25cbiAgY29uc3Qgc2Vzc2lvblRva2VuID0gZ2VuZXJhdGVUb2tlbigpXG4gIGNvbnN0IHNlc3Npb25FeHBpcmVzQXQgPSBuZXcgRGF0ZSgpXG4gIHNlc3Npb25FeHBpcmVzQXQuc2V0RGF0ZShzZXNzaW9uRXhwaXJlc0F0LmdldERhdGUoKSArIFNFU1NJT05fRVhQSVJZX0RBWVMpXG4gIFxuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgcHJpc21hLnNlc3Npb24uY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBpZDogdXVpZHY0KCksXG4gICAgICB1c2VySWQ6IG1hZ2ljTGluay51c2VySWQsXG4gICAgICB0b2tlbjogc2Vzc2lvblRva2VuLFxuICAgICAgYWN0aXZlVGVuYW50OiBtYWdpY0xpbmsudGVuYW50SWQsXG4gICAgICBleHBpcmVzQXQ6IHNlc3Npb25FeHBpcmVzQXRcbiAgICB9XG4gIH0pXG4gIFxuICAvLyBHZXQgdXNlciB3aXRoIG1lbWJlcnNoaXBzXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogbWFnaWNMaW5rLnVzZXJJZCB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIG1lbWJlcnNoaXBzOiB7XG4gICAgICAgIHdoZXJlOiB7IGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICAgIGluY2x1ZGU6IHsgdGVuYW50OiB0cnVlIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIFxuICByZXR1cm4ge1xuICAgIHVzZXI6IHVzZXIgYXMgU2Vzc2lvblVzZXIsXG4gICAgc2Vzc2lvbjogeyBpZDogc2Vzc2lvbi5pZCwgdG9rZW46IHNlc3Npb25Ub2tlbiB9LFxuICAgIHRlbmFudElkOiBtYWdpY0xpbmsudGVuYW50SWRcbiAgfVxufVxuXG4vKipcbiAqIEdldCBzZXNzaW9uIGZyb20gdG9rZW5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb25CeVRva2VuKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEF1dGhTZXNzaW9uIHwgbnVsbD4ge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgcHJpc21hLnNlc3Npb24uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgdG9rZW4gfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2VyOiB7XG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBtZW1iZXJzaGlwczoge1xuICAgICAgICAgICAgd2hlcmU6IHsgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgICAgICAgIGluY2x1ZGU6IHsgdGVuYW50OiB0cnVlIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIFxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICAvLyBDaGVjayBpZiBleHBpcmVkXG4gIGlmIChzZXNzaW9uLmV4cGlyZXNBdCA8IG5ldyBEYXRlKCkpIHtcbiAgICBhd2FpdCBwcmlzbWEuc2Vzc2lvbi5kZWxldGUoeyB3aGVyZTogeyBpZDogc2Vzc2lvbi5pZCB9IH0pXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBcbiAgLy8gVXBkYXRlIGxhc3QgYWN0aXZlXG4gIGF3YWl0IHByaXNtYS5zZXNzaW9uLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHNlc3Npb24uaWQgfSxcbiAgICBkYXRhOiB7IGxhc3RBY3RpdmVBdDogbmV3IERhdGUoKSB9XG4gIH0pXG4gIFxuICByZXR1cm4ge1xuICAgIHVzZXI6IHNlc3Npb24udXNlciBhcyBTZXNzaW9uVXNlcixcbiAgICBzZXNzaW9uSWQ6IHNlc3Npb24uaWQsXG4gICAgYWN0aXZlVGVuYW50SWQ6IHNlc3Npb24uYWN0aXZlVGVuYW50XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgY3VycmVudCBzZXNzaW9uIGZyb20gY29va2llc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFNlc3Npb24oKTogUHJvbWlzZTxBdXRoU2Vzc2lvbiB8IG51bGw+IHtcbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKClcbiAgY29uc3Qgc2Vzc2lvblRva2VuID0gY29va2llU3RvcmUuZ2V0KCdzZXNzaW9uX3Rva2VuJyk/LnZhbHVlXG4gIFxuICBpZiAoIXNlc3Npb25Ub2tlbikge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgXG4gIHJldHVybiBnZXRTZXNzaW9uQnlUb2tlbihzZXNzaW9uVG9rZW4pXG59XG5cbi8qKlxuICogU2V0IHNlc3Npb24gY29va2llXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRTZXNzaW9uQ29va2llKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKClcbiAgY29va2llU3RvcmUuc2V0KCdzZXNzaW9uX3Rva2VuJywgdG9rZW4sIHtcbiAgICBodHRwT25seTogdHJ1ZSxcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgIG1heEFnZTogU0VTU0lPTl9FWFBJUllfREFZUyAqIDI0ICogNjAgKiA2MCwgLy8gZGF5cyB0byBzZWNvbmRzXG4gICAgcGF0aDogJy8nXG4gIH0pXG59XG5cbi8qKlxuICogQ2xlYXIgc2Vzc2lvbiBjb29raWUgYW5kIGRlbGV0ZSBzZXNzaW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dvdXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpXG4gIGNvbnN0IHNlc3Npb25Ub2tlbiA9IGNvb2tpZVN0b3JlLmdldCgnc2Vzc2lvbl90b2tlbicpPy52YWx1ZVxuICBcbiAgaWYgKHNlc3Npb25Ub2tlbikge1xuICAgIC8vIERlbGV0ZSBzZXNzaW9uIGZyb20gZGF0YWJhc2VcbiAgICBhd2FpdCBwcmlzbWEuc2Vzc2lvbi5kZWxldGVNYW55KHtcbiAgICAgIHdoZXJlOiB7IHRva2VuOiBzZXNzaW9uVG9rZW4gfVxuICAgIH0pXG4gIH1cbiAgXG4gIC8vIENsZWFyIGNvb2tpZVxuICBjb29raWVTdG9yZS5kZWxldGUoJ3Nlc3Npb25fdG9rZW4nKVxufVxuXG4vKipcbiAqIFN3aXRjaCBhY3RpdmUgdGVuYW50IGZvciBhIHNlc3Npb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN3aXRjaFRlbmFudChzZXNzaW9uVG9rZW46IHN0cmluZywgdGVuYW50SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgcHJpc21hLnNlc3Npb24uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgdG9rZW46IHNlc3Npb25Ub2tlbiB9LFxuICAgIGluY2x1ZGU6IHsgdXNlcjogeyBpbmNsdWRlOiB7IG1lbWJlcnNoaXBzOiB0cnVlIH0gfSB9XG4gIH0pXG4gIFxuICBpZiAoIXNlc3Npb24pIHJldHVybiBmYWxzZVxuICBcbiAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgYWNjZXNzIHRvIHRoaXMgdGVuYW50XG4gIGNvbnN0IGhhc01lbWJlcnNoaXAgPSBzZXNzaW9uLnVzZXIubWVtYmVyc2hpcHMuc29tZShcbiAgICBtID0+IG0udGVuYW50SWQgPT09IHRlbmFudElkICYmIG0uaXNBY3RpdmVcbiAgKVxuICBcbiAgLy8gU3VwZXIgYWRtaW5zIGNhbiBhY2Nlc3MgYW55IHRlbmFudFxuICBjb25zdCBpc1N1cGVyQWRtaW4gPSBzZXNzaW9uLnVzZXIuZ2xvYmFsUm9sZSA9PT0gJ1NVUEVSX0FETUlOJ1xuICBcbiAgaWYgKCFoYXNNZW1iZXJzaGlwICYmICFpc1N1cGVyQWRtaW4pIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgYXdhaXQgcHJpc21hLnNlc3Npb24udXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogc2Vzc2lvbi5pZCB9LFxuICAgIGRhdGE6IHsgYWN0aXZlVGVuYW50OiB0ZW5hbnRJZCB9XG4gIH0pXG4gIFxuICByZXR1cm4gdHJ1ZVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHVzZXIgaXMgU3VwZXIgQWRtaW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3VwZXJBZG1pbih1c2VyOiBVc2VyKTogYm9vbGVhbiB7XG4gIHJldHVybiB1c2VyLmdsb2JhbFJvbGUgPT09ICdTVVBFUl9BRE1JTidcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB1c2VyIGlzIFRlbmFudCBBZG1pbiBmb3IgYSBzcGVjaWZpYyB0ZW5hbnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzVGVuYW50QWRtaW4odXNlcklkOiBzdHJpbmcsIHRlbmFudElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgbWVtYmVyc2hpcCA9IGF3YWl0IHByaXNtYS50ZW5hbnRNZW1iZXJzaGlwLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICB1c2VySWRfdGVuYW50SWQ6IHsgdXNlcklkLCB0ZW5hbnRJZCB9XG4gICAgfVxuICB9KVxuICBcbiAgcmV0dXJuIG1lbWJlcnNoaXA/LnJvbGUgPT09ICdURU5BTlRfQURNSU4nICYmIG1lbWJlcnNoaXAuaXNBY3RpdmVcbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJ2NCIsInV1aWR2NCIsImNvb2tpZXMiLCJNQUdJQ19MSU5LX0VYUElSWV9NSU5VVEVTIiwiU0VTU0lPTl9FWFBJUllfREFZUyIsImdlbmVyYXRlVG9rZW4iLCJjcmVhdGVNYWdpY0xpbmsiLCJlbWFpbCIsInRlbmFudElkIiwibm9ybWFsaXplZEVtYWlsIiwidG9Mb3dlckNhc2UiLCJ0cmltIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImNyZWF0ZSIsImRhdGEiLCJpZCIsImdsb2JhbFJvbGUiLCJ0b2tlbiIsImV4cGlyZXNBdCIsIkRhdGUiLCJzZXRNaW51dGVzIiwiZ2V0TWludXRlcyIsIm1hZ2ljTGluayIsInVzZXJJZCIsInZlcmlmeU1hZ2ljTGluayIsImluY2x1ZGUiLCJkZWxldGUiLCJ1c2VkQXQiLCJ1cGRhdGUiLCJsYXN0TG9naW5BdCIsInNlc3Npb25Ub2tlbiIsInNlc3Npb25FeHBpcmVzQXQiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInNlc3Npb24iLCJhY3RpdmVUZW5hbnQiLCJtZW1iZXJzaGlwcyIsImlzQWN0aXZlIiwidGVuYW50IiwiZ2V0U2Vzc2lvbkJ5VG9rZW4iLCJsYXN0QWN0aXZlQXQiLCJzZXNzaW9uSWQiLCJhY3RpdmVUZW5hbnRJZCIsImdldEN1cnJlbnRTZXNzaW9uIiwiY29va2llU3RvcmUiLCJnZXQiLCJ2YWx1ZSIsInNldFNlc3Npb25Db29raWUiLCJzZXQiLCJodHRwT25seSIsInNlY3VyZSIsInByb2Nlc3MiLCJzYW1lU2l0ZSIsIm1heEFnZSIsInBhdGgiLCJsb2dvdXQiLCJkZWxldGVNYW55Iiwic3dpdGNoVGVuYW50IiwiaGFzTWVtYmVyc2hpcCIsInNvbWUiLCJtIiwiaXNTdXBlckFkbWluIiwiaXNUZW5hbnRBZG1pbiIsIm1lbWJlcnNoaXAiLCJ0ZW5hbnRNZW1iZXJzaGlwIiwidXNlcklkX3RlbmFudElkIiwicm9sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/authorization.ts":
/*!**********************************!*\
  !*** ./src/lib/authorization.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canAccessTenant: () => (/* binding */ canAccessTenant),\n/* harmony export */   getTenantRole: () => (/* binding */ getTenantRole),\n/* harmony export */   isSuperAdmin: () => (/* binding */ isSuperAdmin),\n/* harmony export */   isTenantAdmin: () => (/* binding */ isTenantAdmin),\n/* harmony export */   isTenantMember: () => (/* binding */ isTenantMember),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   requireSuperAdmin: () => (/* binding */ requireSuperAdmin),\n/* harmony export */   requireTenantAdmin: () => (/* binding */ requireTenantAdmin),\n/* harmony export */   requireTenantMember: () => (/* binding */ requireTenantMember)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth */ \"(rsc)/./src/lib/auth.ts\");\n\n\n/**\n * Check if user is a Super Admin\n */ function isSuperAdmin(user) {\n    return user.globalRole === \"SUPER_ADMIN\";\n}\n/**\n * Check if user is a Tenant Admin for a specific tenant\n */ function isTenantAdmin(user, tenantId) {\n    const membership = user.memberships.find((m)=>m.tenantId === tenantId);\n    return membership?.role === \"TENANT_ADMIN\" && membership.isActive;\n}\n/**\n * Check if user is a member of a specific tenant\n */ function isTenantMember(user, tenantId) {\n    const membership = user.memberships.find((m)=>m.tenantId === tenantId);\n    return !!membership && membership.isActive;\n}\n/**\n * Get user's role in a specific tenant\n */ function getTenantRole(user, tenantId) {\n    const membership = user.memberships.find((m)=>m.tenantId === tenantId && m.isActive);\n    return membership?.role || null;\n}\n/**\n * Require authentication (any logged-in user)\n */ async function requireAuth() {\n    const session = await (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getCurrentSession)();\n    if (!session) {\n        return {\n            authorized: false,\n            error: \"Authentication required\",\n            status: 401\n        };\n    }\n    if (!session.user.isActive) {\n        return {\n            authorized: false,\n            error: \"Account is deactivated\",\n            status: 403\n        };\n    }\n    return {\n        authorized: true,\n        user: session.user,\n        session\n    };\n}\n/**\n * Require Super Admin role\n * Used for /admin routes\n */ async function requireSuperAdmin() {\n    const authResult = await requireAuth();\n    if (!authResult.authorized) {\n        return authResult;\n    }\n    if (!isSuperAdmin(authResult.user)) {\n        return {\n            authorized: false,\n            error: \"Super Admin access required\",\n            status: 403\n        };\n    }\n    return authResult;\n}\n/**\n * Require Tenant Admin role for a specific tenant\n */ async function requireTenantAdmin(tenantId) {\n    const authResult = await requireAuth();\n    if (!authResult.authorized) {\n        return authResult;\n    }\n    // Super Admin can access any tenant\n    if (isSuperAdmin(authResult.user)) {\n        return authResult;\n    }\n    // Check tenant admin role\n    if (!isTenantAdmin(authResult.user, tenantId)) {\n        return {\n            authorized: false,\n            error: \"Tenant Admin access required\",\n            status: 403\n        };\n    }\n    return authResult;\n}\n/**\n * Require membership in a specific tenant\n */ async function requireTenantMember(tenantId) {\n    const authResult = await requireAuth();\n    if (!authResult.authorized) {\n        return authResult;\n    }\n    // Super Admin can access any tenant\n    if (isSuperAdmin(authResult.user)) {\n        return authResult;\n    }\n    // Check tenant membership\n    if (!isTenantMember(authResult.user, tenantId)) {\n        return {\n            authorized: false,\n            error: \"Tenant membership required\",\n            status: 403\n        };\n    }\n    return authResult;\n}\n/**\n * Check if current user can access a tenant\n * Super Admins can access any tenant\n * Regular users need membership\n */ async function canAccessTenant(userId, tenantId) {\n    const user = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n        where: {\n            id: userId\n        },\n        include: {\n            memberships: true\n        }\n    });\n    if (!user) return false;\n    // Super Admin can access any tenant\n    if (user.globalRole === \"SUPER_ADMIN\") return true;\n    // Check membership\n    return user.memberships.some((m)=>m.tenantId === tenantId && m.isActive);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGhvcml6YXRpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDaUM7QUFDc0I7QUFRdkQ7O0NBRUMsR0FDTSxTQUFTRSxhQUFhQyxJQUFnQztJQUMzRCxPQUFPQSxLQUFLQyxVQUFVLEtBQUs7QUFDN0I7QUFFQTs7Q0FFQyxHQUNNLFNBQVNDLGNBQ2RGLElBQXlCLEVBQ3pCRyxRQUFnQjtJQUVoQixNQUFNQyxhQUFhSixLQUFLSyxXQUFXLENBQUNDLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUosUUFBUSxLQUFLQTtJQUM3RCxPQUFPQyxZQUFZSSxTQUFTLGtCQUFrQkosV0FBV0ssUUFBUTtBQUNuRTtBQUVBOztDQUVDLEdBQ00sU0FBU0MsZUFDZFYsSUFBeUIsRUFDekJHLFFBQWdCO0lBRWhCLE1BQU1DLGFBQWFKLEtBQUtLLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFSixRQUFRLEtBQUtBO0lBQzdELE9BQU8sQ0FBQyxDQUFDQyxjQUFjQSxXQUFXSyxRQUFRO0FBQzVDO0FBRUE7O0NBRUMsR0FDTSxTQUFTRSxjQUNkWCxJQUF5QixFQUN6QkcsUUFBZ0I7SUFFaEIsTUFBTUMsYUFBYUosS0FBS0ssV0FBVyxDQUFDQyxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVKLFFBQVEsS0FBS0EsWUFBWUksRUFBRUUsUUFBUTtJQUNuRixPQUFPTCxZQUFZSSxRQUFRO0FBQzdCO0FBU0E7O0NBRUMsR0FDTSxlQUFlSTtJQUNwQixNQUFNQyxVQUFVLE1BQU1mLHdEQUFpQkE7SUFFdkMsSUFBSSxDQUFDZSxTQUFTO1FBQ1osT0FBTztZQUNMQyxZQUFZO1lBQ1pDLE9BQU87WUFDUEMsUUFBUTtRQUNWO0lBQ0Y7SUFFQSxJQUFJLENBQUNILFFBQVFiLElBQUksQ0FBQ1MsUUFBUSxFQUFFO1FBQzFCLE9BQU87WUFDTEssWUFBWTtZQUNaQyxPQUFPO1lBQ1BDLFFBQVE7UUFDVjtJQUNGO0lBRUEsT0FBTztRQUNMRixZQUFZO1FBQ1pkLE1BQU1hLFFBQVFiLElBQUk7UUFDbEJhO0lBQ0Y7QUFDRjtBQUVBOzs7Q0FHQyxHQUNNLGVBQWVJO0lBQ3BCLE1BQU1DLGFBQWEsTUFBTU47SUFFekIsSUFBSSxDQUFDTSxXQUFXSixVQUFVLEVBQUU7UUFDMUIsT0FBT0k7SUFDVDtJQUVBLElBQUksQ0FBQ25CLGFBQWFtQixXQUFXbEIsSUFBSSxHQUFHO1FBQ2xDLE9BQU87WUFDTGMsWUFBWTtZQUNaQyxPQUFPO1lBQ1BDLFFBQVE7UUFDVjtJQUNGO0lBRUEsT0FBT0U7QUFDVDtBQUVBOztDQUVDLEdBQ00sZUFBZUMsbUJBQW1CaEIsUUFBZ0I7SUFDdkQsTUFBTWUsYUFBYSxNQUFNTjtJQUV6QixJQUFJLENBQUNNLFdBQVdKLFVBQVUsRUFBRTtRQUMxQixPQUFPSTtJQUNUO0lBRUEsb0NBQW9DO0lBQ3BDLElBQUluQixhQUFhbUIsV0FBV2xCLElBQUksR0FBRztRQUNqQyxPQUFPa0I7SUFDVDtJQUVBLDBCQUEwQjtJQUMxQixJQUFJLENBQUNoQixjQUFjZ0IsV0FBV2xCLElBQUksRUFBRUcsV0FBVztRQUM3QyxPQUFPO1lBQ0xXLFlBQVk7WUFDWkMsT0FBTztZQUNQQyxRQUFRO1FBQ1Y7SUFDRjtJQUVBLE9BQU9FO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNNLGVBQWVFLG9CQUFvQmpCLFFBQWdCO0lBQ3hELE1BQU1lLGFBQWEsTUFBTU47SUFFekIsSUFBSSxDQUFDTSxXQUFXSixVQUFVLEVBQUU7UUFDMUIsT0FBT0k7SUFDVDtJQUVBLG9DQUFvQztJQUNwQyxJQUFJbkIsYUFBYW1CLFdBQVdsQixJQUFJLEdBQUc7UUFDakMsT0FBT2tCO0lBQ1Q7SUFFQSwwQkFBMEI7SUFDMUIsSUFBSSxDQUFDUixlQUFlUSxXQUFXbEIsSUFBSSxFQUFFRyxXQUFXO1FBQzlDLE9BQU87WUFDTFcsWUFBWTtZQUNaQyxPQUFPO1lBQ1BDLFFBQVE7UUFDVjtJQUNGO0lBRUEsT0FBT0U7QUFDVDtBQUVBOzs7O0NBSUMsR0FDTSxlQUFlRyxnQkFDcEJDLE1BQWMsRUFDZG5CLFFBQWdCO0lBRWhCLE1BQU1ILE9BQU8sTUFBTUgsMkNBQU1BLENBQUNHLElBQUksQ0FBQ3VCLFVBQVUsQ0FBQztRQUN4Q0MsT0FBTztZQUFFQyxJQUFJSDtRQUFPO1FBQ3BCSSxTQUFTO1lBQUVyQixhQUFhO1FBQUs7SUFDL0I7SUFFQSxJQUFJLENBQUNMLE1BQU0sT0FBTztJQUVsQixvQ0FBb0M7SUFDcEMsSUFBSUEsS0FBS0MsVUFBVSxLQUFLLGVBQWUsT0FBTztJQUU5QyxtQkFBbUI7SUFDbkIsT0FBT0QsS0FBS0ssV0FBVyxDQUFDc0IsSUFBSSxDQUMxQnBCLENBQUFBLElBQUtBLEVBQUVKLFFBQVEsS0FBS0EsWUFBWUksRUFBRUUsUUFBUTtBQUU5QyIsInNvdXJjZXMiOlsid2VicGFjazovL3NhYXMtY29yZS8uL3NyYy9saWIvYXV0aG9yaXphdGlvbi50cz8zNWE0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVzZXIsIEdsb2JhbFJvbGUsIFRlbmFudFJvbGUsIFRlbmFudE1lbWJlcnNoaXAsIFRlbmFudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnLi9wcmlzbWEnXG5pbXBvcnQgeyBnZXRDdXJyZW50U2Vzc2lvbiwgQXV0aFNlc3Npb24gfSBmcm9tICcuL2F1dGgnXG5cbmV4cG9ydCB0eXBlIFVzZXJXaXRoTWVtYmVyc2hpcHMgPSBVc2VyICYge1xuICBtZW1iZXJzaGlwczogKFRlbmFudE1lbWJlcnNoaXAgJiB7XG4gICAgdGVuYW50OiBUZW5hbnRcbiAgfSlbXVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHVzZXIgaXMgYSBTdXBlciBBZG1pblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdXBlckFkbWluKHVzZXI6IFVzZXIgfCBVc2VyV2l0aE1lbWJlcnNoaXBzKTogYm9vbGVhbiB7XG4gIHJldHVybiB1c2VyLmdsb2JhbFJvbGUgPT09ICdTVVBFUl9BRE1JTidcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB1c2VyIGlzIGEgVGVuYW50IEFkbWluIGZvciBhIHNwZWNpZmljIHRlbmFudFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUZW5hbnRBZG1pbihcbiAgdXNlcjogVXNlcldpdGhNZW1iZXJzaGlwcyxcbiAgdGVuYW50SWQ6IHN0cmluZ1xuKTogYm9vbGVhbiB7XG4gIGNvbnN0IG1lbWJlcnNoaXAgPSB1c2VyLm1lbWJlcnNoaXBzLmZpbmQobSA9PiBtLnRlbmFudElkID09PSB0ZW5hbnRJZClcbiAgcmV0dXJuIG1lbWJlcnNoaXA/LnJvbGUgPT09ICdURU5BTlRfQURNSU4nICYmIG1lbWJlcnNoaXAuaXNBY3RpdmVcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB1c2VyIGlzIGEgbWVtYmVyIG9mIGEgc3BlY2lmaWMgdGVuYW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1RlbmFudE1lbWJlcihcbiAgdXNlcjogVXNlcldpdGhNZW1iZXJzaGlwcyxcbiAgdGVuYW50SWQ6IHN0cmluZ1xuKTogYm9vbGVhbiB7XG4gIGNvbnN0IG1lbWJlcnNoaXAgPSB1c2VyLm1lbWJlcnNoaXBzLmZpbmQobSA9PiBtLnRlbmFudElkID09PSB0ZW5hbnRJZClcbiAgcmV0dXJuICEhbWVtYmVyc2hpcCAmJiBtZW1iZXJzaGlwLmlzQWN0aXZlXG59XG5cbi8qKlxuICogR2V0IHVzZXIncyByb2xlIGluIGEgc3BlY2lmaWMgdGVuYW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZW5hbnRSb2xlKFxuICB1c2VyOiBVc2VyV2l0aE1lbWJlcnNoaXBzLFxuICB0ZW5hbnRJZDogc3RyaW5nXG4pOiBUZW5hbnRSb2xlIHwgbnVsbCB7XG4gIGNvbnN0IG1lbWJlcnNoaXAgPSB1c2VyLm1lbWJlcnNoaXBzLmZpbmQobSA9PiBtLnRlbmFudElkID09PSB0ZW5hbnRJZCAmJiBtLmlzQWN0aXZlKVxuICByZXR1cm4gbWVtYmVyc2hpcD8ucm9sZSB8fCBudWxsXG59XG5cbi8qKlxuICogQXV0aG9yaXphdGlvbiByZXN1bHQgdHlwZVxuICovXG5leHBvcnQgdHlwZSBBdXRob3JpemF0aW9uUmVzdWx0ID0gXG4gIHwgeyBhdXRob3JpemVkOiB0cnVlOyB1c2VyOiBVc2VyV2l0aE1lbWJlcnNoaXBzOyBzZXNzaW9uOiBBdXRoU2Vzc2lvbiB9XG4gIHwgeyBhdXRob3JpemVkOiBmYWxzZTsgZXJyb3I6IHN0cmluZzsgc3RhdHVzOiBudW1iZXIgfVxuXG4vKipcbiAqIFJlcXVpcmUgYXV0aGVudGljYXRpb24gKGFueSBsb2dnZWQtaW4gdXNlcilcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKCk6IFByb21pc2U8QXV0aG9yaXphdGlvblJlc3VsdD4ge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0Q3VycmVudFNlc3Npb24oKVxuICBcbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF1dGhvcml6ZWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcsXG4gICAgICBzdGF0dXM6IDQwMVxuICAgIH1cbiAgfVxuICBcbiAgaWYgKCFzZXNzaW9uLnVzZXIuaXNBY3RpdmUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXV0aG9yaXplZDogZmFsc2UsXG4gICAgICBlcnJvcjogJ0FjY291bnQgaXMgZGVhY3RpdmF0ZWQnLFxuICAgICAgc3RhdHVzOiA0MDNcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgYXV0aG9yaXplZDogdHJ1ZSxcbiAgICB1c2VyOiBzZXNzaW9uLnVzZXIgYXMgVXNlcldpdGhNZW1iZXJzaGlwcyxcbiAgICBzZXNzaW9uXG4gIH1cbn1cblxuLyoqXG4gKiBSZXF1aXJlIFN1cGVyIEFkbWluIHJvbGVcbiAqIFVzZWQgZm9yIC9hZG1pbiByb3V0ZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVTdXBlckFkbWluKCk6IFByb21pc2U8QXV0aG9yaXphdGlvblJlc3VsdD4ge1xuICBjb25zdCBhdXRoUmVzdWx0ID0gYXdhaXQgcmVxdWlyZUF1dGgoKVxuICBcbiAgaWYgKCFhdXRoUmVzdWx0LmF1dGhvcml6ZWQpIHtcbiAgICByZXR1cm4gYXV0aFJlc3VsdFxuICB9XG4gIFxuICBpZiAoIWlzU3VwZXJBZG1pbihhdXRoUmVzdWx0LnVzZXIpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF1dGhvcml6ZWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdTdXBlciBBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnLFxuICAgICAgc3RhdHVzOiA0MDNcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBhdXRoUmVzdWx0XG59XG5cbi8qKlxuICogUmVxdWlyZSBUZW5hbnQgQWRtaW4gcm9sZSBmb3IgYSBzcGVjaWZpYyB0ZW5hbnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVUZW5hbnRBZG1pbih0ZW5hbnRJZDogc3RyaW5nKTogUHJvbWlzZTxBdXRob3JpemF0aW9uUmVzdWx0PiB7XG4gIGNvbnN0IGF1dGhSZXN1bHQgPSBhd2FpdCByZXF1aXJlQXV0aCgpXG4gIFxuICBpZiAoIWF1dGhSZXN1bHQuYXV0aG9yaXplZCkge1xuICAgIHJldHVybiBhdXRoUmVzdWx0XG4gIH1cbiAgXG4gIC8vIFN1cGVyIEFkbWluIGNhbiBhY2Nlc3MgYW55IHRlbmFudFxuICBpZiAoaXNTdXBlckFkbWluKGF1dGhSZXN1bHQudXNlcikpIHtcbiAgICByZXR1cm4gYXV0aFJlc3VsdFxuICB9XG4gIFxuICAvLyBDaGVjayB0ZW5hbnQgYWRtaW4gcm9sZVxuICBpZiAoIWlzVGVuYW50QWRtaW4oYXV0aFJlc3VsdC51c2VyLCB0ZW5hbnRJZCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXV0aG9yaXplZDogZmFsc2UsXG4gICAgICBlcnJvcjogJ1RlbmFudCBBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnLFxuICAgICAgc3RhdHVzOiA0MDNcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBhdXRoUmVzdWx0XG59XG5cbi8qKlxuICogUmVxdWlyZSBtZW1iZXJzaGlwIGluIGEgc3BlY2lmaWMgdGVuYW50XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlVGVuYW50TWVtYmVyKHRlbmFudElkOiBzdHJpbmcpOiBQcm9taXNlPEF1dGhvcml6YXRpb25SZXN1bHQ+IHtcbiAgY29uc3QgYXV0aFJlc3VsdCA9IGF3YWl0IHJlcXVpcmVBdXRoKClcbiAgXG4gIGlmICghYXV0aFJlc3VsdC5hdXRob3JpemVkKSB7XG4gICAgcmV0dXJuIGF1dGhSZXN1bHRcbiAgfVxuICBcbiAgLy8gU3VwZXIgQWRtaW4gY2FuIGFjY2VzcyBhbnkgdGVuYW50XG4gIGlmIChpc1N1cGVyQWRtaW4oYXV0aFJlc3VsdC51c2VyKSkge1xuICAgIHJldHVybiBhdXRoUmVzdWx0XG4gIH1cbiAgXG4gIC8vIENoZWNrIHRlbmFudCBtZW1iZXJzaGlwXG4gIGlmICghaXNUZW5hbnRNZW1iZXIoYXV0aFJlc3VsdC51c2VyLCB0ZW5hbnRJZCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXV0aG9yaXplZDogZmFsc2UsXG4gICAgICBlcnJvcjogJ1RlbmFudCBtZW1iZXJzaGlwIHJlcXVpcmVkJyxcbiAgICAgIHN0YXR1czogNDAzXG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gYXV0aFJlc3VsdFxufVxuXG4vKipcbiAqIENoZWNrIGlmIGN1cnJlbnQgdXNlciBjYW4gYWNjZXNzIGEgdGVuYW50XG4gKiBTdXBlciBBZG1pbnMgY2FuIGFjY2VzcyBhbnkgdGVuYW50XG4gKiBSZWd1bGFyIHVzZXJzIG5lZWQgbWVtYmVyc2hpcFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FuQWNjZXNzVGVuYW50KFxuICB1c2VySWQ6IHN0cmluZyxcbiAgdGVuYW50SWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgaW5jbHVkZTogeyBtZW1iZXJzaGlwczogdHJ1ZSB9XG4gIH0pXG4gIFxuICBpZiAoIXVzZXIpIHJldHVybiBmYWxzZVxuICBcbiAgLy8gU3VwZXIgQWRtaW4gY2FuIGFjY2VzcyBhbnkgdGVuYW50XG4gIGlmICh1c2VyLmdsb2JhbFJvbGUgPT09ICdTVVBFUl9BRE1JTicpIHJldHVybiB0cnVlXG4gIFxuICAvLyBDaGVjayBtZW1iZXJzaGlwXG4gIHJldHVybiB1c2VyLm1lbWJlcnNoaXBzLnNvbWUoXG4gICAgbSA9PiBtLnRlbmFudElkID09PSB0ZW5hbnRJZCAmJiBtLmlzQWN0aXZlXG4gIClcbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJnZXRDdXJyZW50U2Vzc2lvbiIsImlzU3VwZXJBZG1pbiIsInVzZXIiLCJnbG9iYWxSb2xlIiwiaXNUZW5hbnRBZG1pbiIsInRlbmFudElkIiwibWVtYmVyc2hpcCIsIm1lbWJlcnNoaXBzIiwiZmluZCIsIm0iLCJyb2xlIiwiaXNBY3RpdmUiLCJpc1RlbmFudE1lbWJlciIsImdldFRlbmFudFJvbGUiLCJyZXF1aXJlQXV0aCIsInNlc3Npb24iLCJhdXRob3JpemVkIiwiZXJyb3IiLCJzdGF0dXMiLCJyZXF1aXJlU3VwZXJBZG1pbiIsImF1dGhSZXN1bHQiLCJyZXF1aXJlVGVuYW50QWRtaW4iLCJyZXF1aXJlVGVuYW50TWVtYmVyIiwiY2FuQWNjZXNzVGVuYW50IiwidXNlcklkIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJpbmNsdWRlIiwic29tZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/authorization.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUMvREksS0FBS0MsS0FBeUIsR0FBZ0I7UUFBQztRQUFTO1FBQVM7S0FBTyxHQUFHLENBQVM7QUFDdEYsR0FBRTtBQUVGLElBQUlBLElBQXlCLEVBQWNKLGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL3NhYXMtY29yZS8uL3NyYy9saWIvcHJpc21hLnRzPzAxZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoe1xuICBsb2c6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gWydxdWVyeScsICdlcnJvcicsICd3YXJuJ10gOiBbJ2Vycm9yJ10sXG59KVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYVxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute&page=%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Ftenants%2F%5Bid%5D%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();