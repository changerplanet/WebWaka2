"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/pos/customers/route";
exports.ids = ["app/api/pos/customers/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpos%2Fcustomers%2Froute&page=%2Fapi%2Fpos%2Fcustomers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpos%2Fcustomers%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpos%2Fcustomers%2Froute&page=%2Fapi%2Fpos%2Fcustomers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpos%2Fcustomers%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_saas_core_src_app_api_pos_customers_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/pos/customers/route.ts */ \"(rsc)/./src/app/api/pos/customers/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/pos/customers/route\",\n        pathname: \"/api/pos/customers\",\n        filename: \"route\",\n        bundlePath: \"app/api/pos/customers/route\"\n    },\n    resolvedPagePath: \"/app/saas-core/src/app/api/pos/customers/route.ts\",\n    nextConfigOutput,\n    userland: _app_saas_core_src_app_api_pos_customers_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/pos/customers/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwb3MlMkZjdXN0b21lcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnBvcyUyRmN1c3RvbWVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnBvcyUyRmN1c3RvbWVycyUyRnJvdXRlLnRzJmFwcERpcj0lMkZhcHAlMkZzYWFzLWNvcmUlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmFwcCUyRnNhYXMtY29yZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDQztBQUM5RTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NhYXMtY29yZS8/ZDYxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvYXBwL3NhYXMtY29yZS9zcmMvYXBwL2FwaS9wb3MvY3VzdG9tZXJzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wb3MvY3VzdG9tZXJzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcG9zL2N1c3RvbWVyc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcG9zL2N1c3RvbWVycy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9hcHAvc2Fhcy1jb3JlL3NyYy9hcHAvYXBpL3Bvcy9jdXN0b21lcnMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3Bvcy9jdXN0b21lcnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpos%2Fcustomers%2Froute&page=%2Fapi%2Fpos%2Fcustomers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpos%2Fcustomers%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/pos/customers/route.ts":
/*!********************************************!*\
  !*** ./src/app/api/pos/customers/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_core_services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/core-services */ \"(rsc)/./src/lib/core-services.ts\");\n/**\n * POS Customers API\n * \n * READ-ONLY endpoints for POS module to access Core customers.\n * POS associates sales with Core customers but does NOT create them.\n */ \n\n/**\n * GET /api/pos/customers\n * Search customers for POS\n */ async function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const tenantId = searchParams.get(\"tenantId\");\n        const query = searchParams.get(\"query\") || \"\";\n        const customerId = searchParams.get(\"customerId\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"20\", 10);\n        if (!tenantId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"tenantId is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get single customer by ID\n        if (customerId) {\n            const customer = await _lib_core_services__WEBPACK_IMPORTED_MODULE_1__.coreCustomerService.getCustomer(tenantId, customerId);\n            if (!customer) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Customer not found\"\n                }, {\n                    status: 404\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                customer,\n                source: \"CORE\"\n            });\n        }\n        // Search customers\n        const customers = await _lib_core_services__WEBPACK_IMPORTED_MODULE_1__.coreCustomerService.searchCustomers(tenantId, query, limit);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            customers,\n            count: customers.length,\n            source: \"CORE\"\n        });\n    } catch (error) {\n        console.error(\"[POS] Error fetching customers:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wb3MvY3VzdG9tZXJzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7OztDQUtDLEdBRXNEO0FBQ0U7QUFFekQ7OztDQUdDLEdBQ00sZUFBZUUsSUFBSUMsT0FBb0I7SUFDNUMsSUFBSTtRQUNGLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUYsUUFBUUcsR0FBRztRQUM1QyxNQUFNQyxXQUFXSCxhQUFhSSxHQUFHLENBQUM7UUFDbEMsTUFBTUMsUUFBUUwsYUFBYUksR0FBRyxDQUFDLFlBQVk7UUFDM0MsTUFBTUUsYUFBYU4sYUFBYUksR0FBRyxDQUFDO1FBQ3BDLE1BQU1HLFFBQVFDLFNBQVNSLGFBQWFJLEdBQUcsQ0FBQyxZQUFZLE1BQU07UUFFMUQsSUFBSSxDQUFDRCxVQUFVO1lBQ2IsT0FBT1AscURBQVlBLENBQUNhLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLE9BQU87WUFBdUIsR0FDaEQ7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDRCQUE0QjtRQUM1QixJQUFJTixZQUFZO1lBQ2QsTUFBTU8sV0FBVyxNQUFNaEIsbUVBQW1CQSxDQUFDaUIsV0FBVyxDQUFDWCxVQUFVRztZQUVqRSxJQUFJLENBQUNPLFVBQVU7Z0JBQ2IsT0FBT2pCLHFEQUFZQSxDQUFDYSxJQUFJLENBQ3RCO29CQUFFQyxTQUFTO29CQUFPQyxPQUFPO2dCQUFxQixHQUM5QztvQkFBRUMsUUFBUTtnQkFBSTtZQUVsQjtZQUVBLE9BQU9oQixxREFBWUEsQ0FBQ2EsSUFBSSxDQUFDO2dCQUN2QkMsU0FBUztnQkFDVEc7Z0JBQ0FFLFFBQVE7WUFDVjtRQUNGO1FBRUEsbUJBQW1CO1FBQ25CLE1BQU1DLFlBQVksTUFBTW5CLG1FQUFtQkEsQ0FBQ29CLGVBQWUsQ0FBQ2QsVUFBVUUsT0FBT0U7UUFFN0UsT0FBT1gscURBQVlBLENBQUNhLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUTTtZQUNBRSxPQUFPRixVQUFVRyxNQUFNO1lBQ3ZCSixRQUFRO1FBQ1Y7SUFFRixFQUFFLE9BQU9KLE9BQU87UUFDZFMsUUFBUVQsS0FBSyxDQUFDLG1DQUFtQ0E7UUFDakQsT0FBT2YscURBQVlBLENBQUNhLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPQyxPQUFPO1FBQXdCLEdBQ2pEO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Fhcy1jb3JlLy4vc3JjL2FwcC9hcGkvcG9zL2N1c3RvbWVycy9yb3V0ZS50cz8yMjM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUE9TIEN1c3RvbWVycyBBUElcbiAqIFxuICogUkVBRC1PTkxZIGVuZHBvaW50cyBmb3IgUE9TIG1vZHVsZSB0byBhY2Nlc3MgQ29yZSBjdXN0b21lcnMuXG4gKiBQT1MgYXNzb2NpYXRlcyBzYWxlcyB3aXRoIENvcmUgY3VzdG9tZXJzIGJ1dCBkb2VzIE5PVCBjcmVhdGUgdGhlbS5cbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBjb3JlQ3VzdG9tZXJTZXJ2aWNlIH0gZnJvbSAnQC9saWIvY29yZS1zZXJ2aWNlcydcblxuLyoqXG4gKiBHRVQgL2FwaS9wb3MvY3VzdG9tZXJzXG4gKiBTZWFyY2ggY3VzdG9tZXJzIGZvciBQT1NcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IHRlbmFudElkID0gc2VhcmNoUGFyYW1zLmdldCgndGVuYW50SWQnKVxuICAgIGNvbnN0IHF1ZXJ5ID0gc2VhcmNoUGFyYW1zLmdldCgncXVlcnknKSB8fCAnJ1xuICAgIGNvbnN0IGN1c3RvbWVySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdjdXN0b21lcklkJylcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JykgfHwgJzIwJywgMTApXG4gICAgXG4gICAgaWYgKCF0ZW5hbnRJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ3RlbmFudElkIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IHNpbmdsZSBjdXN0b21lciBieSBJRFxuICAgIGlmIChjdXN0b21lcklkKSB7XG4gICAgICBjb25zdCBjdXN0b21lciA9IGF3YWl0IGNvcmVDdXN0b21lclNlcnZpY2UuZ2V0Q3VzdG9tZXIodGVuYW50SWQsIGN1c3RvbWVySWQpXG4gICAgICBcbiAgICAgIGlmICghY3VzdG9tZXIpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQ3VzdG9tZXIgbm90IGZvdW5kJyB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGN1c3RvbWVyLFxuICAgICAgICBzb3VyY2U6ICdDT1JFJ1xuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gU2VhcmNoIGN1c3RvbWVyc1xuICAgIGNvbnN0IGN1c3RvbWVycyA9IGF3YWl0IGNvcmVDdXN0b21lclNlcnZpY2Uuc2VhcmNoQ3VzdG9tZXJzKHRlbmFudElkLCBxdWVyeSwgbGltaXQpXG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjdXN0b21lcnMsXG4gICAgICBjb3VudDogY3VzdG9tZXJzLmxlbmd0aCxcbiAgICAgIHNvdXJjZTogJ0NPUkUnXG4gICAgfSlcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbUE9TXSBFcnJvciBmZXRjaGluZyBjdXN0b21lcnM6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjb3JlQ3VzdG9tZXJTZXJ2aWNlIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInRlbmFudElkIiwiZ2V0IiwicXVlcnkiLCJjdXN0b21lcklkIiwibGltaXQiLCJwYXJzZUludCIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJjdXN0b21lciIsImdldEN1c3RvbWVyIiwic291cmNlIiwiY3VzdG9tZXJzIiwic2VhcmNoQ3VzdG9tZXJzIiwiY291bnQiLCJsZW5ndGgiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/pos/customers/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/core-services.ts":
/*!**********************************!*\
  !*** ./src/lib/core-services.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreCustomerService: () => (/* binding */ CoreCustomerService),\n/* harmony export */   CoreInventoryService: () => (/* binding */ CoreInventoryService),\n/* harmony export */   CoreLocationService: () => (/* binding */ CoreLocationService),\n/* harmony export */   coreCustomerService: () => (/* binding */ coreCustomerService),\n/* harmony export */   coreInventoryService: () => (/* binding */ coreInventoryService),\n/* harmony export */   coreLocationService: () => (/* binding */ coreLocationService)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/**\n * Core Inventory Service\n * \n * Implements the InventoryReader interface expected by POS, SVM, and MVM modules.\n * This is the SINGLE SOURCE OF TRUTH for product and inventory data.\n * \n * Modules consume this service - they do NOT mutate data directly.\n */ \n// ============================================================================\n// HELPERS\n// ============================================================================\nfunction decimalToNumber(val) {\n    return val ? Number(val) : 0;\n}\nfunction mapProductToInventory(product, inventoryLevel, location) {\n    const quantityOnHand = inventoryLevel?.quantityOnHand ?? 0;\n    const quantityReserved = inventoryLevel?.quantityReserved ?? 0;\n    const quantityAvailable = inventoryLevel?.quantityAvailable ?? quantityOnHand - quantityReserved;\n    const reorderPoint = inventoryLevel?.reorderPoint ?? 10;\n    return {\n        productId: product.id,\n        variantId: undefined,\n        sku: product.sku || \"\",\n        name: product.name,\n        barcode: product.barcode || undefined,\n        price: decimalToNumber(product.price),\n        costPrice: product.costPrice ? decimalToNumber(product.costPrice) : undefined,\n        compareAtPrice: product.compareAtPrice ? decimalToNumber(product.compareAtPrice) : undefined,\n        quantityOnHand,\n        quantityReserved,\n        quantityAvailable,\n        lowStockThreshold: reorderPoint,\n        outOfStockThreshold: 0,\n        isInStock: quantityAvailable > 0,\n        isLowStock: quantityAvailable > 0 && quantityAvailable <= reorderPoint,\n        allowNegative: product.allowBackorder || false,\n        trackInventory: product.trackInventory ?? true,\n        locationId: location?.id,\n        locationName: location?.name,\n        categoryId: product.categoryId || undefined,\n        categoryName: product.category?.name || undefined,\n        lastUpdated: inventoryLevel?.updatedAt || product.updatedAt,\n        lastSoldAt: undefined // TODO: Track from sales\n    };\n}\nfunction mapVariantToInventory(variant, product, inventoryLevel, location) {\n    const quantityOnHand = inventoryLevel?.quantityOnHand ?? 0;\n    const quantityReserved = inventoryLevel?.quantityReserved ?? 0;\n    const quantityAvailable = inventoryLevel?.quantityAvailable ?? quantityOnHand - quantityReserved;\n    const reorderPoint = inventoryLevel?.reorderPoint ?? 10;\n    return {\n        productId: product.id,\n        variantId: variant.id,\n        sku: variant.sku || product.sku || \"\",\n        name: `${product.name} - ${variant.name}`,\n        barcode: variant.barcode || product.barcode || undefined,\n        price: variant.price ? decimalToNumber(variant.price) : decimalToNumber(product.price),\n        costPrice: variant.costPrice ? decimalToNumber(variant.costPrice) : product.costPrice ? decimalToNumber(product.costPrice) : undefined,\n        compareAtPrice: variant.compareAtPrice ? decimalToNumber(variant.compareAtPrice) : product.compareAtPrice ? decimalToNumber(product.compareAtPrice) : undefined,\n        quantityOnHand,\n        quantityReserved,\n        quantityAvailable,\n        lowStockThreshold: reorderPoint,\n        outOfStockThreshold: 0,\n        isInStock: quantityAvailable > 0,\n        isLowStock: quantityAvailable > 0 && quantityAvailable <= reorderPoint,\n        allowNegative: product.allowBackorder || false,\n        trackInventory: product.trackInventory ?? true,\n        locationId: location?.id,\n        locationName: location?.name,\n        categoryId: product.categoryId || undefined,\n        categoryName: product.category?.name || undefined,\n        lastUpdated: inventoryLevel?.updatedAt || variant.updatedAt,\n        lastSoldAt: undefined\n    };\n}\n// ============================================================================\n// CORE INVENTORY SERVICE (Implements InventoryReader interface)\n// ============================================================================\nclass CoreInventoryService {\n    /**\n   * Get inventory for a single product or variant\n   */ async getProductInventory(tenantId, productId, variantId, locationId) {\n        // If variant specified, get variant inventory\n        if (variantId) {\n            const variant = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.productVariant.findFirst({\n                where: {\n                    id: variantId,\n                    productId\n                },\n                include: {\n                    product: {\n                        include: {\n                            category: true\n                        }\n                    },\n                    inventoryLevels: locationId ? {\n                        where: {\n                            locationId\n                        }\n                    } : true\n                }\n            });\n            if (!variant) return null;\n            const inventoryLevel = variant.inventoryLevels[0];\n            const location = inventoryLevel ? await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.location.findUnique({\n                where: {\n                    id: inventoryLevel.locationId\n                }\n            }) : null;\n            return mapVariantToInventory(variant, variant.product, inventoryLevel, location);\n        }\n        // Get product inventory\n        const product = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.product.findFirst({\n            where: {\n                id: productId,\n                tenantId\n            },\n            include: {\n                category: true,\n                inventoryLevels: locationId ? {\n                    where: {\n                        locationId,\n                        variantId: null\n                    }\n                } : {\n                    where: {\n                        variantId: null\n                    }\n                }\n            }\n        });\n        if (!product) return null;\n        const inventoryLevel = product.inventoryLevels[0];\n        const location = inventoryLevel ? await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.location.findUnique({\n            where: {\n                id: inventoryLevel.locationId\n            }\n        }) : null;\n        return mapProductToInventory(product, inventoryLevel, location);\n    }\n    /**\n   * Get inventory for multiple products\n   */ async getMultipleProductInventory(tenantId, productIds, locationId) {\n        const result = new Map();\n        // Batch fetch all products\n        const productIdList = [\n            ...new Set(productIds.map((p)=>p.productId))\n        ];\n        const products = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.product.findMany({\n            where: {\n                id: {\n                    in: productIdList\n                },\n                tenantId\n            },\n            include: {\n                category: true,\n                variants: {\n                    include: {\n                        inventoryLevels: locationId ? {\n                            where: {\n                                locationId\n                            }\n                        } : true\n                    }\n                },\n                inventoryLevels: locationId ? {\n                    where: {\n                        locationId\n                    }\n                } : true\n            }\n        });\n        const location = locationId ? await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.location.findUnique({\n            where: {\n                id: locationId\n            }\n        }) : null;\n        for (const req of productIds){\n            const product = products.find((p)=>p.id === req.productId);\n            if (!product) continue;\n            const key = req.variantId ? `${req.productId}:${req.variantId}` : req.productId;\n            if (req.variantId) {\n                const variant = product.variants.find((v)=>v.id === req.variantId);\n                if (variant) {\n                    const invLevel = variant.inventoryLevels[0];\n                    result.set(key, mapVariantToInventory(variant, product, invLevel, location));\n                }\n            } else {\n                const invLevel = product.inventoryLevels.find((il)=>!il.variantId);\n                result.set(key, mapProductToInventory(product, invLevel, location));\n            }\n        }\n        return result;\n    }\n    /**\n   * Check if quantity is available\n   */ async checkAvailability(tenantId, productId, quantity, variantId, locationId) {\n        const inventory = await this.getProductInventory(tenantId, productId, variantId, locationId);\n        if (!inventory) {\n            return {\n                productId,\n                variantId,\n                requestedQuantity: quantity,\n                availableQuantity: 0,\n                canFulfill: false,\n                shortfall: quantity,\n                status: \"OUT_OF_STOCK\",\n                message: \"Product not found\"\n            };\n        }\n        if (!inventory.trackInventory) {\n            return {\n                productId,\n                variantId,\n                requestedQuantity: quantity,\n                availableQuantity: Infinity,\n                canFulfill: true,\n                shortfall: 0,\n                status: \"NOT_TRACKED\",\n                message: \"Inventory not tracked for this product\"\n            };\n        }\n        const available = inventory.quantityAvailable;\n        const canFulfill = available >= quantity || inventory.allowNegative;\n        let status = \"IN_STOCK\";\n        if (available <= 0) status = \"OUT_OF_STOCK\";\n        else if (available < quantity) status = \"LOW_STOCK\";\n        else if (inventory.isLowStock) status = \"LOW_STOCK\";\n        return {\n            productId,\n            variantId,\n            requestedQuantity: quantity,\n            availableQuantity: available,\n            canFulfill,\n            shortfall: canFulfill ? 0 : quantity - available,\n            status,\n            message: canFulfill ? `${available} units available` : `Only ${available} units available, need ${quantity}`\n        };\n    }\n    /**\n   * Batch availability check\n   */ async checkBatchAvailability(tenantId, items, locationId) {\n        const results = await Promise.all(items.items.map((item)=>this.checkAvailability(tenantId, item.productId, item.quantity, item.variantId, locationId)));\n        const unavailable = results.filter((r)=>!r.canFulfill);\n        return {\n            allAvailable: unavailable.length === 0,\n            results,\n            unavailableItems: unavailable\n        };\n    }\n    /**\n   * Search products with inventory\n   */ async searchProducts(tenantId, query, options) {\n        const where = {\n            tenantId,\n            status: \"ACTIVE\",\n            OR: [\n                {\n                    name: {\n                        contains: query,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    sku: {\n                        contains: query,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    barcode: {\n                        contains: query,\n                        mode: \"insensitive\"\n                    }\n                }\n            ]\n        };\n        if (options?.categoryId) {\n            where.categoryId = options.categoryId;\n        }\n        const products = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.product.findMany({\n            where,\n            include: {\n                category: true,\n                inventoryLevels: options?.locationId ? {\n                    where: {\n                        locationId: options.locationId,\n                        variantId: null\n                    }\n                } : {\n                    where: {\n                        variantId: null\n                    }\n                }\n            },\n            take: options?.limit || 50\n        });\n        const location = options?.locationId ? await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.location.findUnique({\n            where: {\n                id: options.locationId\n            }\n        }) : null;\n        let results = products.map((product)=>{\n            const invLevel = product.inventoryLevels[0];\n            return mapProductToInventory(product, invLevel, location);\n        });\n        if (options?.inStockOnly) {\n            results = results.filter((p)=>p.isInStock || !p.trackInventory);\n        }\n        return results;\n    }\n    /**\n   * Get low stock products\n   */ async getLowStockProducts(tenantId, locationId) {\n        const inventoryLevels = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.inventoryLevel.findMany({\n            where: {\n                tenantId,\n                ...locationId && {\n                    locationId\n                },\n                quantityAvailable: {\n                    lte: _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.inventoryLevel.fields.reorderPoint\n                }\n            },\n            include: {\n                product: {\n                    include: {\n                        category: true\n                    }\n                },\n                variant: true,\n                location: true\n            }\n        });\n        return inventoryLevels.map((il)=>{\n            if (il.variant) {\n                return mapVariantToInventory(il.variant, il.product, il, il.location);\n            }\n            return mapProductToInventory(il.product, il, il.location);\n        });\n    }\n    /**\n   * Get inventory snapshot for offline cache\n   */ async getInventorySnapshot(tenantId, options) {\n        const where = {\n            tenantId,\n            status: \"ACTIVE\",\n            ...options?.productIds && {\n                id: {\n                    in: options.productIds\n                }\n            }\n        };\n        const products = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.product.findMany({\n            where,\n            include: {\n                category: true,\n                variants: {\n                    include: {\n                        inventoryLevels: options?.locationId ? {\n                            where: {\n                                locationId: options.locationId\n                            }\n                        } : true\n                    }\n                },\n                inventoryLevels: options?.locationId ? {\n                    where: {\n                        locationId: options.locationId\n                    }\n                } : true\n            }\n        });\n        const location = options?.locationId ? await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.location.findUnique({\n            where: {\n                id: options.locationId\n            }\n        }) : null;\n        const results = [];\n        for (const product of products){\n            // Add product-level inventory\n            const productInv = product.inventoryLevels.find((il)=>!il.variantId);\n            const inv = mapProductToInventory(product, productInv, location);\n            if (options?.includeZeroStock || inv.quantityAvailable > 0 || !inv.trackInventory) {\n                results.push(inv);\n            }\n            // Add variant-level inventory\n            for (const variant of product.variants){\n                const variantInv = variant.inventoryLevels[0];\n                const vInv = mapVariantToInventory(variant, product, variantInv, location);\n                if (options?.includeZeroStock || vInv.quantityAvailable > 0 || !vInv.trackInventory) {\n                    results.push(vInv);\n                }\n            }\n        }\n        return results;\n    }\n}\nclass CoreCustomerService {\n    /**\n   * Get customer by ID\n   */ async getCustomer(tenantId, customerId) {\n        const customer = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.customer.findFirst({\n            where: {\n                id: customerId,\n                tenantId\n            }\n        });\n        if (!customer) return null;\n        return {\n            id: customer.id,\n            tenantId: customer.tenantId,\n            email: customer.email || undefined,\n            phone: customer.phone || undefined,\n            firstName: customer.firstName || undefined,\n            lastName: customer.lastName || undefined,\n            fullName: customer.fullName || undefined,\n            company: customer.company || undefined,\n            taxId: customer.taxId || undefined,\n            status: customer.status,\n            defaultAddressId: customer.defaultAddressId || undefined,\n            tags: customer.tags || [],\n            notes: customer.notes || undefined,\n            totalOrders: customer.totalOrders,\n            totalSpent: decimalToNumber(customer.totalSpent),\n            createdAt: customer.createdAt,\n            updatedAt: customer.updatedAt\n        };\n    }\n    /**\n   * Search customers\n   */ async searchCustomers(tenantId, query, limit) {\n        const customers = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.customer.findMany({\n            where: {\n                tenantId,\n                status: \"ACTIVE\",\n                OR: [\n                    {\n                        email: {\n                            contains: query,\n                            mode: \"insensitive\"\n                        }\n                    },\n                    {\n                        phone: {\n                            contains: query\n                        }\n                    },\n                    {\n                        fullName: {\n                            contains: query,\n                            mode: \"insensitive\"\n                        }\n                    },\n                    {\n                        firstName: {\n                            contains: query,\n                            mode: \"insensitive\"\n                        }\n                    },\n                    {\n                        lastName: {\n                            contains: query,\n                            mode: \"insensitive\"\n                        }\n                    }\n                ]\n            },\n            take: limit || 20\n        });\n        return customers.map((c)=>({\n                id: c.id,\n                tenantId: c.tenantId,\n                email: c.email || undefined,\n                phone: c.phone || undefined,\n                firstName: c.firstName || undefined,\n                lastName: c.lastName || undefined,\n                fullName: c.fullName || undefined,\n                company: c.company || undefined,\n                taxId: c.taxId || undefined,\n                status: c.status,\n                defaultAddressId: c.defaultAddressId || undefined,\n                tags: c.tags || [],\n                notes: c.notes || undefined,\n                totalOrders: c.totalOrders,\n                totalSpent: decimalToNumber(c.totalSpent),\n                createdAt: c.createdAt,\n                updatedAt: c.updatedAt\n            }));\n    }\n}\nclass CoreLocationService {\n    /**\n   * Get location by ID\n   */ async getLocation(tenantId, locationId) {\n        const location = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.location.findFirst({\n            where: {\n                id: locationId,\n                tenantId\n            }\n        });\n        if (!location) return null;\n        return {\n            id: location.id,\n            tenantId: location.tenantId,\n            name: location.name,\n            code: location.code || undefined,\n            type: location.type,\n            address: {\n                street1: location.addressLine1 || undefined,\n                street2: location.addressLine2 || undefined,\n                city: location.city || undefined,\n                state: location.state || undefined,\n                postalCode: location.postalCode || undefined,\n                country: location.country || undefined\n            },\n            phone: location.phone || undefined,\n            email: location.email || undefined,\n            isActive: location.isActive,\n            isDefault: location.isDefault,\n            timezone: location.timezone || undefined,\n            operatingHours: location.operatingHours || undefined\n        };\n    }\n    /**\n   * Get all locations for tenant\n   */ async getLocations(tenantId, activeOnly) {\n        const locations = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.location.findMany({\n            where: {\n                tenantId,\n                ...activeOnly && {\n                    isActive: true\n                }\n            },\n            orderBy: [\n                {\n                    isDefault: \"desc\"\n                },\n                {\n                    name: \"asc\"\n                }\n            ]\n        });\n        return locations.map((l)=>({\n                id: l.id,\n                tenantId: l.tenantId,\n                name: l.name,\n                code: l.code || undefined,\n                type: l.type,\n                address: {\n                    street1: l.addressLine1 || undefined,\n                    street2: l.addressLine2 || undefined,\n                    city: l.city || undefined,\n                    state: l.state || undefined,\n                    postalCode: l.postalCode || undefined,\n                    country: l.country || undefined\n                },\n                phone: l.phone || undefined,\n                email: l.email || undefined,\n                isActive: l.isActive,\n                isDefault: l.isDefault,\n                timezone: l.timezone || undefined,\n                operatingHours: l.operatingHours || undefined\n            }));\n    }\n    /**\n   * Get default location for tenant\n   */ async getDefaultLocation(tenantId) {\n        const location = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.location.findFirst({\n            where: {\n                tenantId,\n                isDefault: true,\n                isActive: true\n            }\n        });\n        if (!location) return null;\n        return {\n            id: location.id,\n            tenantId: location.tenantId,\n            name: location.name,\n            code: location.code || undefined,\n            type: location.type,\n            address: {\n                street1: location.addressLine1 || undefined,\n                street2: location.addressLine2 || undefined,\n                city: location.city || undefined,\n                state: location.state || undefined,\n                postalCode: location.postalCode || undefined,\n                country: location.country || undefined\n            },\n            phone: location.phone || undefined,\n            email: location.email || undefined,\n            isActive: location.isActive,\n            isDefault: location.isDefault,\n            timezone: location.timezone || undefined,\n            operatingHours: location.operatingHours || undefined\n        };\n    }\n}\n// ============================================================================\n// SINGLETON INSTANCES\n// ============================================================================\nconst coreInventoryService = new CoreInventoryService();\nconst coreCustomerService = new CoreCustomerService();\nconst coreLocationService = new CoreLocationService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM3QkMsVUFBVXpJLFNBQVN5SSxRQUFRLElBQUlqSTtZQUMvQmtJLGdCQUFnQjFJLFNBQVMwSSxjQUFjLElBQStCbEk7UUFDeEU7SUFDRjtBQUNGO0FBRUEsK0VBQStFO0FBQy9FLHNCQUFzQjtBQUN0QiwrRUFBK0U7QUFFeEUsTUFBTXlJLHVCQUF1QixJQUFJakgsdUJBQXNCO0FBQ3ZELE1BQU1rSCxzQkFBc0IsSUFBSTVDLHNCQUFxQjtBQUNyRCxNQUFNNkMsc0JBQXNCLElBQUl6QixzQkFBcUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYWFzLWNvcmUvLi9zcmMvbGliL2NvcmUtc2VydmljZXMudHM/Mzk0MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcmUgSW52ZW50b3J5IFNlcnZpY2VcbiAqIFxuICogSW1wbGVtZW50cyB0aGUgSW52ZW50b3J5UmVhZGVyIGludGVyZmFjZSBleHBlY3RlZCBieSBQT1MsIFNWTSwgYW5kIE1WTSBtb2R1bGVzLlxuICogVGhpcyBpcyB0aGUgU0lOR0xFIFNPVVJDRSBPRiBUUlVUSCBmb3IgcHJvZHVjdCBhbmQgaW52ZW50b3J5IGRhdGEuXG4gKiBcbiAqIE1vZHVsZXMgY29uc3VtZSB0aGlzIHNlcnZpY2UgLSB0aGV5IGRvIE5PVCBtdXRhdGUgZGF0YSBkaXJlY3RseS5cbiAqL1xuXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuL3ByaXNtYSdcbmltcG9ydCB7IFByaXNtYSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUWVBFUyAoTWF0Y2ggdGhlIG1vZHVsZSBleHBlY3RhdGlvbnMpXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZHVjdEludmVudG9yeSB7XG4gIHByb2R1Y3RJZDogc3RyaW5nXG4gIHZhcmlhbnRJZD86IHN0cmluZ1xuICBza3U6IHN0cmluZ1xuICBuYW1lOiBzdHJpbmdcbiAgYmFyY29kZT86IHN0cmluZ1xuICBcbiAgLy8gUHJpY2luZ1xuICBwcmljZTogbnVtYmVyXG4gIGNvc3RQcmljZT86IG51bWJlclxuICBjb21wYXJlQXRQcmljZT86IG51bWJlclxuICBcbiAgLy8gSW52ZW50b3J5IGxldmVsc1xuICBxdWFudGl0eU9uSGFuZDogbnVtYmVyXG4gIHF1YW50aXR5UmVzZXJ2ZWQ6IG51bWJlclxuICBxdWFudGl0eUF2YWlsYWJsZTogbnVtYmVyXG4gIFxuICAvLyBUaHJlc2hvbGRzXG4gIGxvd1N0b2NrVGhyZXNob2xkOiBudW1iZXJcbiAgb3V0T2ZTdG9ja1RocmVzaG9sZDogbnVtYmVyXG4gIFxuICAvLyBGbGFnc1xuICBpc0luU3RvY2s6IGJvb2xlYW5cbiAgaXNMb3dTdG9jazogYm9vbGVhblxuICBhbGxvd05lZ2F0aXZlOiBib29sZWFuXG4gIHRyYWNrSW52ZW50b3J5OiBib29sZWFuXG4gIFxuICAvLyBMb2NhdGlvblxuICBsb2NhdGlvbklkPzogc3RyaW5nXG4gIGxvY2F0aW9uTmFtZT86IHN0cmluZ1xuICBcbiAgLy8gQ2F0ZWdvcnlcbiAgY2F0ZWdvcnlJZD86IHN0cmluZ1xuICBjYXRlZ29yeU5hbWU/OiBzdHJpbmdcbiAgXG4gIC8vIFRpbWVzdGFtcHNcbiAgbGFzdFVwZGF0ZWQ6IERhdGVcbiAgbGFzdFNvbGRBdD86IERhdGVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnZlbnRvcnlDaGVja1Jlc3VsdCB7XG4gIHByb2R1Y3RJZDogc3RyaW5nXG4gIHZhcmlhbnRJZD86IHN0cmluZ1xuICByZXF1ZXN0ZWRRdWFudGl0eTogbnVtYmVyXG4gIGF2YWlsYWJsZVF1YW50aXR5OiBudW1iZXJcbiAgXG4gIGNhbkZ1bGZpbGw6IGJvb2xlYW5cbiAgc2hvcnRmYWxsOiBudW1iZXJcbiAgXG4gIHN0YXR1czogJ0lOX1NUT0NLJyB8ICdMT1dfU1RPQ0snIHwgJ09VVF9PRl9TVE9DSycgfCAnUkVTRVJWRUQnIHwgJ0JBQ0tPUkRFUkVEJyB8ICdOT1RfVFJBQ0tFRCdcbiAgbWVzc2FnZTogc3RyaW5nXG4gIFxuICBhbHRlcm5hdGl2ZXM/OiBQcm9kdWN0SW52ZW50b3J5W11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaEludmVudG9yeUNoZWNrIHtcbiAgaXRlbXM6IEFycmF5PHtcbiAgICBwcm9kdWN0SWQ6IHN0cmluZ1xuICAgIHZhcmlhbnRJZD86IHN0cmluZ1xuICAgIHF1YW50aXR5OiBudW1iZXJcbiAgfT5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaEludmVudG9yeVJlc3VsdCB7XG4gIGFsbEF2YWlsYWJsZTogYm9vbGVhblxuICByZXN1bHRzOiBJbnZlbnRvcnlDaGVja1Jlc3VsdFtdXG4gIHVuYXZhaWxhYmxlSXRlbXM6IEludmVudG9yeUNoZWNrUmVzdWx0W11cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSEVMUEVSU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiBkZWNpbWFsVG9OdW1iZXIodmFsOiBQcmlzbWEuRGVjaW1hbCB8IG51bGwpOiBudW1iZXIge1xuICByZXR1cm4gdmFsID8gTnVtYmVyKHZhbCkgOiAwXG59XG5cbmZ1bmN0aW9uIG1hcFByb2R1Y3RUb0ludmVudG9yeShcbiAgcHJvZHVjdDogYW55LFxuICBpbnZlbnRvcnlMZXZlbD86IGFueSxcbiAgbG9jYXRpb24/OiBhbnlcbik6IFByb2R1Y3RJbnZlbnRvcnkge1xuICBjb25zdCBxdWFudGl0eU9uSGFuZCA9IGludmVudG9yeUxldmVsPy5xdWFudGl0eU9uSGFuZCA/PyAwXG4gIGNvbnN0IHF1YW50aXR5UmVzZXJ2ZWQgPSBpbnZlbnRvcnlMZXZlbD8ucXVhbnRpdHlSZXNlcnZlZCA/PyAwXG4gIGNvbnN0IHF1YW50aXR5QXZhaWxhYmxlID0gaW52ZW50b3J5TGV2ZWw/LnF1YW50aXR5QXZhaWxhYmxlID8/IHF1YW50aXR5T25IYW5kIC0gcXVhbnRpdHlSZXNlcnZlZFxuICBjb25zdCByZW9yZGVyUG9pbnQgPSBpbnZlbnRvcnlMZXZlbD8ucmVvcmRlclBvaW50ID8/IDEwXG4gIFxuICByZXR1cm4ge1xuICAgIHByb2R1Y3RJZDogcHJvZHVjdC5pZCxcbiAgICB2YXJpYW50SWQ6IHVuZGVmaW5lZCxcbiAgICBza3U6IHByb2R1Y3Quc2t1IHx8ICcnLFxuICAgIG5hbWU6IHByb2R1Y3QubmFtZSxcbiAgICBiYXJjb2RlOiBwcm9kdWN0LmJhcmNvZGUgfHwgdW5kZWZpbmVkLFxuICAgIFxuICAgIHByaWNlOiBkZWNpbWFsVG9OdW1iZXIocHJvZHVjdC5wcmljZSksXG4gICAgY29zdFByaWNlOiBwcm9kdWN0LmNvc3RQcmljZSA/IGRlY2ltYWxUb051bWJlcihwcm9kdWN0LmNvc3RQcmljZSkgOiB1bmRlZmluZWQsXG4gICAgY29tcGFyZUF0UHJpY2U6IHByb2R1Y3QuY29tcGFyZUF0UHJpY2UgPyBkZWNpbWFsVG9OdW1iZXIocHJvZHVjdC5jb21wYXJlQXRQcmljZSkgOiB1bmRlZmluZWQsXG4gICAgXG4gICAgcXVhbnRpdHlPbkhhbmQsXG4gICAgcXVhbnRpdHlSZXNlcnZlZCxcbiAgICBxdWFudGl0eUF2YWlsYWJsZSxcbiAgICBcbiAgICBsb3dTdG9ja1RocmVzaG9sZDogcmVvcmRlclBvaW50LFxuICAgIG91dE9mU3RvY2tUaHJlc2hvbGQ6IDAsXG4gICAgXG4gICAgaXNJblN0b2NrOiBxdWFudGl0eUF2YWlsYWJsZSA+IDAsXG4gICAgaXNMb3dTdG9jazogcXVhbnRpdHlBdmFpbGFibGUgPiAwICYmIHF1YW50aXR5QXZhaWxhYmxlIDw9IHJlb3JkZXJQb2ludCxcbiAgICBhbGxvd05lZ2F0aXZlOiBwcm9kdWN0LmFsbG93QmFja29yZGVyIHx8IGZhbHNlLFxuICAgIHRyYWNrSW52ZW50b3J5OiBwcm9kdWN0LnRyYWNrSW52ZW50b3J5ID8/IHRydWUsXG4gICAgXG4gICAgbG9jYXRpb25JZDogbG9jYXRpb24/LmlkLFxuICAgIGxvY2F0aW9uTmFtZTogbG9jYXRpb24/Lm5hbWUsXG4gICAgXG4gICAgY2F0ZWdvcnlJZDogcHJvZHVjdC5jYXRlZ29yeUlkIHx8IHVuZGVmaW5lZCxcbiAgICBjYXRlZ29yeU5hbWU6IHByb2R1Y3QuY2F0ZWdvcnk/Lm5hbWUgfHwgdW5kZWZpbmVkLFxuICAgIFxuICAgIGxhc3RVcGRhdGVkOiBpbnZlbnRvcnlMZXZlbD8udXBkYXRlZEF0IHx8IHByb2R1Y3QudXBkYXRlZEF0LFxuICAgIGxhc3RTb2xkQXQ6IHVuZGVmaW5lZCAvLyBUT0RPOiBUcmFjayBmcm9tIHNhbGVzXG4gIH1cbn1cblxuZnVuY3Rpb24gbWFwVmFyaWFudFRvSW52ZW50b3J5KFxuICB2YXJpYW50OiBhbnksXG4gIHByb2R1Y3Q6IGFueSxcbiAgaW52ZW50b3J5TGV2ZWw/OiBhbnksXG4gIGxvY2F0aW9uPzogYW55XG4pOiBQcm9kdWN0SW52ZW50b3J5IHtcbiAgY29uc3QgcXVhbnRpdHlPbkhhbmQgPSBpbnZlbnRvcnlMZXZlbD8ucXVhbnRpdHlPbkhhbmQgPz8gMFxuICBjb25zdCBxdWFudGl0eVJlc2VydmVkID0gaW52ZW50b3J5TGV2ZWw/LnF1YW50aXR5UmVzZXJ2ZWQgPz8gMFxuICBjb25zdCBxdWFudGl0eUF2YWlsYWJsZSA9IGludmVudG9yeUxldmVsPy5xdWFudGl0eUF2YWlsYWJsZSA/PyBxdWFudGl0eU9uSGFuZCAtIHF1YW50aXR5UmVzZXJ2ZWRcbiAgY29uc3QgcmVvcmRlclBvaW50ID0gaW52ZW50b3J5TGV2ZWw/LnJlb3JkZXJQb2ludCA/PyAxMFxuICBcbiAgcmV0dXJuIHtcbiAgICBwcm9kdWN0SWQ6IHByb2R1Y3QuaWQsXG4gICAgdmFyaWFudElkOiB2YXJpYW50LmlkLFxuICAgIHNrdTogdmFyaWFudC5za3UgfHwgcHJvZHVjdC5za3UgfHwgJycsXG4gICAgbmFtZTogYCR7cHJvZHVjdC5uYW1lfSAtICR7dmFyaWFudC5uYW1lfWAsXG4gICAgYmFyY29kZTogdmFyaWFudC5iYXJjb2RlIHx8IHByb2R1Y3QuYmFyY29kZSB8fCB1bmRlZmluZWQsXG4gICAgXG4gICAgcHJpY2U6IHZhcmlhbnQucHJpY2UgPyBkZWNpbWFsVG9OdW1iZXIodmFyaWFudC5wcmljZSkgOiBkZWNpbWFsVG9OdW1iZXIocHJvZHVjdC5wcmljZSksXG4gICAgY29zdFByaWNlOiB2YXJpYW50LmNvc3RQcmljZSA/IGRlY2ltYWxUb051bWJlcih2YXJpYW50LmNvc3RQcmljZSkgOiBcbiAgICAgICAgICAgICAgIHByb2R1Y3QuY29zdFByaWNlID8gZGVjaW1hbFRvTnVtYmVyKHByb2R1Y3QuY29zdFByaWNlKSA6IHVuZGVmaW5lZCxcbiAgICBjb21wYXJlQXRQcmljZTogdmFyaWFudC5jb21wYXJlQXRQcmljZSA/IGRlY2ltYWxUb051bWJlcih2YXJpYW50LmNvbXBhcmVBdFByaWNlKSA6IFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0LmNvbXBhcmVBdFByaWNlID8gZGVjaW1hbFRvTnVtYmVyKHByb2R1Y3QuY29tcGFyZUF0UHJpY2UpIDogdW5kZWZpbmVkLFxuICAgIFxuICAgIHF1YW50aXR5T25IYW5kLFxuICAgIHF1YW50aXR5UmVzZXJ2ZWQsXG4gICAgcXVhbnRpdHlBdmFpbGFibGUsXG4gICAgXG4gICAgbG93U3RvY2tUaHJlc2hvbGQ6IHJlb3JkZXJQb2ludCxcbiAgICBvdXRPZlN0b2NrVGhyZXNob2xkOiAwLFxuICAgIFxuICAgIGlzSW5TdG9jazogcXVhbnRpdHlBdmFpbGFibGUgPiAwLFxuICAgIGlzTG93U3RvY2s6IHF1YW50aXR5QXZhaWxhYmxlID4gMCAmJiBxdWFudGl0eUF2YWlsYWJsZSA8PSByZW9yZGVyUG9pbnQsXG4gICAgYWxsb3dOZWdhdGl2ZTogcHJvZHVjdC5hbGxvd0JhY2tvcmRlciB8fCBmYWxzZSxcbiAgICB0cmFja0ludmVudG9yeTogcHJvZHVjdC50cmFja0ludmVudG9yeSA/PyB0cnVlLFxuICAgIFxuICAgIGxvY2F0aW9uSWQ6IGxvY2F0aW9uPy5pZCxcbiAgICBsb2NhdGlvbk5hbWU6IGxvY2F0aW9uPy5uYW1lLFxuICAgIFxuICAgIGNhdGVnb3J5SWQ6IHByb2R1Y3QuY2F0ZWdvcnlJZCB8fCB1bmRlZmluZWQsXG4gICAgY2F0ZWdvcnlOYW1lOiBwcm9kdWN0LmNhdGVnb3J5Py5uYW1lIHx8IHVuZGVmaW5lZCxcbiAgICBcbiAgICBsYXN0VXBkYXRlZDogaW52ZW50b3J5TGV2ZWw/LnVwZGF0ZWRBdCB8fCB2YXJpYW50LnVwZGF0ZWRBdCxcbiAgICBsYXN0U29sZEF0OiB1bmRlZmluZWRcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDT1JFIElOVkVOVE9SWSBTRVJWSUNFIChJbXBsZW1lbnRzIEludmVudG9yeVJlYWRlciBpbnRlcmZhY2UpXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjbGFzcyBDb3JlSW52ZW50b3J5U2VydmljZSB7XG4gIC8qKlxuICAgKiBHZXQgaW52ZW50b3J5IGZvciBhIHNpbmdsZSBwcm9kdWN0IG9yIHZhcmlhbnRcbiAgICovXG4gIGFzeW5jIGdldFByb2R1Y3RJbnZlbnRvcnkoXG4gICAgdGVuYW50SWQ6IHN0cmluZyxcbiAgICBwcm9kdWN0SWQ6IHN0cmluZyxcbiAgICB2YXJpYW50SWQ/OiBzdHJpbmcsXG4gICAgbG9jYXRpb25JZD86IHN0cmluZ1xuICApOiBQcm9taXNlPFByb2R1Y3RJbnZlbnRvcnkgfCBudWxsPiB7XG4gICAgLy8gSWYgdmFyaWFudCBzcGVjaWZpZWQsIGdldCB2YXJpYW50IGludmVudG9yeVxuICAgIGlmICh2YXJpYW50SWQpIHtcbiAgICAgIGNvbnN0IHZhcmlhbnQgPSBhd2FpdCBwcmlzbWEucHJvZHVjdFZhcmlhbnQuZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHZhcmlhbnRJZCwgcHJvZHVjdElkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBwcm9kdWN0OiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7IGNhdGVnb3J5OiB0cnVlIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGludmVudG9yeUxldmVsczogbG9jYXRpb25JZCA/IHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGxvY2F0aW9uSWQgfVxuICAgICAgICAgIH0gOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmICghdmFyaWFudCkgcmV0dXJuIG51bGxcbiAgICAgIFxuICAgICAgY29uc3QgaW52ZW50b3J5TGV2ZWwgPSB2YXJpYW50LmludmVudG9yeUxldmVsc1swXVxuICAgICAgY29uc3QgbG9jYXRpb24gPSBpbnZlbnRvcnlMZXZlbCA/IGF3YWl0IHByaXNtYS5sb2NhdGlvbi5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGludmVudG9yeUxldmVsLmxvY2F0aW9uSWQgfVxuICAgICAgfSkgOiBudWxsXG4gICAgICBcbiAgICAgIHJldHVybiBtYXBWYXJpYW50VG9JbnZlbnRvcnkodmFyaWFudCwgdmFyaWFudC5wcm9kdWN0LCBpbnZlbnRvcnlMZXZlbCwgbG9jYXRpb24pXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBwcm9kdWN0IGludmVudG9yeVxuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBwcmlzbWEucHJvZHVjdC5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHByb2R1Y3RJZCwgdGVuYW50SWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgY2F0ZWdvcnk6IHRydWUsXG4gICAgICAgIGludmVudG9yeUxldmVsczogbG9jYXRpb25JZCA/IHtcbiAgICAgICAgICB3aGVyZTogeyBsb2NhdGlvbklkLCB2YXJpYW50SWQ6IG51bGwgfVxuICAgICAgICB9IDoge1xuICAgICAgICAgIHdoZXJlOiB7IHZhcmlhbnRJZDogbnVsbCB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGlmICghcHJvZHVjdCkgcmV0dXJuIG51bGxcbiAgICBcbiAgICBjb25zdCBpbnZlbnRvcnlMZXZlbCA9IHByb2R1Y3QuaW52ZW50b3J5TGV2ZWxzWzBdXG4gICAgY29uc3QgbG9jYXRpb24gPSBpbnZlbnRvcnlMZXZlbCA/IGF3YWl0IHByaXNtYS5sb2NhdGlvbi5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBpbnZlbnRvcnlMZXZlbC5sb2NhdGlvbklkIH1cbiAgICB9KSA6IG51bGxcbiAgICBcbiAgICByZXR1cm4gbWFwUHJvZHVjdFRvSW52ZW50b3J5KHByb2R1Y3QsIGludmVudG9yeUxldmVsLCBsb2NhdGlvbilcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgaW52ZW50b3J5IGZvciBtdWx0aXBsZSBwcm9kdWN0c1xuICAgKi9cbiAgYXN5bmMgZ2V0TXVsdGlwbGVQcm9kdWN0SW52ZW50b3J5KFxuICAgIHRlbmFudElkOiBzdHJpbmcsXG4gICAgcHJvZHVjdElkczogQXJyYXk8eyBwcm9kdWN0SWQ6IHN0cmluZzsgdmFyaWFudElkPzogc3RyaW5nIH0+LFxuICAgIGxvY2F0aW9uSWQ/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxNYXA8c3RyaW5nLCBQcm9kdWN0SW52ZW50b3J5Pj4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXA8c3RyaW5nLCBQcm9kdWN0SW52ZW50b3J5PigpXG4gICAgXG4gICAgLy8gQmF0Y2ggZmV0Y2ggYWxsIHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdElkTGlzdCA9IFsuLi5uZXcgU2V0KHByb2R1Y3RJZHMubWFwKHAgPT4gcC5wcm9kdWN0SWQpKV1cbiAgICBcbiAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IHByaXNtYS5wcm9kdWN0LmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IFxuICAgICAgICBpZDogeyBpbjogcHJvZHVjdElkTGlzdCB9LFxuICAgICAgICB0ZW5hbnRJZCBcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGNhdGVnb3J5OiB0cnVlLFxuICAgICAgICB2YXJpYW50czoge1xuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIGludmVudG9yeUxldmVsczogbG9jYXRpb25JZCA/IHtcbiAgICAgICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZCB9XG4gICAgICAgICAgICB9IDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52ZW50b3J5TGV2ZWxzOiBsb2NhdGlvbklkID8ge1xuICAgICAgICAgIHdoZXJlOiB7IGxvY2F0aW9uSWQgfVxuICAgICAgICB9IDogdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgY29uc3QgbG9jYXRpb24gPSBsb2NhdGlvbklkID8gYXdhaXQgcHJpc21hLmxvY2F0aW9uLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGxvY2F0aW9uSWQgfVxuICAgIH0pIDogbnVsbFxuICAgIFxuICAgIGZvciAoY29uc3QgcmVxIG9mIHByb2R1Y3RJZHMpIHtcbiAgICAgIGNvbnN0IHByb2R1Y3QgPSBwcm9kdWN0cy5maW5kKHAgPT4gcC5pZCA9PT0gcmVxLnByb2R1Y3RJZClcbiAgICAgIGlmICghcHJvZHVjdCkgY29udGludWVcbiAgICAgIFxuICAgICAgY29uc3Qga2V5ID0gcmVxLnZhcmlhbnRJZCA/IGAke3JlcS5wcm9kdWN0SWR9OiR7cmVxLnZhcmlhbnRJZH1gIDogcmVxLnByb2R1Y3RJZFxuICAgICAgXG4gICAgICBpZiAocmVxLnZhcmlhbnRJZCkge1xuICAgICAgICBjb25zdCB2YXJpYW50ID0gcHJvZHVjdC52YXJpYW50cy5maW5kKHYgPT4gdi5pZCA9PT0gcmVxLnZhcmlhbnRJZClcbiAgICAgICAgaWYgKHZhcmlhbnQpIHtcbiAgICAgICAgICBjb25zdCBpbnZMZXZlbCA9IHZhcmlhbnQuaW52ZW50b3J5TGV2ZWxzWzBdXG4gICAgICAgICAgcmVzdWx0LnNldChrZXksIG1hcFZhcmlhbnRUb0ludmVudG9yeSh2YXJpYW50LCBwcm9kdWN0LCBpbnZMZXZlbCwgbG9jYXRpb24pKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpbnZMZXZlbCA9IHByb2R1Y3QuaW52ZW50b3J5TGV2ZWxzLmZpbmQoaWwgPT4gIWlsLnZhcmlhbnRJZClcbiAgICAgICAgcmVzdWx0LnNldChrZXksIG1hcFByb2R1Y3RUb0ludmVudG9yeShwcm9kdWN0LCBpbnZMZXZlbCwgbG9jYXRpb24pKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgcXVhbnRpdHkgaXMgYXZhaWxhYmxlXG4gICAqL1xuICBhc3luYyBjaGVja0F2YWlsYWJpbGl0eShcbiAgICB0ZW5hbnRJZDogc3RyaW5nLFxuICAgIHByb2R1Y3RJZDogc3RyaW5nLFxuICAgIHF1YW50aXR5OiBudW1iZXIsXG4gICAgdmFyaWFudElkPzogc3RyaW5nLFxuICAgIGxvY2F0aW9uSWQ/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxJbnZlbnRvcnlDaGVja1Jlc3VsdD4ge1xuICAgIGNvbnN0IGludmVudG9yeSA9IGF3YWl0IHRoaXMuZ2V0UHJvZHVjdEludmVudG9yeSh0ZW5hbnRJZCwgcHJvZHVjdElkLCB2YXJpYW50SWQsIGxvY2F0aW9uSWQpXG4gICAgXG4gICAgaWYgKCFpbnZlbnRvcnkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHByb2R1Y3RJZCxcbiAgICAgICAgdmFyaWFudElkLFxuICAgICAgICByZXF1ZXN0ZWRRdWFudGl0eTogcXVhbnRpdHksXG4gICAgICAgIGF2YWlsYWJsZVF1YW50aXR5OiAwLFxuICAgICAgICBjYW5GdWxmaWxsOiBmYWxzZSxcbiAgICAgICAgc2hvcnRmYWxsOiBxdWFudGl0eSxcbiAgICAgICAgc3RhdHVzOiAnT1VUX09GX1NUT0NLJyxcbiAgICAgICAgbWVzc2FnZTogJ1Byb2R1Y3Qgbm90IGZvdW5kJ1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoIWludmVudG9yeS50cmFja0ludmVudG9yeSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcHJvZHVjdElkLFxuICAgICAgICB2YXJpYW50SWQsXG4gICAgICAgIHJlcXVlc3RlZFF1YW50aXR5OiBxdWFudGl0eSxcbiAgICAgICAgYXZhaWxhYmxlUXVhbnRpdHk6IEluZmluaXR5LFxuICAgICAgICBjYW5GdWxmaWxsOiB0cnVlLFxuICAgICAgICBzaG9ydGZhbGw6IDAsXG4gICAgICAgIHN0YXR1czogJ05PVF9UUkFDS0VEJyxcbiAgICAgICAgbWVzc2FnZTogJ0ludmVudG9yeSBub3QgdHJhY2tlZCBmb3IgdGhpcyBwcm9kdWN0J1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBhdmFpbGFibGUgPSBpbnZlbnRvcnkucXVhbnRpdHlBdmFpbGFibGVcbiAgICBjb25zdCBjYW5GdWxmaWxsID0gYXZhaWxhYmxlID49IHF1YW50aXR5IHx8IGludmVudG9yeS5hbGxvd05lZ2F0aXZlXG4gICAgXG4gICAgbGV0IHN0YXR1czogSW52ZW50b3J5Q2hlY2tSZXN1bHRbJ3N0YXR1cyddID0gJ0lOX1NUT0NLJ1xuICAgIGlmIChhdmFpbGFibGUgPD0gMCkgc3RhdHVzID0gJ09VVF9PRl9TVE9DSydcbiAgICBlbHNlIGlmIChhdmFpbGFibGUgPCBxdWFudGl0eSkgc3RhdHVzID0gJ0xPV19TVE9DSydcbiAgICBlbHNlIGlmIChpbnZlbnRvcnkuaXNMb3dTdG9jaykgc3RhdHVzID0gJ0xPV19TVE9DSydcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgcHJvZHVjdElkLFxuICAgICAgdmFyaWFudElkLFxuICAgICAgcmVxdWVzdGVkUXVhbnRpdHk6IHF1YW50aXR5LFxuICAgICAgYXZhaWxhYmxlUXVhbnRpdHk6IGF2YWlsYWJsZSxcbiAgICAgIGNhbkZ1bGZpbGwsXG4gICAgICBzaG9ydGZhbGw6IGNhbkZ1bGZpbGwgPyAwIDogcXVhbnRpdHkgLSBhdmFpbGFibGUsXG4gICAgICBzdGF0dXMsXG4gICAgICBtZXNzYWdlOiBjYW5GdWxmaWxsIFxuICAgICAgICA/IGAke2F2YWlsYWJsZX0gdW5pdHMgYXZhaWxhYmxlYFxuICAgICAgICA6IGBPbmx5ICR7YXZhaWxhYmxlfSB1bml0cyBhdmFpbGFibGUsIG5lZWQgJHtxdWFudGl0eX1gXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJhdGNoIGF2YWlsYWJpbGl0eSBjaGVja1xuICAgKi9cbiAgYXN5bmMgY2hlY2tCYXRjaEF2YWlsYWJpbGl0eShcbiAgICB0ZW5hbnRJZDogc3RyaW5nLFxuICAgIGl0ZW1zOiBCYXRjaEludmVudG9yeUNoZWNrLFxuICAgIGxvY2F0aW9uSWQ/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxCYXRjaEludmVudG9yeVJlc3VsdD4ge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIGl0ZW1zLml0ZW1zLm1hcChpdGVtID0+IFxuICAgICAgICB0aGlzLmNoZWNrQXZhaWxhYmlsaXR5KHRlbmFudElkLCBpdGVtLnByb2R1Y3RJZCwgaXRlbS5xdWFudGl0eSwgaXRlbS52YXJpYW50SWQsIGxvY2F0aW9uSWQpXG4gICAgICApXG4gICAgKVxuICAgIFxuICAgIGNvbnN0IHVuYXZhaWxhYmxlID0gcmVzdWx0cy5maWx0ZXIociA9PiAhci5jYW5GdWxmaWxsKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBhbGxBdmFpbGFibGU6IHVuYXZhaWxhYmxlLmxlbmd0aCA9PT0gMCxcbiAgICAgIHJlc3VsdHMsXG4gICAgICB1bmF2YWlsYWJsZUl0ZW1zOiB1bmF2YWlsYWJsZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZWFyY2ggcHJvZHVjdHMgd2l0aCBpbnZlbnRvcnlcbiAgICovXG4gIGFzeW5jIHNlYXJjaFByb2R1Y3RzKFxuICAgIHRlbmFudElkOiBzdHJpbmcsXG4gICAgcXVlcnk6IHN0cmluZyxcbiAgICBvcHRpb25zPzoge1xuICAgICAgaW5TdG9ja09ubHk/OiBib29sZWFuXG4gICAgICBjYXRlZ29yeUlkPzogc3RyaW5nXG4gICAgICBsaW1pdD86IG51bWJlclxuICAgICAgbG9jYXRpb25JZD86IHN0cmluZ1xuICAgIH1cbiAgKTogUHJvbWlzZTxQcm9kdWN0SW52ZW50b3J5W10+IHtcbiAgICBjb25zdCB3aGVyZTogUHJpc21hLlByb2R1Y3RXaGVyZUlucHV0ID0ge1xuICAgICAgdGVuYW50SWQsXG4gICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxuICAgICAgT1I6IFtcbiAgICAgICAgeyBuYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgIHsgc2t1OiB7IGNvbnRhaW5zOiBxdWVyeSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgIHsgYmFyY29kZTogeyBjb250YWluczogcXVlcnksIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9XG4gICAgICBdXG4gICAgfVxuICAgIFxuICAgIGlmIChvcHRpb25zPy5jYXRlZ29yeUlkKSB7XG4gICAgICB3aGVyZS5jYXRlZ29yeUlkID0gb3B0aW9ucy5jYXRlZ29yeUlkXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgcHJpc21hLnByb2R1Y3QuZmluZE1hbnkoe1xuICAgICAgd2hlcmUsXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGNhdGVnb3J5OiB0cnVlLFxuICAgICAgICBpbnZlbnRvcnlMZXZlbHM6IG9wdGlvbnM/LmxvY2F0aW9uSWQgPyB7XG4gICAgICAgICAgd2hlcmU6IHsgbG9jYXRpb25JZDogb3B0aW9ucy5sb2NhdGlvbklkLCB2YXJpYW50SWQ6IG51bGwgfVxuICAgICAgICB9IDoge1xuICAgICAgICAgIHdoZXJlOiB7IHZhcmlhbnRJZDogbnVsbCB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB0YWtlOiBvcHRpb25zPy5saW1pdCB8fCA1MFxuICAgIH0pXG4gICAgXG4gICAgY29uc3QgbG9jYXRpb24gPSBvcHRpb25zPy5sb2NhdGlvbklkID8gYXdhaXQgcHJpc21hLmxvY2F0aW9uLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IG9wdGlvbnMubG9jYXRpb25JZCB9XG4gICAgfSkgOiBudWxsXG4gICAgXG4gICAgbGV0IHJlc3VsdHMgPSBwcm9kdWN0cy5tYXAocHJvZHVjdCA9PiB7XG4gICAgICBjb25zdCBpbnZMZXZlbCA9IHByb2R1Y3QuaW52ZW50b3J5TGV2ZWxzWzBdXG4gICAgICByZXR1cm4gbWFwUHJvZHVjdFRvSW52ZW50b3J5KHByb2R1Y3QsIGludkxldmVsLCBsb2NhdGlvbilcbiAgICB9KVxuICAgIFxuICAgIGlmIChvcHRpb25zPy5pblN0b2NrT25seSkge1xuICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHAgPT4gcC5pc0luU3RvY2sgfHwgIXAudHJhY2tJbnZlbnRvcnkpXG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXN1bHRzXG4gIH1cblxuICAvKipcbiAgICogR2V0IGxvdyBzdG9jayBwcm9kdWN0c1xuICAgKi9cbiAgYXN5bmMgZ2V0TG93U3RvY2tQcm9kdWN0cyhcbiAgICB0ZW5hbnRJZDogc3RyaW5nLFxuICAgIGxvY2F0aW9uSWQ/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxQcm9kdWN0SW52ZW50b3J5W10+IHtcbiAgICBjb25zdCBpbnZlbnRvcnlMZXZlbHMgPSBhd2FpdCBwcmlzbWEuaW52ZW50b3J5TGV2ZWwuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdGVuYW50SWQsXG4gICAgICAgIC4uLihsb2NhdGlvbklkICYmIHsgbG9jYXRpb25JZCB9KSxcbiAgICAgICAgcXVhbnRpdHlBdmFpbGFibGU6IHtcbiAgICAgICAgICBsdGU6IHByaXNtYS5pbnZlbnRvcnlMZXZlbC5maWVsZHMucmVvcmRlclBvaW50XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHByb2R1Y3Q6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7IGNhdGVnb3J5OiB0cnVlIH1cbiAgICAgICAgfSxcbiAgICAgICAgdmFyaWFudDogdHJ1ZSxcbiAgICAgICAgbG9jYXRpb246IHRydWVcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHJldHVybiBpbnZlbnRvcnlMZXZlbHMubWFwKGlsID0+IHtcbiAgICAgIGlmIChpbC52YXJpYW50KSB7XG4gICAgICAgIHJldHVybiBtYXBWYXJpYW50VG9JbnZlbnRvcnkoaWwudmFyaWFudCwgaWwucHJvZHVjdCwgaWwsIGlsLmxvY2F0aW9uKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1hcFByb2R1Y3RUb0ludmVudG9yeShpbC5wcm9kdWN0LCBpbCwgaWwubG9jYXRpb24pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgaW52ZW50b3J5IHNuYXBzaG90IGZvciBvZmZsaW5lIGNhY2hlXG4gICAqL1xuICBhc3luYyBnZXRJbnZlbnRvcnlTbmFwc2hvdChcbiAgICB0ZW5hbnRJZDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBwcm9kdWN0SWRzPzogc3RyaW5nW11cbiAgICAgIGluY2x1ZGVaZXJvU3RvY2s/OiBib29sZWFuXG4gICAgICBsb2NhdGlvbklkPzogc3RyaW5nXG4gICAgfVxuICApOiBQcm9taXNlPFByb2R1Y3RJbnZlbnRvcnlbXT4ge1xuICAgIGNvbnN0IHdoZXJlOiBQcmlzbWEuUHJvZHVjdFdoZXJlSW5wdXQgPSB7XG4gICAgICB0ZW5hbnRJZCxcbiAgICAgIHN0YXR1czogJ0FDVElWRScsXG4gICAgICAuLi4ob3B0aW9ucz8ucHJvZHVjdElkcyAmJiB7IGlkOiB7IGluOiBvcHRpb25zLnByb2R1Y3RJZHMgfSB9KVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IHByaXNtYS5wcm9kdWN0LmZpbmRNYW55KHtcbiAgICAgIHdoZXJlLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBjYXRlZ29yeTogdHJ1ZSxcbiAgICAgICAgdmFyaWFudHM6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBpbnZlbnRvcnlMZXZlbHM6IG9wdGlvbnM/LmxvY2F0aW9uSWQgPyB7XG4gICAgICAgICAgICAgIHdoZXJlOiB7IGxvY2F0aW9uSWQ6IG9wdGlvbnMubG9jYXRpb25JZCB9XG4gICAgICAgICAgICB9IDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52ZW50b3J5TGV2ZWxzOiBvcHRpb25zPy5sb2NhdGlvbklkID8ge1xuICAgICAgICAgIHdoZXJlOiB7IGxvY2F0aW9uSWQ6IG9wdGlvbnMubG9jYXRpb25JZCB9XG4gICAgICAgIH0gOiB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICBjb25zdCBsb2NhdGlvbiA9IG9wdGlvbnM/LmxvY2F0aW9uSWQgPyBhd2FpdCBwcmlzbWEubG9jYXRpb24uZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogb3B0aW9ucy5sb2NhdGlvbklkIH1cbiAgICB9KSA6IG51bGxcbiAgICBcbiAgICBjb25zdCByZXN1bHRzOiBQcm9kdWN0SW52ZW50b3J5W10gPSBbXVxuICAgIFxuICAgIGZvciAoY29uc3QgcHJvZHVjdCBvZiBwcm9kdWN0cykge1xuICAgICAgLy8gQWRkIHByb2R1Y3QtbGV2ZWwgaW52ZW50b3J5XG4gICAgICBjb25zdCBwcm9kdWN0SW52ID0gcHJvZHVjdC5pbnZlbnRvcnlMZXZlbHMuZmluZChpbCA9PiAhaWwudmFyaWFudElkKVxuICAgICAgY29uc3QgaW52ID0gbWFwUHJvZHVjdFRvSW52ZW50b3J5KHByb2R1Y3QsIHByb2R1Y3RJbnYsIGxvY2F0aW9uKVxuICAgICAgXG4gICAgICBpZiAob3B0aW9ucz8uaW5jbHVkZVplcm9TdG9jayB8fCBpbnYucXVhbnRpdHlBdmFpbGFibGUgPiAwIHx8ICFpbnYudHJhY2tJbnZlbnRvcnkpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGludilcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQWRkIHZhcmlhbnQtbGV2ZWwgaW52ZW50b3J5XG4gICAgICBmb3IgKGNvbnN0IHZhcmlhbnQgb2YgcHJvZHVjdC52YXJpYW50cykge1xuICAgICAgICBjb25zdCB2YXJpYW50SW52ID0gdmFyaWFudC5pbnZlbnRvcnlMZXZlbHNbMF1cbiAgICAgICAgY29uc3QgdkludiA9IG1hcFZhcmlhbnRUb0ludmVudG9yeSh2YXJpYW50LCBwcm9kdWN0LCB2YXJpYW50SW52LCBsb2NhdGlvbilcbiAgICAgICAgXG4gICAgICAgIGlmIChvcHRpb25zPy5pbmNsdWRlWmVyb1N0b2NrIHx8IHZJbnYucXVhbnRpdHlBdmFpbGFibGUgPiAwIHx8ICF2SW52LnRyYWNrSW52ZW50b3J5KSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHZJbnYpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDVVNUT01FUiBTRVJWSUNFIChGb3IgbW9kdWxlIGNvbnN1bXB0aW9uKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1c3RvbWVyRGF0YSB7XG4gIGlkOiBzdHJpbmdcbiAgdGVuYW50SWQ6IHN0cmluZ1xuICBlbWFpbD86IHN0cmluZ1xuICBwaG9uZT86IHN0cmluZ1xuICBmaXJzdE5hbWU/OiBzdHJpbmdcbiAgbGFzdE5hbWU/OiBzdHJpbmdcbiAgZnVsbE5hbWU/OiBzdHJpbmdcbiAgY29tcGFueT86IHN0cmluZ1xuICB0YXhJZD86IHN0cmluZ1xuICBzdGF0dXM6ICdBQ1RJVkUnIHwgJ0lOQUNUSVZFJyB8ICdCTE9DS0VEJ1xuICBkZWZhdWx0QWRkcmVzc0lkPzogc3RyaW5nXG4gIHRhZ3M6IHN0cmluZ1tdXG4gIG5vdGVzPzogc3RyaW5nXG4gIHRvdGFsT3JkZXJzOiBudW1iZXJcbiAgdG90YWxTcGVudDogbnVtYmVyXG4gIGNyZWF0ZWRBdDogRGF0ZVxuICB1cGRhdGVkQXQ6IERhdGVcbn1cblxuZXhwb3J0IGNsYXNzIENvcmVDdXN0b21lclNlcnZpY2Uge1xuICAvKipcbiAgICogR2V0IGN1c3RvbWVyIGJ5IElEXG4gICAqL1xuICBhc3luYyBnZXRDdXN0b21lcih0ZW5hbnRJZDogc3RyaW5nLCBjdXN0b21lcklkOiBzdHJpbmcpOiBQcm9taXNlPEN1c3RvbWVyRGF0YSB8IG51bGw+IHtcbiAgICBjb25zdCBjdXN0b21lciA9IGF3YWl0IHByaXNtYS5jdXN0b21lci5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGN1c3RvbWVySWQsIHRlbmFudElkIH1cbiAgICB9KVxuICAgIFxuICAgIGlmICghY3VzdG9tZXIpIHJldHVybiBudWxsXG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBjdXN0b21lci5pZCxcbiAgICAgIHRlbmFudElkOiBjdXN0b21lci50ZW5hbnRJZCxcbiAgICAgIGVtYWlsOiBjdXN0b21lci5lbWFpbCB8fCB1bmRlZmluZWQsXG4gICAgICBwaG9uZTogY3VzdG9tZXIucGhvbmUgfHwgdW5kZWZpbmVkLFxuICAgICAgZmlyc3ROYW1lOiBjdXN0b21lci5maXJzdE5hbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgbGFzdE5hbWU6IGN1c3RvbWVyLmxhc3ROYW1lIHx8IHVuZGVmaW5lZCxcbiAgICAgIGZ1bGxOYW1lOiBjdXN0b21lci5mdWxsTmFtZSB8fCB1bmRlZmluZWQsXG4gICAgICBjb21wYW55OiBjdXN0b21lci5jb21wYW55IHx8IHVuZGVmaW5lZCxcbiAgICAgIHRheElkOiBjdXN0b21lci50YXhJZCB8fCB1bmRlZmluZWQsXG4gICAgICBzdGF0dXM6IGN1c3RvbWVyLnN0YXR1cyxcbiAgICAgIGRlZmF1bHRBZGRyZXNzSWQ6IGN1c3RvbWVyLmRlZmF1bHRBZGRyZXNzSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgdGFnczogY3VzdG9tZXIudGFncyB8fCBbXSxcbiAgICAgIG5vdGVzOiBjdXN0b21lci5ub3RlcyB8fCB1bmRlZmluZWQsXG4gICAgICB0b3RhbE9yZGVyczogY3VzdG9tZXIudG90YWxPcmRlcnMsXG4gICAgICB0b3RhbFNwZW50OiBkZWNpbWFsVG9OdW1iZXIoY3VzdG9tZXIudG90YWxTcGVudCksXG4gICAgICBjcmVhdGVkQXQ6IGN1c3RvbWVyLmNyZWF0ZWRBdCxcbiAgICAgIHVwZGF0ZWRBdDogY3VzdG9tZXIudXBkYXRlZEF0XG4gICAgfVxuICB9XG4gIFxuICAvKipcbiAgICogU2VhcmNoIGN1c3RvbWVyc1xuICAgKi9cbiAgYXN5bmMgc2VhcmNoQ3VzdG9tZXJzKFxuICAgIHRlbmFudElkOiBzdHJpbmcsXG4gICAgcXVlcnk6IHN0cmluZyxcbiAgICBsaW1pdD86IG51bWJlclxuICApOiBQcm9taXNlPEN1c3RvbWVyRGF0YVtdPiB7XG4gICAgY29uc3QgY3VzdG9tZXJzID0gYXdhaXQgcHJpc21hLmN1c3RvbWVyLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHRlbmFudElkLFxuICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxuICAgICAgICBPUjogW1xuICAgICAgICAgIHsgZW1haWw6IHsgY29udGFpbnM6IHF1ZXJ5LCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgICB7IHBob25lOiB7IGNvbnRhaW5zOiBxdWVyeSB9IH0sXG4gICAgICAgICAgeyBmdWxsTmFtZTogeyBjb250YWluczogcXVlcnksIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgIHsgZmlyc3ROYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgICAgeyBsYXN0TmFtZTogeyBjb250YWluczogcXVlcnksIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB0YWtlOiBsaW1pdCB8fCAyMFxuICAgIH0pXG4gICAgXG4gICAgcmV0dXJuIGN1c3RvbWVycy5tYXAoYyA9PiAoe1xuICAgICAgaWQ6IGMuaWQsXG4gICAgICB0ZW5hbnRJZDogYy50ZW5hbnRJZCxcbiAgICAgIGVtYWlsOiBjLmVtYWlsIHx8IHVuZGVmaW5lZCxcbiAgICAgIHBob25lOiBjLnBob25lIHx8IHVuZGVmaW5lZCxcbiAgICAgIGZpcnN0TmFtZTogYy5maXJzdE5hbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgbGFzdE5hbWU6IGMubGFzdE5hbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgZnVsbE5hbWU6IGMuZnVsbE5hbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgY29tcGFueTogYy5jb21wYW55IHx8IHVuZGVmaW5lZCxcbiAgICAgIHRheElkOiBjLnRheElkIHx8IHVuZGVmaW5lZCxcbiAgICAgIHN0YXR1czogYy5zdGF0dXMsXG4gICAgICBkZWZhdWx0QWRkcmVzc0lkOiBjLmRlZmF1bHRBZGRyZXNzSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgdGFnczogYy50YWdzIHx8IFtdLFxuICAgICAgbm90ZXM6IGMubm90ZXMgfHwgdW5kZWZpbmVkLFxuICAgICAgdG90YWxPcmRlcnM6IGMudG90YWxPcmRlcnMsXG4gICAgICB0b3RhbFNwZW50OiBkZWNpbWFsVG9OdW1iZXIoYy50b3RhbFNwZW50KSxcbiAgICAgIGNyZWF0ZWRBdDogYy5jcmVhdGVkQXQsXG4gICAgICB1cGRhdGVkQXQ6IGMudXBkYXRlZEF0XG4gICAgfSkpXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTE9DQVRJT04gU0VSVklDRSAoRm9yIG1vZHVsZSBjb25zdW1wdGlvbilcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBMb2NhdGlvbkRhdGEge1xuICBpZDogc3RyaW5nXG4gIHRlbmFudElkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIGNvZGU/OiBzdHJpbmdcbiAgdHlwZTogJ1NUT1JFJyB8ICdXQVJFSE9VU0UnIHwgJ0ZVTEZJTExNRU5UX0NFTlRFUicgfCAnUE9QVVAnXG4gIGFkZHJlc3M/OiB7XG4gICAgc3RyZWV0MT86IHN0cmluZ1xuICAgIHN0cmVldDI/OiBzdHJpbmdcbiAgICBjaXR5Pzogc3RyaW5nXG4gICAgc3RhdGU/OiBzdHJpbmdcbiAgICBwb3N0YWxDb2RlPzogc3RyaW5nXG4gICAgY291bnRyeT86IHN0cmluZ1xuICB9XG4gIHBob25lPzogc3RyaW5nXG4gIGVtYWlsPzogc3RyaW5nXG4gIGlzQWN0aXZlOiBib29sZWFuXG4gIGlzRGVmYXVsdDogYm9vbGVhblxuICB0aW1lem9uZT86IHN0cmluZ1xuICBvcGVyYXRpbmdIb3Vycz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG59XG5cbmV4cG9ydCBjbGFzcyBDb3JlTG9jYXRpb25TZXJ2aWNlIHtcbiAgLyoqXG4gICAqIEdldCBsb2NhdGlvbiBieSBJRFxuICAgKi9cbiAgYXN5bmMgZ2V0TG9jYXRpb24odGVuYW50SWQ6IHN0cmluZywgbG9jYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxMb2NhdGlvbkRhdGEgfCBudWxsPiB7XG4gICAgY29uc3QgbG9jYXRpb24gPSBhd2FpdCBwcmlzbWEubG9jYXRpb24uZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7IGlkOiBsb2NhdGlvbklkLCB0ZW5hbnRJZCB9XG4gICAgfSlcbiAgICBcbiAgICBpZiAoIWxvY2F0aW9uKSByZXR1cm4gbnVsbFxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBpZDogbG9jYXRpb24uaWQsXG4gICAgICB0ZW5hbnRJZDogbG9jYXRpb24udGVuYW50SWQsXG4gICAgICBuYW1lOiBsb2NhdGlvbi5uYW1lLFxuICAgICAgY29kZTogbG9jYXRpb24uY29kZSB8fCB1bmRlZmluZWQsXG4gICAgICB0eXBlOiBsb2NhdGlvbi50eXBlLFxuICAgICAgYWRkcmVzczoge1xuICAgICAgICBzdHJlZXQxOiBsb2NhdGlvbi5hZGRyZXNzTGluZTEgfHwgdW5kZWZpbmVkLFxuICAgICAgICBzdHJlZXQyOiBsb2NhdGlvbi5hZGRyZXNzTGluZTIgfHwgdW5kZWZpbmVkLFxuICAgICAgICBjaXR5OiBsb2NhdGlvbi5jaXR5IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgc3RhdGU6IGxvY2F0aW9uLnN0YXRlIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgcG9zdGFsQ29kZTogbG9jYXRpb24ucG9zdGFsQ29kZSB8fCB1bmRlZmluZWQsXG4gICAgICAgIGNvdW50cnk6IGxvY2F0aW9uLmNvdW50cnkgfHwgdW5kZWZpbmVkXG4gICAgICB9LFxuICAgICAgcGhvbmU6IGxvY2F0aW9uLnBob25lIHx8IHVuZGVmaW5lZCxcbiAgICAgIGVtYWlsOiBsb2NhdGlvbi5lbWFpbCB8fCB1bmRlZmluZWQsXG4gICAgICBpc0FjdGl2ZTogbG9jYXRpb24uaXNBY3RpdmUsXG4gICAgICBpc0RlZmF1bHQ6IGxvY2F0aW9uLmlzRGVmYXVsdCxcbiAgICAgIHRpbWV6b25lOiBsb2NhdGlvbi50aW1lem9uZSB8fCB1bmRlZmluZWQsXG4gICAgICBvcGVyYXRpbmdIb3VyczogbG9jYXRpb24ub3BlcmF0aW5nSG91cnMgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfHwgdW5kZWZpbmVkXG4gICAgfVxuICB9XG4gIFxuICAvKipcbiAgICogR2V0IGFsbCBsb2NhdGlvbnMgZm9yIHRlbmFudFxuICAgKi9cbiAgYXN5bmMgZ2V0TG9jYXRpb25zKHRlbmFudElkOiBzdHJpbmcsIGFjdGl2ZU9ubHk/OiBib29sZWFuKTogUHJvbWlzZTxMb2NhdGlvbkRhdGFbXT4ge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGF3YWl0IHByaXNtYS5sb2NhdGlvbi5maW5kTWFueSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICB0ZW5hbnRJZCxcbiAgICAgICAgLi4uKGFjdGl2ZU9ubHkgJiYgeyBpc0FjdGl2ZTogdHJ1ZSB9KVxuICAgICAgfSxcbiAgICAgIG9yZGVyQnk6IFtcbiAgICAgICAgeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LFxuICAgICAgICB7IG5hbWU6ICdhc2MnIH1cbiAgICAgIF1cbiAgICB9KVxuICAgIFxuICAgIHJldHVybiBsb2NhdGlvbnMubWFwKGwgPT4gKHtcbiAgICAgIGlkOiBsLmlkLFxuICAgICAgdGVuYW50SWQ6IGwudGVuYW50SWQsXG4gICAgICBuYW1lOiBsLm5hbWUsXG4gICAgICBjb2RlOiBsLmNvZGUgfHwgdW5kZWZpbmVkLFxuICAgICAgdHlwZTogbC50eXBlLFxuICAgICAgYWRkcmVzczoge1xuICAgICAgICBzdHJlZXQxOiBsLmFkZHJlc3NMaW5lMSB8fCB1bmRlZmluZWQsXG4gICAgICAgIHN0cmVldDI6IGwuYWRkcmVzc0xpbmUyIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgY2l0eTogbC5jaXR5IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgc3RhdGU6IGwuc3RhdGUgfHwgdW5kZWZpbmVkLFxuICAgICAgICBwb3N0YWxDb2RlOiBsLnBvc3RhbENvZGUgfHwgdW5kZWZpbmVkLFxuICAgICAgICBjb3VudHJ5OiBsLmNvdW50cnkgfHwgdW5kZWZpbmVkXG4gICAgICB9LFxuICAgICAgcGhvbmU6IGwucGhvbmUgfHwgdW5kZWZpbmVkLFxuICAgICAgZW1haWw6IGwuZW1haWwgfHwgdW5kZWZpbmVkLFxuICAgICAgaXNBY3RpdmU6IGwuaXNBY3RpdmUsXG4gICAgICBpc0RlZmF1bHQ6IGwuaXNEZWZhdWx0LFxuICAgICAgdGltZXpvbmU6IGwudGltZXpvbmUgfHwgdW5kZWZpbmVkLFxuICAgICAgb3BlcmF0aW5nSG91cnM6IGwub3BlcmF0aW5nSG91cnMgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfHwgdW5kZWZpbmVkXG4gICAgfSkpXG4gIH1cbiAgXG4gIC8qKlxuICAgKiBHZXQgZGVmYXVsdCBsb2NhdGlvbiBmb3IgdGVuYW50XG4gICAqL1xuICBhc3luYyBnZXREZWZhdWx0TG9jYXRpb24odGVuYW50SWQ6IHN0cmluZyk6IFByb21pc2U8TG9jYXRpb25EYXRhIHwgbnVsbD4ge1xuICAgIGNvbnN0IGxvY2F0aW9uID0gYXdhaXQgcHJpc21hLmxvY2F0aW9uLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZTogeyB0ZW5hbnRJZCwgaXNEZWZhdWx0OiB0cnVlLCBpc0FjdGl2ZTogdHJ1ZSB9XG4gICAgfSlcbiAgICBcbiAgICBpZiAoIWxvY2F0aW9uKSByZXR1cm4gbnVsbFxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBpZDogbG9jYXRpb24uaWQsXG4gICAgICB0ZW5hbnRJZDogbG9jYXRpb24udGVuYW50SWQsXG4gICAgICBuYW1lOiBsb2NhdGlvbi5uYW1lLFxuICAgICAgY29kZTogbG9jYXRpb24uY29kZSB8fCB1bmRlZmluZWQsXG4gICAgICB0eXBlOiBsb2NhdGlvbi50eXBlLFxuICAgICAgYWRkcmVzczoge1xuICAgICAgICBzdHJlZXQxOiBsb2NhdGlvbi5hZGRyZXNzTGluZTEgfHwgdW5kZWZpbmVkLFxuICAgICAgICBzdHJlZXQyOiBsb2NhdGlvbi5hZGRyZXNzTGluZTIgfHwgdW5kZWZpbmVkLFxuICAgICAgICBjaXR5OiBsb2NhdGlvbi5jaXR5IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgc3RhdGU6IGxvY2F0aW9uLnN0YXRlIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgcG9zdGFsQ29kZTogbG9jYXRpb24ucG9zdGFsQ29kZSB8fCB1bmRlZmluZWQsXG4gICAgICAgIGNvdW50cnk6IGxvY2F0aW9uLmNvdW50cnkgfHwgdW5kZWZpbmVkXG4gICAgICB9LFxuICAgICAgcGhvbmU6IGxvY2F0aW9uLnBob25lIHx8IHVuZGVmaW5lZCxcbiAgICAgIGVtYWlsOiBsb2NhdGlvbi5lbWFpbCB8fCB1bmRlZmluZWQsXG4gICAgICBpc0FjdGl2ZTogbG9jYXRpb24uaXNBY3RpdmUsXG4gICAgICBpc0RlZmF1bHQ6IGxvY2F0aW9uLmlzRGVmYXVsdCxcbiAgICAgIHRpbWV6b25lOiBsb2NhdGlvbi50aW1lem9uZSB8fCB1bmRlZmluZWQsXG4gICAgICBvcGVyYXRpbmdIb3VyczogbG9jYXRpb24ub3BlcmF0aW5nSG91cnMgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfHwgdW5kZWZpbmVkXG4gICAgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNJTkdMRVRPTiBJTlNUQU5DRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IGNvcmVJbnZlbnRvcnlTZXJ2aWNlID0gbmV3IENvcmVJbnZlbnRvcnlTZXJ2aWNlKClcbmV4cG9ydCBjb25zdCBjb3JlQ3VzdG9tZXJTZXJ2aWNlID0gbmV3IENvcmVDdXN0b21lclNlcnZpY2UoKVxuZXhwb3J0IGNvbnN0IGNvcmVMb2NhdGlvblNlcnZpY2UgPSBuZXcgQ29yZUxvY2F0aW9uU2VydmljZSgpXG4iXSwibmFtZXMiOlsicHJpc21hIiwiZGVjaW1hbFRvTnVtYmVyIiwidmFsIiwiTnVtYmVyIiwibWFwUHJvZHVjdFRvSW52ZW50b3J5IiwicHJvZHVjdCIsImludmVudG9yeUxldmVsIiwibG9jYXRpb24iLCJxdWFudGl0eU9uSGFuZCIsInF1YW50aXR5UmVzZXJ2ZWQiLCJxdWFudGl0eUF2YWlsYWJsZSIsInJlb3JkZXJQb2ludCIsInByb2R1Y3RJZCIsImlkIiwidmFyaWFudElkIiwidW5kZWZpbmVkIiwic2t1IiwibmFtZSIsImJhcmNvZGUiLCJwcmljZSIsImNvc3RQcmljZSIsImNvbXBhcmVBdFByaWNlIiwibG93U3RvY2tUaHJlc2hvbGQiLCJvdXRPZlN0b2NrVGhyZXNob2xkIiwiaXNJblN0b2NrIiwiaXNMb3dTdG9jayIsImFsbG93TmVnYXRpdmUiLCJhbGxvd0JhY2tvcmRlciIsInRyYWNrSW52ZW50b3J5IiwibG9jYXRpb25JZCIsImxvY2F0aW9uTmFtZSIsImNhdGVnb3J5SWQiLCJjYXRlZ29yeU5hbWUiLCJjYXRlZ29yeSIsImxhc3RVcGRhdGVkIiwidXBkYXRlZEF0IiwibGFzdFNvbGRBdCIsIm1hcFZhcmlhbnRUb0ludmVudG9yeSIsInZhcmlhbnQiLCJDb3JlSW52ZW50b3J5U2VydmljZSIsImdldFByb2R1Y3RJbnZlbnRvcnkiLCJ0ZW5hbnRJZCIsInByb2R1Y3RWYXJpYW50IiwiZmluZEZpcnN0Iiwid2hlcmUiLCJpbmNsdWRlIiwiaW52ZW50b3J5TGV2ZWxzIiwiZmluZFVuaXF1ZSIsImdldE11bHRpcGxlUHJvZHVjdEludmVudG9yeSIsInByb2R1Y3RJZHMiLCJyZXN1bHQiLCJNYXAiLCJwcm9kdWN0SWRMaXN0IiwiU2V0IiwibWFwIiwicCIsInByb2R1Y3RzIiwiZmluZE1hbnkiLCJpbiIsInZhcmlhbnRzIiwicmVxIiwiZmluZCIsImtleSIsInYiLCJpbnZMZXZlbCIsInNldCIsImlsIiwiY2hlY2tBdmFpbGFiaWxpdHkiLCJxdWFudGl0eSIsImludmVudG9yeSIsInJlcXVlc3RlZFF1YW50aXR5IiwiYXZhaWxhYmxlUXVhbnRpdHkiLCJjYW5GdWxmaWxsIiwic2hvcnRmYWxsIiwic3RhdHVzIiwibWVzc2FnZSIsIkluZmluaXR5IiwiYXZhaWxhYmxlIiwiY2hlY2tCYXRjaEF2YWlsYWJpbGl0eSIsIml0ZW1zIiwicmVzdWx0cyIsIlByb21pc2UiLCJhbGwiLCJpdGVtIiwidW5hdmFpbGFibGUiLCJmaWx0ZXIiLCJyIiwiYWxsQXZhaWxhYmxlIiwibGVuZ3RoIiwidW5hdmFpbGFibGVJdGVtcyIsInNlYXJjaFByb2R1Y3RzIiwicXVlcnkiLCJvcHRpb25zIiwiT1IiLCJjb250YWlucyIsIm1vZGUiLCJ0YWtlIiwibGltaXQiLCJpblN0b2NrT25seSIsImdldExvd1N0b2NrUHJvZHVjdHMiLCJsdGUiLCJmaWVsZHMiLCJnZXRJbnZlbnRvcnlTbmFwc2hvdCIsInByb2R1Y3RJbnYiLCJpbnYiLCJpbmNsdWRlWmVyb1N0b2NrIiwicHVzaCIsInZhcmlhbnRJbnYiLCJ2SW52IiwiQ29yZUN1c3RvbWVyU2VydmljZSIsImdldEN1c3RvbWVyIiwiY3VzdG9tZXJJZCIsImN1c3RvbWVyIiwiZW1haWwiLCJwaG9uZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZnVsbE5hbWUiLCJjb21wYW55IiwidGF4SWQiLCJkZWZhdWx0QWRkcmVzc0lkIiwidGFncyIsIm5vdGVzIiwidG90YWxPcmRlcnMiLCJ0b3RhbFNwZW50IiwiY3JlYXRlZEF0Iiwic2VhcmNoQ3VzdG9tZXJzIiwiY3VzdG9tZXJzIiwiYyIsIkNvcmVMb2NhdGlvblNlcnZpY2UiLCJnZXRMb2NhdGlvbiIsImNvZGUiLCJ0eXBlIiwiYWRkcmVzcyIsInN0cmVldDEiLCJhZGRyZXNzTGluZTEiLCJzdHJlZXQyIiwiYWRkcmVzc0xpbmUyIiwiY2l0eSIsInN0YXRlIiwicG9zdGFsQ29kZSIsImNvdW50cnkiLCJpc0FjdGl2ZSIsImlzRGVmYXVsdCIsInRpbWV6b25lIiwib3BlcmF0aW5nSG91cnMiLCJnZXRMb2NhdGlvbnMiLCJhY3RpdmVPbmx5IiwibG9jYXRpb25zIiwib3JkZXJCeSIsImwiLCJnZXREZWZhdWx0TG9jYXRpb24iLCJjb3JlSW52ZW50b3J5U2VydmljZSIsImNvcmVDdXN0b21lclNlcnZpY2UiLCJjb3JlTG9jYXRpb25TZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/core-services.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PARTNER_SCOPED_MODELS: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.PARTNER_SCOPED_MODELS),\n/* harmony export */   PLATFORM_MODELS: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.PLATFORM_MODELS),\n/* harmony export */   TENANT_SCOPED_MODELS: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.TENANT_SCOPED_MODELS),\n/* harmony export */   TenantIsolationError: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.TenantIsolationError),\n/* harmony export */   clearViolationLogs: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.clearViolationLogs),\n/* harmony export */   createPartnerContext: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.createPartnerContext),\n/* harmony export */   createTenantContext: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.createTenantContext),\n/* harmony export */   getViolationLogs: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.getViolationLogs),\n/* harmony export */   isPartnerScopedModel: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.isPartnerScopedModel),\n/* harmony export */   isTenantScopedModel: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.isTenantScopedModel),\n/* harmony export */   logViolation: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.logViolation),\n/* harmony export */   prisma: () => (/* binding */ prisma),\n/* harmony export */   validatePartnerAccess: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.validatePartnerAccess),\n/* harmony export */   validateTenantAccess: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.validateTenantAccess),\n/* harmony export */   withPartnerData: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withPartnerData),\n/* harmony export */   withPartnerFilter: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withPartnerFilter),\n/* harmony export */   withTenantData: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withTenantData),\n/* harmony export */   withTenantFilter: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withTenantFilter)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tenant-isolation */ \"(rsc)/./src/lib/tenant-isolation.ts\");\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) globalForPrisma.prisma = prisma;\n// Re-export tenant isolation utilities\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUMvREksS0FBS0MsS0FBeUIsR0FBZ0I7UUFBQztRQUFTO0tBQU8sR0FBRyxDQUFTO0FBQzdFLEdBQUU7QUFFRixJQUFJQSxJQUF5QixFQUFjSixnQkFBZ0JFLE1BQU0sR0FBR0E7QUFFcEUsdUNBQXVDO0FBd0JaIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Fhcy1jb3JlLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCh7XG4gIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBbJ2Vycm9yJywgJ3dhcm4nXSA6IFsnZXJyb3InXSxcbn0pXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXG5cbi8vIFJlLWV4cG9ydCB0ZW5hbnQgaXNvbGF0aW9uIHV0aWxpdGllc1xuZXhwb3J0IHtcbiAgdmFsaWRhdGVUZW5hbnRBY2Nlc3MsXG4gIHZhbGlkYXRlUGFydG5lckFjY2VzcyxcbiAgY3JlYXRlVGVuYW50Q29udGV4dCxcbiAgY3JlYXRlUGFydG5lckNvbnRleHQsXG4gIHdpdGhUZW5hbnRGaWx0ZXIsXG4gIHdpdGhUZW5hbnREYXRhLFxuICB3aXRoUGFydG5lckZpbHRlcixcbiAgd2l0aFBhcnRuZXJEYXRhLFxuICBUZW5hbnRJc29sYXRpb25FcnJvcixcbiAgaXNUZW5hbnRTY29wZWRNb2RlbCxcbiAgaXNQYXJ0bmVyU2NvcGVkTW9kZWwsXG4gIGdldFZpb2xhdGlvbkxvZ3MsXG4gIGNsZWFyVmlvbGF0aW9uTG9ncyxcbiAgbG9nVmlvbGF0aW9uLFxuICBURU5BTlRfU0NPUEVEX01PREVMUyxcbiAgUEFSVE5FUl9TQ09QRURfTU9ERUxTLFxuICBQTEFURk9STV9NT0RFTFMsXG4gIHR5cGUgVGVuYW50Q29udGV4dCxcbiAgdHlwZSBQYXJ0bmVyQ29udGV4dCxcbiAgdHlwZSBUZW5hbnRTY29wZWRNb2RlbCxcbiAgdHlwZSBQYXJ0bmVyU2NvcGVkTW9kZWwsXG4gIHR5cGUgUGxhdGZvcm1Nb2RlbFxufSBmcm9tICcuL3RlbmFudC1pc29sYXRpb24nXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsImxvZyIsInByb2Nlc3MiLCJ2YWxpZGF0ZVRlbmFudEFjY2VzcyIsInZhbGlkYXRlUGFydG5lckFjY2VzcyIsImNyZWF0ZVRlbmFudENvbnRleHQiLCJjcmVhdGVQYXJ0bmVyQ29udGV4dCIsIndpdGhUZW5hbnRGaWx0ZXIiLCJ3aXRoVGVuYW50RGF0YSIsIndpdGhQYXJ0bmVyRmlsdGVyIiwid2l0aFBhcnRuZXJEYXRhIiwiVGVuYW50SXNvbGF0aW9uRXJyb3IiLCJpc1RlbmFudFNjb3BlZE1vZGVsIiwiaXNQYXJ0bmVyU2NvcGVkTW9kZWwiLCJnZXRWaW9sYXRpb25Mb2dzIiwiY2xlYXJWaW9sYXRpb25Mb2dzIiwibG9nVmlvbGF0aW9uIiwiVEVOQU5UX1NDT1BFRF9NT0RFTFMiLCJQQVJUTkVSX1NDT1BFRF9NT0RFTFMiLCJQTEFURk9STV9NT0RFTFMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/tenant-isolation.ts":
/*!*************************************!*\
  !*** ./src/lib/tenant-isolation.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PARTNER_SCOPED_MODELS: () => (/* binding */ PARTNER_SCOPED_MODELS),\n/* harmony export */   PLATFORM_MODELS: () => (/* binding */ PLATFORM_MODELS),\n/* harmony export */   TENANT_SCOPED_MODELS: () => (/* binding */ TENANT_SCOPED_MODELS),\n/* harmony export */   TenantIsolationError: () => (/* binding */ TenantIsolationError),\n/* harmony export */   clearViolationLogs: () => (/* binding */ clearViolationLogs),\n/* harmony export */   createPartnerContext: () => (/* binding */ createPartnerContext),\n/* harmony export */   createTenantContext: () => (/* binding */ createTenantContext),\n/* harmony export */   getViolationLogs: () => (/* binding */ getViolationLogs),\n/* harmony export */   isPartnerScopedModel: () => (/* binding */ isPartnerScopedModel),\n/* harmony export */   isTenantScopedModel: () => (/* binding */ isTenantScopedModel),\n/* harmony export */   logViolation: () => (/* binding */ logViolation),\n/* harmony export */   validatePartnerAccess: () => (/* binding */ validatePartnerAccess),\n/* harmony export */   validateTenantAccess: () => (/* binding */ validateTenantAccess),\n/* harmony export */   withPartnerData: () => (/* binding */ withPartnerData),\n/* harmony export */   withPartnerFilter: () => (/* binding */ withPartnerFilter),\n/* harmony export */   withTenantData: () => (/* binding */ withTenantData),\n/* harmony export */   withTenantFilter: () => (/* binding */ withTenantFilter)\n/* harmony export */ });\n/**\n * Tenant Isolation Enforcement\n * \n * This module provides strict tenant data isolation at the database level.\n * Instead of Prisma middleware (which has async context issues), this uses\n * application-level validation before queries are executed.\n * \n * Features:\n * - Pre-query validation functions\n * - SUPER_ADMIN bypass with explicit flag\n * - Violation logging and hard failure\n * - Safe query builders that enforce tenant scoping\n */ // Models that require tenant isolation (tenant-scoped)\nconst TENANT_SCOPED_MODELS = [\n    \"TenantMembership\",\n    \"TenantDomain\",\n    \"AuditLog\"\n];\n// Models that require partner isolation (partner-scoped)\n// These are separate from tenant isolation - partners are platform-level\nconst PARTNER_SCOPED_MODELS = [\n    \"PartnerUser\",\n    \"PartnerAgreement\",\n    \"PartnerReferralCode\",\n    \"PartnerReferral\",\n    \"PartnerEarning\"\n];\n// Platform-level models (no isolation, Super Admin only)\nconst PLATFORM_MODELS = [\n    \"Partner\",\n    \"User\",\n    \"Tenant\",\n    \"Session\",\n    \"MagicLink\"\n];\nconst violations = [];\nconst MAX_VIOLATION_LOGS = 1000;\nfunction logViolation(violation) {\n    const log = {\n        ...violation,\n        timestamp: new Date()\n    };\n    violations.push(log);\n    if (violations.length > MAX_VIOLATION_LOGS) {\n        violations.shift();\n    }\n    console.error(\"[TENANT ISOLATION VIOLATION]\", JSON.stringify(log, null, 2));\n}\nfunction getViolationLogs() {\n    return [\n        ...violations\n    ];\n}\nfunction clearViolationLogs() {\n    violations.length = 0;\n}\n/**\n * Tenant Isolation Error\n */ class TenantIsolationError extends Error {\n    constructor(message, model, action, context){\n        super(message);\n        this.model = model;\n        this.action = action;\n        this.context = context;\n        this.name = \"TenantIsolationError\";\n    }\n}\n/**\n * Check if a model is tenant-scoped\n */ function isTenantScopedModel(model) {\n    return TENANT_SCOPED_MODELS.includes(model);\n}\n/**\n * Validate tenant context before executing a query\n * This should be called before any tenant-scoped database operation\n */ function validateTenantAccess(model, action, context, queryTenantId) {\n    // Skip validation for global models\n    if (!isTenantScopedModel(model)) {\n        return;\n    }\n    // Allow explicit bypass (for migrations, admin tools, etc.)\n    if (context?.bypassIsolation === true) {\n        if (!context.isSuperAdmin) {\n            const reason = \"Bypass isolation attempted without SUPER_ADMIN role\";\n            logViolation({\n                model,\n                action,\n                context,\n                query: {\n                    queryTenantId\n                },\n                reason\n            });\n            throw new TenantIsolationError(reason, model, action, context);\n        }\n        return;\n    }\n    // SUPER_ADMIN can access all data\n    if (context?.isSuperAdmin) {\n        return;\n    }\n    // No context = violation\n    if (!context) {\n        const reason = \"No tenant context provided for tenant-scoped query\";\n        logViolation({\n            model,\n            action,\n            context,\n            query: {\n                queryTenantId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n    // No tenantId in context = violation\n    if (!context.tenantId) {\n        const reason = \"No tenantId in context for tenant-scoped query\";\n        logViolation({\n            model,\n            action,\n            context,\n            query: {\n                queryTenantId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n    // If query specifies a tenantId, it must match context\n    if (queryTenantId && queryTenantId !== context.tenantId) {\n        const reason = `Cross-tenant access attempt: query tenantId (${queryTenantId}) != context tenantId (${context.tenantId})`;\n        logViolation({\n            model,\n            action,\n            context,\n            query: {\n                queryTenantId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n}\n/**\n * Create a tenant context from user session\n */ function createTenantContext(tenantId, userId, isSuperAdmin, bypassIsolation = false) {\n    return {\n        tenantId,\n        userId,\n        isSuperAdmin,\n        bypassIsolation\n    };\n}\n/**\n * Create a partner context from user session\n */ function createPartnerContext(partnerId, userId, isSuperAdmin, isPartnerOwner = false, isPartnerAdmin = false, bypassIsolation = false) {\n    return {\n        partnerId,\n        userId,\n        isSuperAdmin,\n        isPartnerOwner,\n        isPartnerAdmin,\n        bypassIsolation\n    };\n}\n/**\n * Ensure a WHERE clause includes the correct tenantId\n */ function withTenantFilter(where, tenantId) {\n    return {\n        ...where,\n        tenantId\n    };\n}\n/**\n * Ensure data being created includes the correct tenantId\n */ function withTenantData(data, tenantId) {\n    return {\n        ...data,\n        tenantId\n    };\n}\n/**\n * Check if a model is partner-scoped\n */ function isPartnerScopedModel(model) {\n    return PARTNER_SCOPED_MODELS.includes(model);\n}\n/**\n * Validate partner context before executing a query\n * This should be called before any partner-scoped database operation\n */ function validatePartnerAccess(model, action, context, queryPartnerId) {\n    // Skip validation for non-partner models\n    if (!isPartnerScopedModel(model)) {\n        return;\n    }\n    // Allow explicit bypass (for migrations, admin tools, etc.)\n    if (context?.bypassIsolation === true) {\n        if (!context.isSuperAdmin) {\n            const reason = \"Partner bypass isolation attempted without SUPER_ADMIN role\";\n            logViolation({\n                model,\n                action,\n                context: context,\n                query: {\n                    queryPartnerId\n                },\n                reason\n            });\n            throw new TenantIsolationError(reason, model, action, context);\n        }\n        return;\n    }\n    // SUPER_ADMIN can access all partner data\n    if (context?.isSuperAdmin) {\n        return;\n    }\n    // No context = violation\n    if (!context) {\n        const reason = \"No partner context provided for partner-scoped query\";\n        logViolation({\n            model,\n            action,\n            context: null,\n            query: {\n                queryPartnerId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, null);\n    }\n    // No partnerId in context = violation\n    if (!context.partnerId) {\n        const reason = \"No partnerId in context for partner-scoped query\";\n        logViolation({\n            model,\n            action,\n            context: context,\n            query: {\n                queryPartnerId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n    // If query specifies a partnerId, it must match context\n    if (queryPartnerId && queryPartnerId !== context.partnerId) {\n        const reason = `Cross-partner access attempt: query partnerId (${queryPartnerId}) != context partnerId (${context.partnerId})`;\n        logViolation({\n            model,\n            action,\n            context: context,\n            query: {\n                queryPartnerId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n}\n/**\n * Ensure a WHERE clause includes the correct partnerId\n */ function withPartnerFilter(where, partnerId) {\n    return {\n        ...where,\n        partnerId\n    };\n}\n/**\n * Ensure data being created includes the correct partnerId\n */ function withPartnerData(data, partnerId) {\n    return {\n        ...data,\n        partnerId\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UE4sU0FBaUI7SUFFakIsT0FBTztRQUNMLEdBQUdNLElBQUk7UUFDUE47SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Fhcy1jb3JlLy4vc3JjL2xpYi90ZW5hbnQtaXNvbGF0aW9uLnRzP2YyNTMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZW5hbnQgSXNvbGF0aW9uIEVuZm9yY2VtZW50XG4gKiBcbiAqIFRoaXMgbW9kdWxlIHByb3ZpZGVzIHN0cmljdCB0ZW5hbnQgZGF0YSBpc29sYXRpb24gYXQgdGhlIGRhdGFiYXNlIGxldmVsLlxuICogSW5zdGVhZCBvZiBQcmlzbWEgbWlkZGxld2FyZSAod2hpY2ggaGFzIGFzeW5jIGNvbnRleHQgaXNzdWVzKSwgdGhpcyB1c2VzXG4gKiBhcHBsaWNhdGlvbi1sZXZlbCB2YWxpZGF0aW9uIGJlZm9yZSBxdWVyaWVzIGFyZSBleGVjdXRlZC5cbiAqIFxuICogRmVhdHVyZXM6XG4gKiAtIFByZS1xdWVyeSB2YWxpZGF0aW9uIGZ1bmN0aW9uc1xuICogLSBTVVBFUl9BRE1JTiBieXBhc3Mgd2l0aCBleHBsaWNpdCBmbGFnXG4gKiAtIFZpb2xhdGlvbiBsb2dnaW5nIGFuZCBoYXJkIGZhaWx1cmVcbiAqIC0gU2FmZSBxdWVyeSBidWlsZGVycyB0aGF0IGVuZm9yY2UgdGVuYW50IHNjb3BpbmdcbiAqL1xuXG4vLyBNb2RlbHMgdGhhdCByZXF1aXJlIHRlbmFudCBpc29sYXRpb24gKHRlbmFudC1zY29wZWQpXG5leHBvcnQgY29uc3QgVEVOQU5UX1NDT1BFRF9NT0RFTFMgPSBbXG4gICdUZW5hbnRNZW1iZXJzaGlwJyxcbiAgJ1RlbmFudERvbWFpbicsIFxuICAnQXVkaXRMb2cnLFxuICAvLyBBZGQgZnV0dXJlIHRlbmFudC1zY29wZWQgbW9kZWxzIGhlcmVcbl0gYXMgY29uc3RcblxuLy8gTW9kZWxzIHRoYXQgcmVxdWlyZSBwYXJ0bmVyIGlzb2xhdGlvbiAocGFydG5lci1zY29wZWQpXG4vLyBUaGVzZSBhcmUgc2VwYXJhdGUgZnJvbSB0ZW5hbnQgaXNvbGF0aW9uIC0gcGFydG5lcnMgYXJlIHBsYXRmb3JtLWxldmVsXG5leHBvcnQgY29uc3QgUEFSVE5FUl9TQ09QRURfTU9ERUxTID0gW1xuICAnUGFydG5lclVzZXInLFxuICAnUGFydG5lckFncmVlbWVudCcsXG4gICdQYXJ0bmVyUmVmZXJyYWxDb2RlJyxcbiAgJ1BhcnRuZXJSZWZlcnJhbCcsXG4gICdQYXJ0bmVyRWFybmluZycsXG5dIGFzIGNvbnN0XG5cbi8vIFBsYXRmb3JtLWxldmVsIG1vZGVscyAobm8gaXNvbGF0aW9uLCBTdXBlciBBZG1pbiBvbmx5KVxuZXhwb3J0IGNvbnN0IFBMQVRGT1JNX01PREVMUyA9IFtcbiAgJ1BhcnRuZXInLFxuICAnVXNlcicsXG4gICdUZW5hbnQnLFxuICAnU2Vzc2lvbicsXG4gICdNYWdpY0xpbmsnLFxuXSBhcyBjb25zdFxuXG5leHBvcnQgdHlwZSBUZW5hbnRTY29wZWRNb2RlbCA9IHR5cGVvZiBURU5BTlRfU0NPUEVEX01PREVMU1tudW1iZXJdXG5leHBvcnQgdHlwZSBQYXJ0bmVyU2NvcGVkTW9kZWwgPSB0eXBlb2YgUEFSVE5FUl9TQ09QRURfTU9ERUxTW251bWJlcl1cbmV4cG9ydCB0eXBlIFBsYXRmb3JtTW9kZWwgPSB0eXBlb2YgUExBVEZPUk1fTU9ERUxTW251bWJlcl1cblxuZXhwb3J0IGludGVyZmFjZSBUZW5hbnRDb250ZXh0IHtcbiAgdGVuYW50SWQ6IHN0cmluZyB8IG51bGxcbiAgdXNlcklkOiBzdHJpbmcgfCBudWxsXG4gIGlzU3VwZXJBZG1pbjogYm9vbGVhblxuICBieXBhc3NJc29sYXRpb24/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFydG5lckNvbnRleHQge1xuICBwYXJ0bmVySWQ6IHN0cmluZyB8IG51bGxcbiAgdXNlcklkOiBzdHJpbmcgfCBudWxsXG4gIGlzU3VwZXJBZG1pbjogYm9vbGVhblxuICBpc1BhcnRuZXJPd25lcj86IGJvb2xlYW5cbiAgaXNQYXJ0bmVyQWRtaW4/OiBib29sZWFuXG4gIGJ5cGFzc0lzb2xhdGlvbj86IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBWaW9sYXRpb24gbG9nZ2VyXG4gKi9cbmludGVyZmFjZSBWaW9sYXRpb25Mb2cge1xuICB0aW1lc3RhbXA6IERhdGVcbiAgbW9kZWw6IHN0cmluZ1xuICBhY3Rpb246IHN0cmluZ1xuICBjb250ZXh0OiBUZW5hbnRDb250ZXh0IHwgbnVsbFxuICBxdWVyeTogYW55XG4gIHJlYXNvbjogc3RyaW5nXG59XG5cbmNvbnN0IHZpb2xhdGlvbnM6IFZpb2xhdGlvbkxvZ1tdID0gW11cbmNvbnN0IE1BWF9WSU9MQVRJT05fTE9HUyA9IDEwMDBcblxuZXhwb3J0IGZ1bmN0aW9uIGxvZ1Zpb2xhdGlvbih2aW9sYXRpb246IE9taXQ8VmlvbGF0aW9uTG9nLCAndGltZXN0YW1wJz4pOiB2b2lkIHtcbiAgY29uc3QgbG9nOiBWaW9sYXRpb25Mb2cgPSB7XG4gICAgLi4udmlvbGF0aW9uLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICB9XG4gIFxuICB2aW9sYXRpb25zLnB1c2gobG9nKVxuICBcbiAgaWYgKHZpb2xhdGlvbnMubGVuZ3RoID4gTUFYX1ZJT0xBVElPTl9MT0dTKSB7XG4gICAgdmlvbGF0aW9ucy5zaGlmdCgpXG4gIH1cbiAgXG4gIGNvbnNvbGUuZXJyb3IoJ1tURU5BTlQgSVNPTEFUSU9OIFZJT0xBVElPTl0nLCBKU09OLnN0cmluZ2lmeShsb2csIG51bGwsIDIpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmlvbGF0aW9uTG9ncygpOiBWaW9sYXRpb25Mb2dbXSB7XG4gIHJldHVybiBbLi4udmlvbGF0aW9uc11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyVmlvbGF0aW9uTG9ncygpOiB2b2lkIHtcbiAgdmlvbGF0aW9ucy5sZW5ndGggPSAwXG59XG5cbi8qKlxuICogVGVuYW50IElzb2xhdGlvbiBFcnJvclxuICovXG5leHBvcnQgY2xhc3MgVGVuYW50SXNvbGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBwdWJsaWMgbW9kZWw6IHN0cmluZyxcbiAgICBwdWJsaWMgYWN0aW9uOiBzdHJpbmcsXG4gICAgcHVibGljIGNvbnRleHQ6IFRlbmFudENvbnRleHQgfCBudWxsXG4gICkge1xuICAgIHN1cGVyKG1lc3NhZ2UpXG4gICAgdGhpcy5uYW1lID0gJ1RlbmFudElzb2xhdGlvbkVycm9yJ1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBtb2RlbCBpcyB0ZW5hbnQtc2NvcGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1RlbmFudFNjb3BlZE1vZGVsKG1vZGVsOiBzdHJpbmcpOiBtb2RlbCBpcyBUZW5hbnRTY29wZWRNb2RlbCB7XG4gIHJldHVybiBURU5BTlRfU0NPUEVEX01PREVMUy5pbmNsdWRlcyhtb2RlbCBhcyBhbnkpXG59XG5cbi8qKlxuICogVmFsaWRhdGUgdGVuYW50IGNvbnRleHQgYmVmb3JlIGV4ZWN1dGluZyBhIHF1ZXJ5XG4gKiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIGFueSB0ZW5hbnQtc2NvcGVkIGRhdGFiYXNlIG9wZXJhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVUZW5hbnRBY2Nlc3MoXG4gIG1vZGVsOiBzdHJpbmcsXG4gIGFjdGlvbjogc3RyaW5nLFxuICBjb250ZXh0OiBUZW5hbnRDb250ZXh0IHwgbnVsbCxcbiAgcXVlcnlUZW5hbnRJZD86IHN0cmluZyB8IG51bGxcbik6IHZvaWQge1xuICAvLyBTa2lwIHZhbGlkYXRpb24gZm9yIGdsb2JhbCBtb2RlbHNcbiAgaWYgKCFpc1RlbmFudFNjb3BlZE1vZGVsKG1vZGVsKSkge1xuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBBbGxvdyBleHBsaWNpdCBieXBhc3MgKGZvciBtaWdyYXRpb25zLCBhZG1pbiB0b29scywgZXRjLilcbiAgaWYgKGNvbnRleHQ/LmJ5cGFzc0lzb2xhdGlvbiA9PT0gdHJ1ZSkge1xuICAgIGlmICghY29udGV4dC5pc1N1cGVyQWRtaW4pIHtcbiAgICAgIGNvbnN0IHJlYXNvbiA9ICdCeXBhc3MgaXNvbGF0aW9uIGF0dGVtcHRlZCB3aXRob3V0IFNVUEVSX0FETUlOIHJvbGUnXG4gICAgICBsb2dWaW9sYXRpb24oeyBtb2RlbCwgYWN0aW9uLCBjb250ZXh0LCBxdWVyeTogeyBxdWVyeVRlbmFudElkIH0sIHJlYXNvbiB9KVxuICAgICAgdGhyb3cgbmV3IFRlbmFudElzb2xhdGlvbkVycm9yKHJlYXNvbiwgbW9kZWwsIGFjdGlvbiwgY29udGV4dClcbiAgICB9XG4gICAgcmV0dXJuXG4gIH1cbiAgXG4gIC8vIFNVUEVSX0FETUlOIGNhbiBhY2Nlc3MgYWxsIGRhdGFcbiAgaWYgKGNvbnRleHQ/LmlzU3VwZXJBZG1pbikge1xuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBObyBjb250ZXh0ID0gdmlvbGF0aW9uXG4gIGlmICghY29udGV4dCkge1xuICAgIGNvbnN0IHJlYXNvbiA9ICdObyB0ZW5hbnQgY29udGV4dCBwcm92aWRlZCBmb3IgdGVuYW50LXNjb3BlZCBxdWVyeSdcbiAgICBsb2dWaW9sYXRpb24oeyBtb2RlbCwgYWN0aW9uLCBjb250ZXh0LCBxdWVyeTogeyBxdWVyeVRlbmFudElkIH0sIHJlYXNvbiB9KVxuICAgIHRocm93IG5ldyBUZW5hbnRJc29sYXRpb25FcnJvcihyZWFzb24sIG1vZGVsLCBhY3Rpb24sIGNvbnRleHQpXG4gIH1cbiAgXG4gIC8vIE5vIHRlbmFudElkIGluIGNvbnRleHQgPSB2aW9sYXRpb25cbiAgaWYgKCFjb250ZXh0LnRlbmFudElkKSB7XG4gICAgY29uc3QgcmVhc29uID0gJ05vIHRlbmFudElkIGluIGNvbnRleHQgZm9yIHRlbmFudC1zY29wZWQgcXVlcnknXG4gICAgbG9nVmlvbGF0aW9uKHsgbW9kZWwsIGFjdGlvbiwgY29udGV4dCwgcXVlcnk6IHsgcXVlcnlUZW5hbnRJZCB9LCByZWFzb24gfSlcbiAgICB0aHJvdyBuZXcgVGVuYW50SXNvbGF0aW9uRXJyb3IocmVhc29uLCBtb2RlbCwgYWN0aW9uLCBjb250ZXh0KVxuICB9XG4gIFxuICAvLyBJZiBxdWVyeSBzcGVjaWZpZXMgYSB0ZW5hbnRJZCwgaXQgbXVzdCBtYXRjaCBjb250ZXh0XG4gIGlmIChxdWVyeVRlbmFudElkICYmIHF1ZXJ5VGVuYW50SWQgIT09IGNvbnRleHQudGVuYW50SWQpIHtcbiAgICBjb25zdCByZWFzb24gPSBgQ3Jvc3MtdGVuYW50IGFjY2VzcyBhdHRlbXB0OiBxdWVyeSB0ZW5hbnRJZCAoJHtxdWVyeVRlbmFudElkfSkgIT0gY29udGV4dCB0ZW5hbnRJZCAoJHtjb250ZXh0LnRlbmFudElkfSlgXG4gICAgbG9nVmlvbGF0aW9uKHsgbW9kZWwsIGFjdGlvbiwgY29udGV4dCwgcXVlcnk6IHsgcXVlcnlUZW5hbnRJZCB9LCByZWFzb24gfSlcbiAgICB0aHJvdyBuZXcgVGVuYW50SXNvbGF0aW9uRXJyb3IocmVhc29uLCBtb2RlbCwgYWN0aW9uLCBjb250ZXh0KVxuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgdGVuYW50IGNvbnRleHQgZnJvbSB1c2VyIHNlc3Npb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRlbmFudENvbnRleHQoXG4gIHRlbmFudElkOiBzdHJpbmcgfCBudWxsLFxuICB1c2VySWQ6IHN0cmluZyB8IG51bGwsXG4gIGlzU3VwZXJBZG1pbjogYm9vbGVhbixcbiAgYnlwYXNzSXNvbGF0aW9uOiBib29sZWFuID0gZmFsc2Vcbik6IFRlbmFudENvbnRleHQge1xuICByZXR1cm4ge1xuICAgIHRlbmFudElkLFxuICAgIHVzZXJJZCxcbiAgICBpc1N1cGVyQWRtaW4sXG4gICAgYnlwYXNzSXNvbGF0aW9uXG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBwYXJ0bmVyIGNvbnRleHQgZnJvbSB1c2VyIHNlc3Npb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVBhcnRuZXJDb250ZXh0KFxuICBwYXJ0bmVySWQ6IHN0cmluZyB8IG51bGwsXG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbCxcbiAgaXNTdXBlckFkbWluOiBib29sZWFuLFxuICBpc1BhcnRuZXJPd25lcjogYm9vbGVhbiA9IGZhbHNlLFxuICBpc1BhcnRuZXJBZG1pbjogYm9vbGVhbiA9IGZhbHNlLFxuICBieXBhc3NJc29sYXRpb246IGJvb2xlYW4gPSBmYWxzZVxuKTogUGFydG5lckNvbnRleHQge1xuICByZXR1cm4ge1xuICAgIHBhcnRuZXJJZCxcbiAgICB1c2VySWQsXG4gICAgaXNTdXBlckFkbWluLFxuICAgIGlzUGFydG5lck93bmVyLFxuICAgIGlzUGFydG5lckFkbWluLFxuICAgIGJ5cGFzc0lzb2xhdGlvblxuICB9XG59XG5cbi8qKlxuICogRW5zdXJlIGEgV0hFUkUgY2xhdXNlIGluY2x1ZGVzIHRoZSBjb3JyZWN0IHRlbmFudElkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoVGVuYW50RmlsdGVyPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+PihcbiAgd2hlcmU6IFQsXG4gIHRlbmFudElkOiBzdHJpbmdcbik6IFQgJiB7IHRlbmFudElkOiBzdHJpbmcgfSB7XG4gIHJldHVybiB7XG4gICAgLi4ud2hlcmUsXG4gICAgdGVuYW50SWRcbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBkYXRhIGJlaW5nIGNyZWF0ZWQgaW5jbHVkZXMgdGhlIGNvcnJlY3QgdGVuYW50SWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhUZW5hbnREYXRhPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+PihcbiAgZGF0YTogVCxcbiAgdGVuYW50SWQ6IHN0cmluZ1xuKTogVCAmIHsgdGVuYW50SWQ6IHN0cmluZyB9IHtcbiAgcmV0dXJuIHtcbiAgICAuLi5kYXRhLFxuICAgIHRlbmFudElkXG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIG1vZGVsIGlzIHBhcnRuZXItc2NvcGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BhcnRuZXJTY29wZWRNb2RlbChtb2RlbDogc3RyaW5nKTogbW9kZWwgaXMgUGFydG5lclNjb3BlZE1vZGVsIHtcbiAgcmV0dXJuIFBBUlRORVJfU0NPUEVEX01PREVMUy5pbmNsdWRlcyhtb2RlbCBhcyBhbnkpXG59XG5cbi8qKlxuICogVmFsaWRhdGUgcGFydG5lciBjb250ZXh0IGJlZm9yZSBleGVjdXRpbmcgYSBxdWVyeVxuICogVGhpcyBzaG91bGQgYmUgY2FsbGVkIGJlZm9yZSBhbnkgcGFydG5lci1zY29wZWQgZGF0YWJhc2Ugb3BlcmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVBhcnRuZXJBY2Nlc3MoXG4gIG1vZGVsOiBzdHJpbmcsXG4gIGFjdGlvbjogc3RyaW5nLFxuICBjb250ZXh0OiBQYXJ0bmVyQ29udGV4dCB8IG51bGwsXG4gIHF1ZXJ5UGFydG5lcklkPzogc3RyaW5nIHwgbnVsbFxuKTogdm9pZCB7XG4gIC8vIFNraXAgdmFsaWRhdGlvbiBmb3Igbm9uLXBhcnRuZXIgbW9kZWxzXG4gIGlmICghaXNQYXJ0bmVyU2NvcGVkTW9kZWwobW9kZWwpKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgXG4gIC8vIEFsbG93IGV4cGxpY2l0IGJ5cGFzcyAoZm9yIG1pZ3JhdGlvbnMsIGFkbWluIHRvb2xzLCBldGMuKVxuICBpZiAoY29udGV4dD8uYnlwYXNzSXNvbGF0aW9uID09PSB0cnVlKSB7XG4gICAgaWYgKCFjb250ZXh0LmlzU3VwZXJBZG1pbikge1xuICAgICAgY29uc3QgcmVhc29uID0gJ1BhcnRuZXIgYnlwYXNzIGlzb2xhdGlvbiBhdHRlbXB0ZWQgd2l0aG91dCBTVVBFUl9BRE1JTiByb2xlJ1xuICAgICAgbG9nVmlvbGF0aW9uKHsgbW9kZWwsIGFjdGlvbiwgY29udGV4dDogY29udGV4dCBhcyBhbnksIHF1ZXJ5OiB7IHF1ZXJ5UGFydG5lcklkIH0sIHJlYXNvbiB9KVxuICAgICAgdGhyb3cgbmV3IFRlbmFudElzb2xhdGlvbkVycm9yKHJlYXNvbiwgbW9kZWwsIGFjdGlvbiwgY29udGV4dCBhcyBhbnkpXG4gICAgfVxuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBTVVBFUl9BRE1JTiBjYW4gYWNjZXNzIGFsbCBwYXJ0bmVyIGRhdGFcbiAgaWYgKGNvbnRleHQ/LmlzU3VwZXJBZG1pbikge1xuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBObyBjb250ZXh0ID0gdmlvbGF0aW9uXG4gIGlmICghY29udGV4dCkge1xuICAgIGNvbnN0IHJlYXNvbiA9ICdObyBwYXJ0bmVyIGNvbnRleHQgcHJvdmlkZWQgZm9yIHBhcnRuZXItc2NvcGVkIHF1ZXJ5J1xuICAgIGxvZ1Zpb2xhdGlvbih7IG1vZGVsLCBhY3Rpb24sIGNvbnRleHQ6IG51bGwsIHF1ZXJ5OiB7IHF1ZXJ5UGFydG5lcklkIH0sIHJlYXNvbiB9KVxuICAgIHRocm93IG5ldyBUZW5hbnRJc29sYXRpb25FcnJvcihyZWFzb24sIG1vZGVsLCBhY3Rpb24sIG51bGwpXG4gIH1cbiAgXG4gIC8vIE5vIHBhcnRuZXJJZCBpbiBjb250ZXh0ID0gdmlvbGF0aW9uXG4gIGlmICghY29udGV4dC5wYXJ0bmVySWQpIHtcbiAgICBjb25zdCByZWFzb24gPSAnTm8gcGFydG5lcklkIGluIGNvbnRleHQgZm9yIHBhcnRuZXItc2NvcGVkIHF1ZXJ5J1xuICAgIGxvZ1Zpb2xhdGlvbih7IG1vZGVsLCBhY3Rpb24sIGNvbnRleHQ6IGNvbnRleHQgYXMgYW55LCBxdWVyeTogeyBxdWVyeVBhcnRuZXJJZCB9LCByZWFzb24gfSlcbiAgICB0aHJvdyBuZXcgVGVuYW50SXNvbGF0aW9uRXJyb3IocmVhc29uLCBtb2RlbCwgYWN0aW9uLCBjb250ZXh0IGFzIGFueSlcbiAgfVxuICBcbiAgLy8gSWYgcXVlcnkgc3BlY2lmaWVzIGEgcGFydG5lcklkLCBpdCBtdXN0IG1hdGNoIGNvbnRleHRcbiAgaWYgKHF1ZXJ5UGFydG5lcklkICYmIHF1ZXJ5UGFydG5lcklkICE9PSBjb250ZXh0LnBhcnRuZXJJZCkge1xuICAgIGNvbnN0IHJlYXNvbiA9IGBDcm9zcy1wYXJ0bmVyIGFjY2VzcyBhdHRlbXB0OiBxdWVyeSBwYXJ0bmVySWQgKCR7cXVlcnlQYXJ0bmVySWR9KSAhPSBjb250ZXh0IHBhcnRuZXJJZCAoJHtjb250ZXh0LnBhcnRuZXJJZH0pYFxuICAgIGxvZ1Zpb2xhdGlvbih7IG1vZGVsLCBhY3Rpb24sIGNvbnRleHQ6IGNvbnRleHQgYXMgYW55LCBxdWVyeTogeyBxdWVyeVBhcnRuZXJJZCB9LCByZWFzb24gfSlcbiAgICB0aHJvdyBuZXcgVGVuYW50SXNvbGF0aW9uRXJyb3IocmVhc29uLCBtb2RlbCwgYWN0aW9uLCBjb250ZXh0IGFzIGFueSlcbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBhIFdIRVJFIGNsYXVzZSBpbmNsdWRlcyB0aGUgY29ycmVjdCBwYXJ0bmVySWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhQYXJ0bmVyRmlsdGVyPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+PihcbiAgd2hlcmU6IFQsXG4gIHBhcnRuZXJJZDogc3RyaW5nXG4pOiBUICYgeyBwYXJ0bmVySWQ6IHN0cmluZyB9IHtcbiAgcmV0dXJuIHtcbiAgICAuLi53aGVyZSxcbiAgICBwYXJ0bmVySWRcbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBkYXRhIGJlaW5nIGNyZWF0ZWQgaW5jbHVkZXMgdGhlIGNvcnJlY3QgcGFydG5lcklkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoUGFydG5lckRhdGE8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICBkYXRhOiBULFxuICBwYXJ0bmVySWQ6IHN0cmluZ1xuKTogVCAmIHsgcGFydG5lcklkOiBzdHJpbmcgfSB7XG4gIHJldHVybiB7XG4gICAgLi4uZGF0YSxcbiAgICBwYXJ0bmVySWRcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlRFTkFOVF9TQ09QRURfTU9ERUxTIiwiUEFSVE5FUl9TQ09QRURfTU9ERUxTIiwiUExBVEZPUk1fTU9ERUxTIiwidmlvbGF0aW9ucyIsIk1BWF9WSU9MQVRJT05fTE9HUyIsImxvZ1Zpb2xhdGlvbiIsInZpb2xhdGlvbiIsImxvZyIsInRpbWVzdGFtcCIsIkRhdGUiLCJwdXNoIiwibGVuZ3RoIiwic2hpZnQiLCJjb25zb2xlIiwiZXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0VmlvbGF0aW9uTG9ncyIsImNsZWFyVmlvbGF0aW9uTG9ncyIsIlRlbmFudElzb2xhdGlvbkVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJtb2RlbCIsImFjdGlvbiIsImNvbnRleHQiLCJuYW1lIiwiaXNUZW5hbnRTY29wZWRNb2RlbCIsImluY2x1ZGVzIiwidmFsaWRhdGVUZW5hbnRBY2Nlc3MiLCJxdWVyeVRlbmFudElkIiwiYnlwYXNzSXNvbGF0aW9uIiwiaXNTdXBlckFkbWluIiwicmVhc29uIiwicXVlcnkiLCJ0ZW5hbnRJZCIsImNyZWF0ZVRlbmFudENvbnRleHQiLCJ1c2VySWQiLCJjcmVhdGVQYXJ0bmVyQ29udGV4dCIsInBhcnRuZXJJZCIsImlzUGFydG5lck93bmVyIiwiaXNQYXJ0bmVyQWRtaW4iLCJ3aXRoVGVuYW50RmlsdGVyIiwid2hlcmUiLCJ3aXRoVGVuYW50RGF0YSIsImRhdGEiLCJpc1BhcnRuZXJTY29wZWRNb2RlbCIsInZhbGlkYXRlUGFydG5lckFjY2VzcyIsInF1ZXJ5UGFydG5lcklkIiwid2l0aFBhcnRuZXJGaWx0ZXIiLCJ3aXRoUGFydG5lckRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/tenant-isolation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpos%2Fcustomers%2Froute&page=%2Fapi%2Fpos%2Fcustomers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpos%2Fcustomers%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();