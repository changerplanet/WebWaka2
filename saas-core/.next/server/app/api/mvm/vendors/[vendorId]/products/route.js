"use strict";(()=>{var e={};e.id=8912,e.ids=[8912],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},62447:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>I,patchFetch:()=>f,requestAsyncStorage:()=>v,routeModule:()=>l,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{DELETE:()=>m,GET:()=>c,POST:()=>i});var n=t(49303),o=t(88716),a=t(60670),u=t(87070);let d=new Map;function p(e,r){return`${e}:${r}`}async function c(e,r){try{let{vendorId:t}=await r.params,{searchParams:s}=new URL(e.url),n=s.get("tenantId");if(!n)return u.NextResponse.json({success:!1,error:"tenantId is required"},{status:400});let o=p(n,t),a=d.get(o)||[];return u.NextResponse.json({success:!0,vendorId:t,mappings:a,count:a.length,module:"MVM"})}catch(e){return console.error("[MVM] Error fetching vendor products:",e),u.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}async function i(e,r){try{let{vendorId:t}=await r.params,{tenantId:s,productId:n,commissionOverride:o,isActive:a=!0}=await e.json();if(!s||!n)return u.NextResponse.json({success:!1,error:"tenantId and productId are required"},{status:400});let c=p(s,t),i=d.get(c)||[];if(i.find(e=>e.productId===n))return u.NextResponse.json({success:!1,error:"Product already mapped to this vendor"},{status:400});let m={id:`mapping_${Date.now().toString(36)}`,vendorId:t,productId:n,commissionOverride:o,isActive:a,createdAt:new Date().toISOString()};return i.push(m),d.set(c,i),u.NextResponse.json({success:!0,mapping:m,module:"MVM"},{status:201})}catch(e){return console.error("[MVM] Error mapping product:",e),u.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}async function m(e,r){try{let{vendorId:t}=await r.params,{searchParams:s}=new URL(e.url),n=s.get("tenantId"),o=s.get("productId");if(!n||!o)return u.NextResponse.json({success:!1,error:"tenantId and productId are required"},{status:400});let a=p(n,t),c=d.get(a)||[],i=c.findIndex(e=>e.productId===o);if(-1===i)return u.NextResponse.json({success:!1,error:"Product mapping not found"},{status:404});let[m]=c.splice(i,1);return d.set(a,c),u.NextResponse.json({success:!0,message:"Product mapping removed",removedMapping:m,module:"MVM"})}catch(e){return console.error("[MVM] Error removing product mapping:",e),u.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/mvm/vendors/[vendorId]/products/route",pathname:"/api/mvm/vendors/[vendorId]/products",filename:"route",bundlePath:"app/api/mvm/vendors/[vendorId]/products/route"},resolvedPagePath:"/app/saas-core/src/app/api/mvm/vendors/[vendorId]/products/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:v,staticGenerationAsyncStorage:g,serverHooks:x}=l,I="/api/mvm/vendors/[vendorId]/products/route";function f(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9380,5972],()=>t(62447));module.exports=s})();