"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/mvm/events/route";
exports.ids = ["app/api/mvm/events/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "./action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmvm%2Fevents%2Froute&page=%2Fapi%2Fmvm%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmvm%2Fevents%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmvm%2Fevents%2Froute&page=%2Fapi%2Fmvm%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmvm%2Fevents%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_saas_core_src_app_api_mvm_events_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/mvm/events/route.ts */ \"(rsc)/./src/app/api/mvm/events/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/mvm/events/route\",\n        pathname: \"/api/mvm/events\",\n        filename: \"route\",\n        bundlePath: \"app/api/mvm/events/route\"\n    },\n    resolvedPagePath: \"/app/saas-core/src/app/api/mvm/events/route.ts\",\n    nextConfigOutput,\n    userland: _app_saas_core_src_app_api_mvm_events_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/mvm/events/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtdm0lMkZldmVudHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm12bSUyRmV2ZW50cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm12bSUyRmV2ZW50cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZhcHAlMkZzYWFzLWNvcmUlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmFwcCUyRnNhYXMtY29yZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDRjtBQUMzRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NhYXMtY29yZS8/MzAxYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvYXBwL3NhYXMtY29yZS9zcmMvYXBwL2FwaS9tdm0vZXZlbnRzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tdm0vZXZlbnRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbXZtL2V2ZW50c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbXZtL2V2ZW50cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9hcHAvc2Fhcy1jb3JlL3NyYy9hcHAvYXBpL212bS9ldmVudHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL212bS9ldmVudHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmvm%2Fevents%2Froute&page=%2Fapi%2Fmvm%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmvm%2Fevents%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/mvm/events/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/mvm/events/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mvm_event_handlers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mvm-event-handlers */ \"(rsc)/./src/lib/mvm-event-handlers.ts\");\n/**\n * MVM Events API\n * \n * Receives events from the MVM (Multi Vendor Marketplace) module.\n */ \n\nasync function POST(request) {\n    try {\n        const event = await request.json();\n        // Validate event structure\n        if (!event.eventId || !event.eventType || !event.tenantId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid event structure. Required: eventId, eventType, tenantId\"\n            }, {\n                status: 400\n            });\n        }\n        // Process the event\n        const result = await (0,_lib_mvm_event_handlers__WEBPACK_IMPORTED_MODULE_1__.handleMVMEvent)(event);\n        if (result.success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                eventId: event.eventId,\n                processed: true\n            });\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                eventId: event.eventId,\n                error: result.error\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"[MVM Events API] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tdm0vZXZlbnRzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0NBSUMsR0FFc0Q7QUFDRTtBQUVsRCxlQUFlRSxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0YsTUFBTUMsUUFBUSxNQUFNRCxRQUFRRSxJQUFJO1FBRWhDLDJCQUEyQjtRQUMzQixJQUFJLENBQUNELE1BQU1FLE9BQU8sSUFBSSxDQUFDRixNQUFNRyxTQUFTLElBQUksQ0FBQ0gsTUFBTUksUUFBUSxFQUFFO1lBQ3pELE9BQU9SLHFEQUFZQSxDQUFDSyxJQUFJLENBQ3RCO2dCQUFFSSxPQUFPO1lBQWtFLEdBQzNFO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxvQkFBb0I7UUFDcEIsTUFBTUMsU0FBUyxNQUFNVix1RUFBY0EsQ0FBQ0c7UUFFcEMsSUFBSU8sT0FBT0MsT0FBTyxFQUFFO1lBQ2xCLE9BQU9aLHFEQUFZQSxDQUFDSyxJQUFJLENBQUM7Z0JBQ3ZCTyxTQUFTO2dCQUNUTixTQUFTRixNQUFNRSxPQUFPO2dCQUN0Qk8sV0FBVztZQUNiO1FBQ0YsT0FBTztZQUNMLE9BQU9iLHFEQUFZQSxDQUFDSyxJQUFJLENBQ3RCO2dCQUNFTyxTQUFTO2dCQUNUTixTQUFTRixNQUFNRSxPQUFPO2dCQUN0QkcsT0FBT0UsT0FBT0YsS0FBSztZQUNyQixHQUNBO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7SUFDRixFQUFFLE9BQU9ELE9BQU87UUFDZEssUUFBUUwsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsT0FBT1QscURBQVlBLENBQUNLLElBQUksQ0FDdEI7WUFBRUksT0FBTztRQUF3QixHQUNqQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3NhYXMtY29yZS8uL3NyYy9hcHAvYXBpL212bS9ldmVudHMvcm91dGUudHM/NTk0OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE1WTSBFdmVudHMgQVBJXG4gKiBcbiAqIFJlY2VpdmVzIGV2ZW50cyBmcm9tIHRoZSBNVk0gKE11bHRpIFZlbmRvciBNYXJrZXRwbGFjZSkgbW9kdWxlLlxuICovXG5cbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGhhbmRsZU1WTUV2ZW50IH0gZnJvbSAnQC9saWIvbXZtLWV2ZW50LWhhbmRsZXJzJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGV2ZW50ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBldmVudCBzdHJ1Y3R1cmVcbiAgICBpZiAoIWV2ZW50LmV2ZW50SWQgfHwgIWV2ZW50LmV2ZW50VHlwZSB8fCAhZXZlbnQudGVuYW50SWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0ludmFsaWQgZXZlbnQgc3RydWN0dXJlLiBSZXF1aXJlZDogZXZlbnRJZCwgZXZlbnRUeXBlLCB0ZW5hbnRJZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIC8vIFByb2Nlc3MgdGhlIGV2ZW50XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlTVZNRXZlbnQoZXZlbnQpXG4gICAgXG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBldmVudElkOiBldmVudC5ldmVudElkLFxuICAgICAgICBwcm9jZXNzZWQ6IHRydWVcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgICAgZXZlbnRJZDogZXZlbnQuZXZlbnRJZCxcbiAgICAgICAgICBlcnJvcjogcmVzdWx0LmVycm9yIFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgIClcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW01WTSBFdmVudHMgQVBJXSBFcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiaGFuZGxlTVZNRXZlbnQiLCJQT1NUIiwicmVxdWVzdCIsImV2ZW50IiwianNvbiIsImV2ZW50SWQiLCJldmVudFR5cGUiLCJ0ZW5hbnRJZCIsImVycm9yIiwic3RhdHVzIiwicmVzdWx0Iiwic3VjY2VzcyIsInByb2Nlc3NlZCIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/mvm/events/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/audit.ts":
/*!**************************!*\
  !*** ./src/lib/audit.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuditLog: () => (/* binding */ createAuditLog),\n/* harmony export */   getAuditLogs: () => (/* binding */ getAuditLogs)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist-node/v4.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\n\n/**\n * Create an audit log entry\n */ async function createAuditLog(input) {\n    try {\n        const headersList = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.headers)();\n        const ipAddress = headersList.get(\"x-forwarded-for\") || headersList.get(\"x-real-ip\") || \"unknown\";\n        const userAgent = headersList.get(\"user-agent\") || \"unknown\";\n        await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.auditLog.create({\n            data: {\n                id: (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),\n                action: input.action,\n                actorId: input.actorId,\n                actorEmail: input.actorEmail,\n                tenantId: input.tenantId || null,\n                targetType: input.targetType || null,\n                targetId: input.targetId || null,\n                metadata: input.metadata || undefined,\n                ipAddress,\n                userAgent\n            }\n        });\n    } catch (error) {\n        console.error(\"Failed to create audit log:\", error);\n    // Don't throw - audit logging should not break operations\n    }\n}\n/**\n * Get audit logs for a tenant\n */ async function getAuditLogs(options) {\n    const { tenantId, actorId, action, targetType, limit = 50, offset = 0 } = options;\n    const where = {};\n    if (tenantId) where.tenantId = tenantId;\n    if (actorId) where.actorId = actorId;\n    if (action) where.action = action;\n    if (targetType) where.targetType = targetType;\n    const [logs, total] = await Promise.all([\n        _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.auditLog.findMany({\n            where,\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            take: limit,\n            skip: offset\n        }),\n        _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.auditLog.count({\n            where\n        })\n    ]);\n    return {\n        logs,\n        total\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1ZGl0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWlDO0FBRUU7QUFDRztBQVl0Qzs7Q0FFQyxHQUNNLGVBQWVJLGVBQWVDLEtBQW9CO0lBQ3ZELElBQUk7UUFDRixNQUFNQyxjQUFjLE1BQU1ILHFEQUFPQTtRQUNqQyxNQUFNSSxZQUFZRCxZQUFZRSxHQUFHLENBQUMsc0JBQXNCRixZQUFZRSxHQUFHLENBQUMsZ0JBQWdCO1FBQ3hGLE1BQU1DLFlBQVlILFlBQVlFLEdBQUcsQ0FBQyxpQkFBaUI7UUFFbkQsTUFBTVIsMkNBQU1BLENBQUNVLFFBQVEsQ0FBQ0MsTUFBTSxDQUFDO1lBQzNCQyxNQUFNO2dCQUNKQyxJQUFJWCxnREFBTUE7Z0JBQ1ZZLFFBQVFULE1BQU1TLE1BQU07Z0JBQ3BCQyxTQUFTVixNQUFNVSxPQUFPO2dCQUN0QkMsWUFBWVgsTUFBTVcsVUFBVTtnQkFDNUJDLFVBQVVaLE1BQU1ZLFFBQVEsSUFBSTtnQkFDNUJDLFlBQVliLE1BQU1hLFVBQVUsSUFBSTtnQkFDaENDLFVBQVVkLE1BQU1jLFFBQVEsSUFBSTtnQkFDNUJDLFVBQVVmLE1BQU1lLFFBQVEsSUFBSUM7Z0JBQzVCZDtnQkFDQUU7WUFDRjtRQUNGO0lBQ0YsRUFBRSxPQUFPYSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO0lBQzdDLDBEQUEwRDtJQUM1RDtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlRSxhQUFhQyxPQU9sQztJQUNDLE1BQU0sRUFBRVIsUUFBUSxFQUFFRixPQUFPLEVBQUVELE1BQU0sRUFBRUksVUFBVSxFQUFFUSxRQUFRLEVBQUUsRUFBRUMsU0FBUyxDQUFDLEVBQUUsR0FBR0Y7SUFFMUUsTUFBTUcsUUFBYSxDQUFDO0lBQ3BCLElBQUlYLFVBQVVXLE1BQU1YLFFBQVEsR0FBR0E7SUFDL0IsSUFBSUYsU0FBU2EsTUFBTWIsT0FBTyxHQUFHQTtJQUM3QixJQUFJRCxRQUFRYyxNQUFNZCxNQUFNLEdBQUdBO0lBQzNCLElBQUlJLFlBQVlVLE1BQU1WLFVBQVUsR0FBR0E7SUFFbkMsTUFBTSxDQUFDVyxNQUFNQyxNQUFNLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQ3RDaEMsMkNBQU1BLENBQUNVLFFBQVEsQ0FBQ3VCLFFBQVEsQ0FBQztZQUN2Qkw7WUFDQU0sU0FBUztnQkFBRUMsV0FBVztZQUFPO1lBQzdCQyxNQUFNVjtZQUNOVyxNQUFNVjtRQUNSO1FBQ0EzQiwyQ0FBTUEsQ0FBQ1UsUUFBUSxDQUFDNEIsS0FBSyxDQUFDO1lBQUVWO1FBQU07S0FDL0I7SUFFRCxPQUFPO1FBQUVDO1FBQU1DO0lBQU07QUFDdkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYWFzLWNvcmUvLi9zcmMvbGliL2F1ZGl0LnRzP2Y0NjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnLi9wcmlzbWEnXG5pbXBvcnQgeyBBdWRpdEFjdGlvbiB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCdcbmltcG9ydCB7IGhlYWRlcnMgfSBmcm9tICduZXh0L2hlYWRlcnMnXG5cbmludGVyZmFjZSBBdWRpdExvZ0lucHV0IHtcbiAgYWN0aW9uOiBBdWRpdEFjdGlvblxuICBhY3RvcklkOiBzdHJpbmdcbiAgYWN0b3JFbWFpbDogc3RyaW5nXG4gIHRlbmFudElkPzogc3RyaW5nIHwgbnVsbFxuICB0YXJnZXRUeXBlPzogc3RyaW5nXG4gIHRhcmdldElkPzogc3RyaW5nXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBhdWRpdCBsb2cgZW50cnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUF1ZGl0TG9nKGlucHV0OiBBdWRpdExvZ0lucHV0KTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgaGVhZGVyc0xpc3QgPSBhd2FpdCBoZWFkZXJzKClcbiAgICBjb25zdCBpcEFkZHJlc3MgPSBoZWFkZXJzTGlzdC5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpIHx8IGhlYWRlcnNMaXN0LmdldCgneC1yZWFsLWlwJykgfHwgJ3Vua25vd24nXG4gICAgY29uc3QgdXNlckFnZW50ID0gaGVhZGVyc0xpc3QuZ2V0KCd1c2VyLWFnZW50JykgfHwgJ3Vua25vd24nXG4gICAgXG4gICAgYXdhaXQgcHJpc21hLmF1ZGl0TG9nLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgYWN0aW9uOiBpbnB1dC5hY3Rpb24sXG4gICAgICAgIGFjdG9ySWQ6IGlucHV0LmFjdG9ySWQsXG4gICAgICAgIGFjdG9yRW1haWw6IGlucHV0LmFjdG9yRW1haWwsXG4gICAgICAgIHRlbmFudElkOiBpbnB1dC50ZW5hbnRJZCB8fCBudWxsLFxuICAgICAgICB0YXJnZXRUeXBlOiBpbnB1dC50YXJnZXRUeXBlIHx8IG51bGwsXG4gICAgICAgIHRhcmdldElkOiBpbnB1dC50YXJnZXRJZCB8fCBudWxsLFxuICAgICAgICBtZXRhZGF0YTogaW5wdXQubWV0YWRhdGEgfHwgdW5kZWZpbmVkLFxuICAgICAgICBpcEFkZHJlc3MsXG4gICAgICAgIHVzZXJBZ2VudFxuICAgICAgfVxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBhdWRpdCBsb2c6JywgZXJyb3IpXG4gICAgLy8gRG9uJ3QgdGhyb3cgLSBhdWRpdCBsb2dnaW5nIHNob3VsZCBub3QgYnJlYWsgb3BlcmF0aW9uc1xuICB9XG59XG5cbi8qKlxuICogR2V0IGF1ZGl0IGxvZ3MgZm9yIGEgdGVuYW50XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdWRpdExvZ3Mob3B0aW9uczoge1xuICB0ZW5hbnRJZD86IHN0cmluZ1xuICBhY3RvcklkPzogc3RyaW5nXG4gIGFjdGlvbj86IEF1ZGl0QWN0aW9uXG4gIHRhcmdldFR5cGU/OiBzdHJpbmdcbiAgbGltaXQ/OiBudW1iZXJcbiAgb2Zmc2V0PzogbnVtYmVyXG59KSB7XG4gIGNvbnN0IHsgdGVuYW50SWQsIGFjdG9ySWQsIGFjdGlvbiwgdGFyZ2V0VHlwZSwgbGltaXQgPSA1MCwgb2Zmc2V0ID0gMCB9ID0gb3B0aW9uc1xuICBcbiAgY29uc3Qgd2hlcmU6IGFueSA9IHt9XG4gIGlmICh0ZW5hbnRJZCkgd2hlcmUudGVuYW50SWQgPSB0ZW5hbnRJZFxuICBpZiAoYWN0b3JJZCkgd2hlcmUuYWN0b3JJZCA9IGFjdG9ySWRcbiAgaWYgKGFjdGlvbikgd2hlcmUuYWN0aW9uID0gYWN0aW9uXG4gIGlmICh0YXJnZXRUeXBlKSB3aGVyZS50YXJnZXRUeXBlID0gdGFyZ2V0VHlwZVxuICBcbiAgY29uc3QgW2xvZ3MsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBwcmlzbWEuYXVkaXRMb2cuZmluZE1hbnkoe1xuICAgICAgd2hlcmUsXG4gICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICB0YWtlOiBsaW1pdCxcbiAgICAgIHNraXA6IG9mZnNldFxuICAgIH0pLFxuICAgIHByaXNtYS5hdWRpdExvZy5jb3VudCh7IHdoZXJlIH0pXG4gIF0pXG4gIFxuICByZXR1cm4geyBsb2dzLCB0b3RhbCB9XG59XG4iXSwibmFtZXMiOlsicHJpc21hIiwidjQiLCJ1dWlkdjQiLCJoZWFkZXJzIiwiY3JlYXRlQXVkaXRMb2ciLCJpbnB1dCIsImhlYWRlcnNMaXN0IiwiaXBBZGRyZXNzIiwiZ2V0IiwidXNlckFnZW50IiwiYXVkaXRMb2ciLCJjcmVhdGUiLCJkYXRhIiwiaWQiLCJhY3Rpb24iLCJhY3RvcklkIiwiYWN0b3JFbWFpbCIsInRlbmFudElkIiwidGFyZ2V0VHlwZSIsInRhcmdldElkIiwibWV0YWRhdGEiLCJ1bmRlZmluZWQiLCJlcnJvciIsImNvbnNvbGUiLCJnZXRBdWRpdExvZ3MiLCJvcHRpb25zIiwibGltaXQiLCJvZmZzZXQiLCJ3aGVyZSIsImxvZ3MiLCJ0b3RhbCIsIlByb21pc2UiLCJhbGwiLCJmaW5kTWFueSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJ0YWtlIiwic2tpcCIsImNvdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/audit.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/mvm-event-handlers.ts":
/*!***************************************!*\
  !*** ./src/lib/mvm-event-handlers.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getMVMEntitlements: () => (/* binding */ getMVMEntitlements),\n/* harmony export */   handleCommissionEarned: () => (/* binding */ handleCommissionEarned),\n/* harmony export */   handleMVMEvent: () => (/* binding */ handleMVMEvent),\n/* harmony export */   handleOrderSplit: () => (/* binding */ handleOrderSplit),\n/* harmony export */   handlePayoutReady: () => (/* binding */ handlePayoutReady),\n/* harmony export */   handleSubOrderCancelled: () => (/* binding */ handleSubOrderCancelled),\n/* harmony export */   handleSubOrderCreated: () => (/* binding */ handleSubOrderCreated),\n/* harmony export */   handleSubOrderDelivered: () => (/* binding */ handleSubOrderDelivered),\n/* harmony export */   handleVendorApproved: () => (/* binding */ handleVendorApproved),\n/* harmony export */   handleVendorOnboarded: () => (/* binding */ handleVendorOnboarded),\n/* harmony export */   handleVendorSuspended: () => (/* binding */ handleVendorSuspended)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _audit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./audit */ \"(rsc)/./src/lib/audit.ts\");\n/**\n * MVM Event Handlers\n * \n * Core's handlers for events emitted by the MVM (Multi Vendor Marketplace) module.\n * \n * Events handled:\n * - mvm.vendor.onboarding_completed → Create vendor audit, notify tenant admin\n * - mvm.vendor.approved → Update vendor status audit\n * - mvm.vendor.suspended → Update vendor status audit\n * - mvm.order.split → Log order split, update parent order\n * - mvm.suborder.created → Reserve inventory for vendor items\n * - mvm.suborder.delivered → Mark earnings as ready, update customer metrics\n * - mvm.suborder.cancelled → Release inventory\n * - mvm.commission.earned → Create commission ledger entry\n * - mvm.payout.ready → Log payout readiness (no money movement)\n * \n * RULES:\n * - Core processes events, modules emit only\n * - Inventory/wallet updates happen here, not in MVM\n * - Idempotency enforced via unique keys\n */ \n\n// ============================================================================\n// IDEMPOTENCY CHECK\n// ============================================================================\nasync function isEventProcessed(idempotencyKey) {\n    const existing = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.auditLog.findFirst({\n        where: {\n            targetId: idempotencyKey,\n            targetType: \"MVM_EVENT\"\n        }\n    });\n    return !!existing;\n}\nasync function markEventProcessed(idempotencyKey, eventType, tenantId, actorId) {\n    await (0,_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n        action: \"TENANT_UPDATED\",\n        actorId: actorId || \"mvm-system\",\n        actorEmail: \"mvm-system@internal\",\n        tenantId,\n        targetType: \"MVM_EVENT\",\n        targetId: idempotencyKey,\n        metadata: {\n            eventType,\n            processedAt: new Date().toISOString()\n        }\n    });\n}\n// ============================================================================\n// VENDOR LIFECYCLE HANDLERS\n// ============================================================================\n/**\n * Handle vendor onboarding completed\n * - Creates audit log\n * - Could trigger welcome notification\n */ async function handleVendorOnboarded(event) {\n    const { idempotencyKey, payload } = event;\n    if (await isEventProcessed(idempotencyKey)) {\n        console.log(\"[MVM] Event already processed:\", idempotencyKey);\n        return {\n            success: true\n        };\n    }\n    try {\n        const { tenantId, vendorId, vendorName, email, commissionRate } = payload;\n        console.log(\"[MVM] Vendor onboarded:\", vendorName, \"for tenant\", tenantId);\n        // Create audit log\n        await (0,_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            action: \"TENANT_CREATED\",\n            actorId: vendorId,\n            actorEmail: email,\n            tenantId,\n            targetType: \"VENDOR\",\n            targetId: vendorId,\n            metadata: {\n                eventType: \"MVM_VENDOR_ONBOARDED\",\n                vendorName,\n                commissionRate,\n                tierId: payload.tierId,\n                tierName: payload.tierName,\n                onboardedAt: payload.onboardedAt\n            }\n        });\n        // TODO: Create welcome notification\n        // await notificationService.send({\n        //   tenantId,\n        //   recipientEmail: email,\n        //   channel: 'EMAIL',\n        //   templateId: 'vendor_welcome',\n        //   templateData: { vendorName, commissionRate }\n        // })\n        await markEventProcessed(idempotencyKey, \"mvm.vendor.onboarding_completed\", tenantId, vendorId);\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"[MVM] Error handling vendor onboarded:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n/**\n * Handle vendor approved\n */ async function handleVendorApproved(event) {\n    const { idempotencyKey, payload } = event;\n    if (await isEventProcessed(idempotencyKey)) {\n        return {\n            success: true\n        };\n    }\n    try {\n        const { tenantId, vendorId, vendorName, changedBy } = payload;\n        console.log(\"[MVM] Vendor approved:\", vendorName);\n        await (0,_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            action: \"TENANT_UPDATED\",\n            actorId: changedBy || \"system\",\n            actorEmail: \"admin@tenant\",\n            tenantId,\n            targetType: \"VENDOR\",\n            targetId: vendorId,\n            metadata: {\n                eventType: \"MVM_VENDOR_APPROVED\",\n                vendorName,\n                previousStatus: payload.previousStatus,\n                newStatus: payload.newStatus,\n                changedAt: payload.changedAt\n            }\n        });\n        // TODO: Notify vendor of approval\n        // await notificationService.send({...})\n        await markEventProcessed(idempotencyKey, \"mvm.vendor.approved\", tenantId, changedBy || \"system\");\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"[MVM] Error handling vendor approved:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n/**\n * Handle vendor suspended\n */ async function handleVendorSuspended(event) {\n    const { idempotencyKey, payload } = event;\n    if (await isEventProcessed(idempotencyKey)) {\n        return {\n            success: true\n        };\n    }\n    try {\n        const { tenantId, vendorId, vendorName, reason, changedBy } = payload;\n        console.log(\"[MVM] Vendor suspended:\", vendorName, \"Reason:\", reason);\n        await (0,_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            action: \"TENANT_SUSPENDED\",\n            actorId: changedBy || \"system\",\n            actorEmail: \"admin@tenant\",\n            tenantId,\n            targetType: \"VENDOR\",\n            targetId: vendorId,\n            metadata: {\n                eventType: \"MVM_VENDOR_SUSPENDED\",\n                vendorName,\n                reason,\n                previousStatus: payload.previousStatus,\n                changedAt: payload.changedAt\n            }\n        });\n        await markEventProcessed(idempotencyKey, \"mvm.vendor.suspended\", tenantId, changedBy || \"system\");\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"[MVM] Error handling vendor suspended:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n// ============================================================================\n// ORDER SPLITTING HANDLERS\n// ============================================================================\n/**\n * Handle order split\n * - Logs the split for audit\n * - Updates parent order metadata (if needed)\n */ async function handleOrderSplit(event) {\n    const { idempotencyKey, payload } = event;\n    if (await isEventProcessed(idempotencyKey)) {\n        return {\n            success: true\n        };\n    }\n    try {\n        const { tenantId, parentOrderId, parentOrderNumber, vendorCount, totalAmount, totalCommission } = payload;\n        console.log(\"[MVM] Order split:\", parentOrderNumber, \"into\", vendorCount, \"sub-orders\");\n        await (0,_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            action: \"TENANT_UPDATED\",\n            actorId: \"system\",\n            actorEmail: \"mvm-system@internal\",\n            tenantId,\n            targetType: \"ORDER_SPLIT\",\n            targetId: parentOrderId,\n            metadata: {\n                eventType: \"MVM_ORDER_SPLIT\",\n                parentOrderNumber,\n                vendorCount,\n                subOrderIds: payload.subOrderIds,\n                subOrderNumbers: payload.subOrderNumbers,\n                totalAmount,\n                totalCommission,\n                splitAt: payload.splitAt\n            }\n        });\n        await markEventProcessed(idempotencyKey, \"mvm.order.split\", tenantId, \"system\");\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"[MVM] Error handling order split:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n/**\n * Handle sub-order created\n * - Reserves inventory for vendor items\n */ async function handleSubOrderCreated(event) {\n    const { idempotencyKey, payload } = event;\n    if (await isEventProcessed(idempotencyKey)) {\n        return {\n            success: true\n        };\n    }\n    try {\n        const { tenantId, vendorId, subOrderId, subOrderNumber, items, grandTotal, commissionAmount } = payload;\n        console.log(\"[MVM] Sub-order created:\", subOrderNumber, \"for vendor\", vendorId);\n        console.log(\"[MVM] Items:\", items.length, \"Total: $\" + grandTotal, \"Commission: $\" + commissionAmount);\n        // TODO: Reserve inventory for these items\n        // In production:\n        // for (const item of items) {\n        //   await prisma.inventoryLevel.update({\n        //     where: { productId_locationId: { productId: item.productId, locationId: '...' } },\n        //     data: { quantityReserved: { increment: item.quantity } }\n        //   })\n        // }\n        await (0,_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            action: \"TENANT_CREATED\",\n            actorId: vendorId,\n            actorEmail: \"vendor@mvm\",\n            tenantId,\n            targetType: \"VENDOR_SUB_ORDER\",\n            targetId: subOrderId,\n            metadata: {\n                eventType: \"MVM_SUBORDER_CREATED\",\n                subOrderNumber,\n                parentOrderId: payload.parentOrderId,\n                parentOrderNumber: payload.parentOrderNumber,\n                itemCount: items.length,\n                grandTotal,\n                commissionAmount,\n                vendorEarnings: payload.vendorEarnings\n            }\n        });\n        await markEventProcessed(idempotencyKey, \"mvm.suborder.created\", tenantId, vendorId);\n        return {\n            success: true,\n            reservationId: `mvm_res_${Date.now()}`\n        };\n    } catch (error) {\n        console.error(\"[MVM] Error handling sub-order created:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n/**\n * Handle sub-order delivered\n * - Releases inventory reservation (stock already decremented)\n * - Updates customer metrics\n * - Marks vendor earnings as ready\n */ async function handleSubOrderDelivered(event) {\n    const { idempotencyKey, payload } = event;\n    if (await isEventProcessed(idempotencyKey)) {\n        return {\n            success: true\n        };\n    }\n    try {\n        const { tenantId, vendorId, subOrderId, subOrderNumber, grandTotal, commissionAmount, customerId } = payload;\n        console.log(\"[MVM] Sub-order delivered:\", subOrderNumber);\n        // TODO: Update customer metrics\n        // if (customerId) {\n        //   await prisma.customer.update({\n        //     where: { id: customerId },\n        //     data: {\n        //       totalOrders: { increment: 1 },\n        //       totalSpent: { increment: grandTotal },\n        //       lastOrderAt: new Date()\n        //     }\n        //   })\n        // }\n        await (0,_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            action: \"TENANT_UPDATED\",\n            actorId: vendorId,\n            actorEmail: \"vendor@mvm\",\n            tenantId,\n            targetType: \"VENDOR_SUB_ORDER\",\n            targetId: subOrderId,\n            metadata: {\n                eventType: \"MVM_SUBORDER_DELIVERED\",\n                subOrderNumber,\n                grandTotal,\n                commissionAmount,\n                vendorEarnings: payload.vendorEarnings,\n                customerId,\n                deliveredAt: payload.deliveredAt\n            }\n        });\n        await markEventProcessed(idempotencyKey, \"mvm.suborder.delivered\", tenantId, vendorId);\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"[MVM] Error handling sub-order delivered:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n/**\n * Handle sub-order cancelled\n * - Releases inventory reservation\n */ async function handleSubOrderCancelled(event) {\n    const { idempotencyKey, payload } = event;\n    if (await isEventProcessed(idempotencyKey)) {\n        return {\n            success: true\n        };\n    }\n    try {\n        const { tenantId, vendorId, subOrderId, subOrderNumber, items, reason } = payload;\n        console.log(\"[MVM] Sub-order cancelled:\", subOrderNumber, \"Reason:\", reason);\n        // TODO: Release inventory reservation\n        // for (const item of items) {\n        //   await prisma.inventoryLevel.update({\n        //     where: { productId_locationId: { productId: item.productId, locationId: '...' } },\n        //     data: { quantityReserved: { decrement: item.quantity } }\n        //   })\n        // }\n        await (0,_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            action: \"TENANT_UPDATED\",\n            actorId: vendorId,\n            actorEmail: \"vendor@mvm\",\n            tenantId,\n            targetType: \"VENDOR_SUB_ORDER\",\n            targetId: subOrderId,\n            metadata: {\n                eventType: \"MVM_SUBORDER_CANCELLED\",\n                subOrderNumber,\n                parentOrderId: payload.parentOrderId,\n                reason,\n                itemCount: items.length,\n                cancelledAt: payload.cancelledAt\n            }\n        });\n        await markEventProcessed(idempotencyKey, \"mvm.suborder.cancelled\", tenantId, vendorId);\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"[MVM] Error handling sub-order cancelled:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n// ============================================================================\n// COMMISSION & PAYOUT HANDLERS\n// ============================================================================\n/**\n * Handle commission earned\n * - Creates commission ledger entry (for audit/reporting)\n * - Does NOT move money\n */ async function handleCommissionEarned(event) {\n    const { idempotencyKey, payload } = event;\n    if (await isEventProcessed(idempotencyKey)) {\n        return {\n            success: true\n        };\n    }\n    try {\n        const { tenantId, vendorId, subOrderId, subOrderNumber, commissionRate, commissionAmount, orderTotal } = payload;\n        console.log(\"[MVM] Commission earned: $\" + commissionAmount, \"on order\", subOrderNumber);\n        console.log(\"[MVM] Rate:\", commissionRate + \"%\", \"Order total: $\" + orderTotal);\n        // NOTE: No actual money movement here - this is for audit/reporting only\n        // Actual payout would be handled by a separate payout service\n        await (0,_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            action: \"TENANT_UPDATED\",\n            actorId: vendorId,\n            actorEmail: \"vendor@mvm\",\n            tenantId,\n            targetType: \"COMMISSION\",\n            targetId: subOrderId,\n            metadata: {\n                eventType: \"MVM_COMMISSION_EARNED\",\n                subOrderNumber,\n                orderTotal,\n                commissionRate,\n                commissionAmount,\n                vendorEarnings: payload.vendorEarnings,\n                earnedAt: payload.earnedAt\n            }\n        });\n        await markEventProcessed(idempotencyKey, \"mvm.commission.earned\", tenantId, vendorId);\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"[MVM] Error handling commission earned:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n/**\n * Handle payout ready\n * - Logs payout readiness (for audit)\n * - Does NOT execute payout (handled by external system)\n */ async function handlePayoutReady(event) {\n    const { idempotencyKey, payload } = event;\n    if (await isEventProcessed(idempotencyKey)) {\n        return {\n            success: true\n        };\n    }\n    try {\n        const { tenantId, vendorId, payoutRecordId, netAmount, currency, subOrderIds } = payload;\n        console.log(\"[MVM] Payout ready: $\" + netAmount, currency, \"for vendor\", vendorId);\n        console.log(\"[MVM] Includes\", subOrderIds.length, \"sub-orders\");\n        // NOTE: No actual payout execution here\n        // This only logs that a payout is ready for processing by external system\n        await (0,_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            action: \"TENANT_UPDATED\",\n            actorId: vendorId,\n            actorEmail: \"vendor@mvm\",\n            tenantId,\n            targetType: \"PAYOUT\",\n            targetId: payoutRecordId,\n            metadata: {\n                eventType: \"MVM_PAYOUT_READY\",\n                grossAmount: payload.grossAmount,\n                commissionAmount: payload.commissionAmount,\n                netAmount,\n                currency,\n                subOrderCount: subOrderIds.length,\n                scheduledAt: payload.scheduledAt\n            }\n        });\n        // TODO: Notify vendor of pending payout\n        // await notificationService.send({\n        //   tenantId,\n        //   channel: 'EMAIL',\n        //   templateId: 'vendor_payout_ready',\n        //   templateData: { netAmount, currency, scheduledAt: payload.scheduledAt }\n        // })\n        await markEventProcessed(idempotencyKey, \"mvm.payout.ready\", tenantId, vendorId);\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"[MVM] Error handling payout ready:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n// ============================================================================\n// EVENT ROUTER\n// ============================================================================\n/**\n * Route MVM events to appropriate handlers\n */ async function handleMVMEvent(event) {\n    const { eventType } = event;\n    console.log(\"[MVM] Processing event:\", eventType);\n    switch(eventType){\n        // Vendor lifecycle\n        case \"mvm.vendor.onboarding_completed\":\n            return handleVendorOnboarded(event);\n        case \"mvm.vendor.approved\":\n            return handleVendorApproved(event);\n        case \"mvm.vendor.suspended\":\n            return handleVendorSuspended(event);\n        // Order splitting\n        case \"mvm.order.split\":\n            return handleOrderSplit(event);\n        case \"mvm.suborder.created\":\n            return handleSubOrderCreated(event);\n        case \"mvm.suborder.delivered\":\n            return handleSubOrderDelivered(event);\n        case \"mvm.suborder.cancelled\":\n            return handleSubOrderCancelled(event);\n        // Commission & payout\n        case \"mvm.commission.earned\":\n            return handleCommissionEarned(event);\n        case \"mvm.payout.ready\":\n            return handlePayoutReady(event);\n        default:\n            console.log(\"[MVM] Unknown event type:\", eventType);\n            return {\n                success: true\n            } // Don't fail on unknown events\n            ;\n    }\n}\n// ============================================================================\n// ENTITLEMENTS\n// ============================================================================\n/**\n * Get MVM entitlements for a tenant\n * Used by MVM module to check limits\n */ async function getMVMEntitlements(tenantId) {\n    try {\n        const entitlement = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.entitlement.findUnique({\n            where: {\n                tenantId_module: {\n                    tenantId,\n                    module: \"MVM\"\n                }\n            },\n            include: {\n                subscription: true\n            }\n        });\n        if (!entitlement || entitlement.status !== \"ACTIVE\") {\n            return {\n                success: false,\n                module: \"MVM\",\n                features: [],\n                limits: {},\n                expiresAt: null\n            };\n        }\n        // Parse limits from JSON\n        const limits = entitlement.limits || {};\n        return {\n            success: true,\n            module: \"MVM\",\n            features: [\n                \"vendors\",\n                \"vendor_onboarding\",\n                \"vendor_dashboard\",\n                \"order_splitting\",\n                \"commission_management\",\n                \"payout_tracking\"\n            ],\n            limits: {\n                max_vendors: limits.max_vendors ?? 10,\n                max_vendor_staff_per_vendor: limits.max_vendor_staff_per_vendor ?? 3,\n                max_products_per_vendor: limits.max_products_per_vendor ?? 50,\n                max_commission_rules: limits.max_commission_rules ?? 5,\n                max_vendor_tiers: limits.max_vendor_tiers ?? 3,\n                commission_rate_min: limits.commission_rate_min ?? 5,\n                commission_rate_max: limits.commission_rate_max ?? 30\n            },\n            expiresAt: entitlement.validUntil?.toISOString() ?? null\n        };\n    } catch (error) {\n        console.error(\"[MVM] Error fetching entitlements:\", error);\n        return {\n            success: false,\n            module: \"MVM\",\n            features: [],\n            limits: {},\n            expiresAt: null\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL212bS1ldmVudC1oYW5kbGVycy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBb0JDLEdBRWdDO0FBQ087QUF5SHhDLCtFQUErRTtBQUMvRSxvQkFBb0I7QUFDcEIsK0VBQStFO0FBRS9FLGVBQWVFLGlCQUFpQkMsY0FBc0I7SUFDcEQsTUFBTUMsV0FBVyxNQUFNSiwyQ0FBTUEsQ0FBQ0ssUUFBUSxDQUFDQyxTQUFTLENBQUM7UUFDL0NDLE9BQU87WUFDTEMsVUFBVUw7WUFDVk0sWUFBWTtRQUNkO0lBQ0Y7SUFDQSxPQUFPLENBQUMsQ0FBQ0w7QUFDWDtBQUVBLGVBQWVNLG1CQUNiUCxjQUFzQixFQUN0QlEsU0FBaUIsRUFDakJDLFFBQWdCLEVBQ2hCQyxPQUFlO0lBRWYsTUFBTVosc0RBQWNBLENBQUM7UUFDbkJhLFFBQVE7UUFDUkQsU0FBU0EsV0FBVztRQUNwQkUsWUFBWTtRQUNaSDtRQUNBSCxZQUFZO1FBQ1pELFVBQVVMO1FBQ1ZhLFVBQVU7WUFDUkw7WUFDQU0sYUFBYSxJQUFJQyxPQUFPQyxXQUFXO1FBQ3JDO0lBQ0Y7QUFDRjtBQUVBLCtFQUErRTtBQUMvRSw0QkFBNEI7QUFDNUIsK0VBQStFO0FBRS9FOzs7O0NBSUMsR0FDTSxlQUFlQyxzQkFDcEJDLEtBQXlEO0lBRXpELE1BQU0sRUFBRWxCLGNBQWMsRUFBRW1CLE9BQU8sRUFBRSxHQUFHRDtJQUVwQyxJQUFJLE1BQU1uQixpQkFBaUJDLGlCQUFpQjtRQUMxQ29CLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0NyQjtRQUM5QyxPQUFPO1lBQUVzQixTQUFTO1FBQUs7SUFDekI7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFYixRQUFRLEVBQUVjLFFBQVEsRUFBRUMsVUFBVSxFQUFFQyxLQUFLLEVBQUVDLGNBQWMsRUFBRSxHQUFHUDtRQUVsRUMsUUFBUUMsR0FBRyxDQUFDLDJCQUEyQkcsWUFBWSxjQUFjZjtRQUVqRSxtQkFB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VTtnQkFDUjtnQkFDQTtnQkFDQTtnQkFDQTtnQkFDQTtnQkFDQTthQUNEO1lBQ0RDLFFBQVE7Z0JBQ05FLGFBQWFGLE9BQU9FLFdBQVcsSUFBSTtnQkFDbkNDLDZCQUE2QkgsT0FBT0csMkJBQTJCLElBQUk7Z0JBQ25FQyx5QkFBeUJKLE9BQU9JLHVCQUF1QixJQUFJO2dCQUMzREMsc0JBQXNCTCxPQUFPSyxvQkFBb0IsSUFBSTtnQkFDckRDLGtCQUFrQk4sT0FBT00sZ0JBQWdCLElBQUk7Z0JBQzdDQyxxQkFBcUJQLE9BQU9PLG1CQUFtQixJQUFJO2dCQUNuREMscUJBQXFCUixPQUFPUSxtQkFBbUIsSUFBSTtZQUNyRDtZQUNBUCxXQUFXVCxZQUFZaUIsVUFBVSxFQUFFOUUsaUJBQWlCO1FBQ3REO0lBQ0YsRUFBRSxPQUFPYyxPQUFPO1FBQ2RWLFFBQVFVLEtBQUssQ0FBQyxzQ0FBc0NBO1FBQ3BELE9BQU87WUFDTFIsU0FBUztZQUNUMEQsUUFBUTtZQUNSSSxVQUFVLEVBQUU7WUFDWkMsUUFBUSxDQUFDO1lBQ1RDLFdBQVc7UUFDYjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYWFzLWNvcmUvLi9zcmMvbGliL212bS1ldmVudC1oYW5kbGVycy50cz83YzUwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTVZNIEV2ZW50IEhhbmRsZXJzXG4gKiBcbiAqIENvcmUncyBoYW5kbGVycyBmb3IgZXZlbnRzIGVtaXR0ZWQgYnkgdGhlIE1WTSAoTXVsdGkgVmVuZG9yIE1hcmtldHBsYWNlKSBtb2R1bGUuXG4gKiBcbiAqIEV2ZW50cyBoYW5kbGVkOlxuICogLSBtdm0udmVuZG9yLm9uYm9hcmRpbmdfY29tcGxldGVkIOKGkiBDcmVhdGUgdmVuZG9yIGF1ZGl0LCBub3RpZnkgdGVuYW50IGFkbWluXG4gKiAtIG12bS52ZW5kb3IuYXBwcm92ZWQg4oaSIFVwZGF0ZSB2ZW5kb3Igc3RhdHVzIGF1ZGl0XG4gKiAtIG12bS52ZW5kb3Iuc3VzcGVuZGVkIOKGkiBVcGRhdGUgdmVuZG9yIHN0YXR1cyBhdWRpdFxuICogLSBtdm0ub3JkZXIuc3BsaXQg4oaSIExvZyBvcmRlciBzcGxpdCwgdXBkYXRlIHBhcmVudCBvcmRlclxuICogLSBtdm0uc3Vib3JkZXIuY3JlYXRlZCDihpIgUmVzZXJ2ZSBpbnZlbnRvcnkgZm9yIHZlbmRvciBpdGVtc1xuICogLSBtdm0uc3Vib3JkZXIuZGVsaXZlcmVkIOKGkiBNYXJrIGVhcm5pbmdzIGFzIHJlYWR5LCB1cGRhdGUgY3VzdG9tZXIgbWV0cmljc1xuICogLSBtdm0uc3Vib3JkZXIuY2FuY2VsbGVkIOKGkiBSZWxlYXNlIGludmVudG9yeVxuICogLSBtdm0uY29tbWlzc2lvbi5lYXJuZWQg4oaSIENyZWF0ZSBjb21taXNzaW9uIGxlZGdlciBlbnRyeVxuICogLSBtdm0ucGF5b3V0LnJlYWR5IOKGkiBMb2cgcGF5b3V0IHJlYWRpbmVzcyAobm8gbW9uZXkgbW92ZW1lbnQpXG4gKiBcbiAqIFJVTEVTOlxuICogLSBDb3JlIHByb2Nlc3NlcyBldmVudHMsIG1vZHVsZXMgZW1pdCBvbmx5XG4gKiAtIEludmVudG9yeS93YWxsZXQgdXBkYXRlcyBoYXBwZW4gaGVyZSwgbm90IGluIE1WTVxuICogLSBJZGVtcG90ZW5jeSBlbmZvcmNlZCB2aWEgdW5pcXVlIGtleXNcbiAqL1xuXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuL3ByaXNtYSdcbmltcG9ydCB7IGNyZWF0ZUF1ZGl0TG9nIH0gZnJvbSAnLi9hdWRpdCdcbmltcG9ydCB7IEF1ZGl0QWN0aW9uIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRZUEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmludGVyZmFjZSBNVk1FdmVudEJhc2Uge1xuICBldmVudElkOiBzdHJpbmdcbiAgZXZlbnRUeXBlOiBzdHJpbmdcbiAgdGltZXN0YW1wOiBzdHJpbmdcbiAgaWRlbXBvdGVuY3lLZXk6IHN0cmluZ1xuICB0ZW5hbnRJZDogc3RyaW5nXG4gIHZlcnNpb246ICcxLjAnXG59XG5cbmludGVyZmFjZSBWZW5kb3JPbmJvYXJkZWRQYXlsb2FkIHtcbiAgdmVuZG9ySWQ6IHN0cmluZ1xuICB2ZW5kb3JOYW1lOiBzdHJpbmdcbiAgdGVuYW50SWQ6IHN0cmluZ1xuICBlbWFpbDogc3RyaW5nXG4gIHRpZXJJZD86IHN0cmluZ1xuICB0aWVyTmFtZT86IHN0cmluZ1xuICBjb21taXNzaW9uUmF0ZTogbnVtYmVyXG4gIG9uYm9hcmRlZEF0OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFZlbmRvclN0YXR1c0NoYW5nZWRQYXlsb2FkIHtcbiAgdmVuZG9ySWQ6IHN0cmluZ1xuICB2ZW5kb3JOYW1lOiBzdHJpbmdcbiAgdGVuYW50SWQ6IHN0cmluZ1xuICBwcmV2aW91c1N0YXR1czogc3RyaW5nXG4gIG5ld1N0YXR1czogc3RyaW5nXG4gIHJlYXNvbj86IHN0cmluZ1xuICBjaGFuZ2VkQnk/OiBzdHJpbmdcbiAgY2hhbmdlZEF0OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIE9yZGVyU3BsaXRQYXlsb2FkIHtcbiAgdGVuYW50SWQ6IHN0cmluZ1xuICBwYXJlbnRPcmRlcklkOiBzdHJpbmdcbiAgcGFyZW50T3JkZXJOdW1iZXI6IHN0cmluZ1xuICB2ZW5kb3JDb3VudDogbnVtYmVyXG4gIHN1Yk9yZGVySWRzOiBzdHJpbmdbXVxuICBzdWJPcmRlck51bWJlcnM6IHN0cmluZ1tdXG4gIHRvdGFsQW1vdW50OiBudW1iZXJcbiAgdG90YWxDb21taXNzaW9uOiBudW1iZXJcbiAgc3BsaXRBdDogc3RyaW5nXG59XG5cbmludGVyZmFjZSBTdWJPcmRlckNyZWF0ZWRQYXlsb2FkIHtcbiAgdGVuYW50SWQ6IHN0cmluZ1xuICB2ZW5kb3JJZDogc3RyaW5nXG4gIHN1Yk9yZGVySWQ6IHN0cmluZ1xuICBzdWJPcmRlck51bWJlcjogc3RyaW5nXG4gIHBhcmVudE9yZGVySWQ6IHN0cmluZ1xuICBwYXJlbnRPcmRlck51bWJlcjogc3RyaW5nXG4gIGl0ZW1Db3VudDogbnVtYmVyXG4gIGl0ZW1zOiBBcnJheTx7XG4gICAgcHJvZHVjdElkOiBzdHJpbmdcbiAgICB2YXJpYW50SWQ/OiBzdHJpbmdcbiAgICBxdWFudGl0eTogbnVtYmVyXG4gIH0+XG4gIGdyYW5kVG90YWw6IG51bWJlclxuICBjb21taXNzaW9uQW1vdW50OiBudW1iZXJcbiAgdmVuZG9yRWFybmluZ3M6IG51bWJlclxuICBjcmVhdGVkQXQ6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgU3ViT3JkZXJEZWxpdmVyZWRQYXlsb2FkIHtcbiAgdGVuYW50SWQ6IHN0cmluZ1xuICB2ZW5kb3JJZDogc3RyaW5nXG4gIHN1Yk9yZGVySWQ6IHN0cmluZ1xuICBzdWJPcmRlck51bWJlcjogc3RyaW5nXG4gIHBhcmVudE9yZGVySWQ6IHN0cmluZ1xuICBncmFuZFRvdGFsOiBudW1iZXJcbiAgY29tbWlzc2lvbkFtb3VudDogbnVtYmVyXG4gIHZlbmRvckVhcm5pbmdzOiBudW1iZXJcbiAgY3VzdG9tZXJJZD86IHN0cmluZ1xuICBkZWxpdmVyZWRBdDogc3RyaW5nXG59XG5cbmludGVyZmFjZSBTdWJPcmRlckNhbmNlbGxlZFBheWxvYWQge1xuICB0ZW5hbnRJZDogc3RyaW5nXG4gIHZlbmRvcklkOiBzdHJpbmdcbiAgc3ViT3JkZXJJZDogc3RyaW5nXG4gIHN1Yk9yZGVyTnVtYmVyOiBzdHJpbmdcbiAgcGFyZW50T3JkZXJJZDogc3RyaW5nXG4gIGl0ZW1zOiBBcnJheTx7XG4gICAgcHJvZHVjdElkOiBzdHJpbmdcbiAgICB2YXJpYW50SWQ/OiBzdHJpbmdcbiAgICBxdWFudGl0eTogbnVtYmVyXG4gIH0+XG4gIHJlYXNvbjogc3RyaW5nXG4gIGNhbmNlbGxlZEF0OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIENvbW1pc3Npb25FYXJuZWRQYXlsb2FkIHtcbiAgdGVuYW50SWQ6IHN0cmluZ1xuICB2ZW5kb3JJZDogc3RyaW5nXG4gIHN1Yk9yZGVySWQ6IHN0cmluZ1xuICBzdWJPcmRlck51bWJlcjogc3RyaW5nXG4gIG9yZGVyVG90YWw6IG51bWJlclxuICBjb21taXNzaW9uUmF0ZTogbnVtYmVyXG4gIGNvbW1pc3Npb25BbW91bnQ6IG51bWJlclxuICB2ZW5kb3JFYXJuaW5nczogbnVtYmVyXG4gIGVhcm5lZEF0OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFBheW91dFJlYWR5UGF5bG9hZCB7XG4gIHRlbmFudElkOiBzdHJpbmdcbiAgdmVuZG9ySWQ6IHN0cmluZ1xuICBwYXlvdXRSZWNvcmRJZDogc3RyaW5nXG4gIGdyb3NzQW1vdW50OiBudW1iZXJcbiAgY29tbWlzc2lvbkFtb3VudDogbnVtYmVyXG4gIG5ldEFtb3VudDogbnVtYmVyXG4gIGN1cnJlbmN5OiBzdHJpbmdcbiAgc3ViT3JkZXJJZHM6IHN0cmluZ1tdXG4gIHNjaGVkdWxlZEF0OiBzdHJpbmdcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSURFTVBPVEVOQ1kgQ0hFQ0tcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuYXN5bmMgZnVuY3Rpb24gaXNFdmVudFByb2Nlc3NlZChpZGVtcG90ZW5jeUtleTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgcHJpc21hLmF1ZGl0TG9nLmZpbmRGaXJzdCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHRhcmdldElkOiBpZGVtcG90ZW5jeUtleSxcbiAgICAgIHRhcmdldFR5cGU6ICdNVk1fRVZFTlQnXG4gICAgfVxuICB9KVxuICByZXR1cm4gISFleGlzdGluZ1xufVxuXG5hc3luYyBmdW5jdGlvbiBtYXJrRXZlbnRQcm9jZXNzZWQoXG4gIGlkZW1wb3RlbmN5S2V5OiBzdHJpbmcsXG4gIGV2ZW50VHlwZTogc3RyaW5nLFxuICB0ZW5hbnRJZDogc3RyaW5nLFxuICBhY3RvcklkOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgYWN0aW9uOiAnVEVOQU5UX1VQREFURUQnIGFzIEF1ZGl0QWN0aW9uLFxuICAgIGFjdG9ySWQ6IGFjdG9ySWQgfHwgJ212bS1zeXN0ZW0nLFxuICAgIGFjdG9yRW1haWw6ICdtdm0tc3lzdGVtQGludGVybmFsJyxcbiAgICB0ZW5hbnRJZCxcbiAgICB0YXJnZXRUeXBlOiAnTVZNX0VWRU5UJyxcbiAgICB0YXJnZXRJZDogaWRlbXBvdGVuY3lLZXksXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIGV2ZW50VHlwZSxcbiAgICAgIHByb2Nlc3NlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9XG4gIH0pXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFZFTkRPUiBMSUZFQ1lDTEUgSEFORExFUlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBIYW5kbGUgdmVuZG9yIG9uYm9hcmRpbmcgY29tcGxldGVkXG4gKiAtIENyZWF0ZXMgYXVkaXQgbG9nXG4gKiAtIENvdWxkIHRyaWdnZXIgd2VsY29tZSBub3RpZmljYXRpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVZlbmRvck9uYm9hcmRlZChcbiAgZXZlbnQ6IE1WTUV2ZW50QmFzZSAmIHsgcGF5bG9hZDogVmVuZG9yT25ib2FyZGVkUGF5bG9hZCB9XG4pOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICBjb25zdCB7IGlkZW1wb3RlbmN5S2V5LCBwYXlsb2FkIH0gPSBldmVudFxuXG4gIGlmIChhd2FpdCBpc0V2ZW50UHJvY2Vzc2VkKGlkZW1wb3RlbmN5S2V5KSkge1xuICAgIGNvbnNvbGUubG9nKCdbTVZNXSBFdmVudCBhbHJlYWR5IHByb2Nlc3NlZDonLCBpZGVtcG90ZW5jeUtleSlcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyB0ZW5hbnRJZCwgdmVuZG9ySWQsIHZlbmRvck5hbWUsIGVtYWlsLCBjb21taXNzaW9uUmF0ZSB9ID0gcGF5bG9hZFxuXG4gICAgY29uc29sZS5sb2coJ1tNVk1dIFZlbmRvciBvbmJvYXJkZWQ6JywgdmVuZG9yTmFtZSwgJ2ZvciB0ZW5hbnQnLCB0ZW5hbnRJZClcblxuICAgIC8vIENyZWF0ZSBhdWRpdCBsb2dcbiAgICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgICBhY3Rpb246ICdURU5BTlRfQ1JFQVRFRCcgYXMgQXVkaXRBY3Rpb24sXG4gICAgICBhY3RvcklkOiB2ZW5kb3JJZCxcbiAgICAgIGFjdG9yRW1haWw6IGVtYWlsLFxuICAgICAgdGVuYW50SWQsXG4gICAgICB0YXJnZXRUeXBlOiAnVkVORE9SJyxcbiAgICAgIHRhcmdldElkOiB2ZW5kb3JJZCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGV2ZW50VHlwZTogJ01WTV9WRU5ET1JfT05CT0FSREVEJyxcbiAgICAgICAgdmVuZG9yTmFtZSxcbiAgICAgICAgY29tbWlzc2lvblJhdGUsXG4gICAgICAgIHRpZXJJZDogcGF5bG9hZC50aWVySWQsXG4gICAgICAgIHRpZXJOYW1lOiBwYXlsb2FkLnRpZXJOYW1lLFxuICAgICAgICBvbmJvYXJkZWRBdDogcGF5bG9hZC5vbmJvYXJkZWRBdFxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBUT0RPOiBDcmVhdGUgd2VsY29tZSBub3RpZmljYXRpb25cbiAgICAvLyBhd2FpdCBub3RpZmljYXRpb25TZXJ2aWNlLnNlbmQoe1xuICAgIC8vICAgdGVuYW50SWQsXG4gICAgLy8gICByZWNpcGllbnRFbWFpbDogZW1haWwsXG4gICAgLy8gICBjaGFubmVsOiAnRU1BSUwnLFxuICAgIC8vICAgdGVtcGxhdGVJZDogJ3ZlbmRvcl93ZWxjb21lJyxcbiAgICAvLyAgIHRlbXBsYXRlRGF0YTogeyB2ZW5kb3JOYW1lLCBjb21taXNzaW9uUmF0ZSB9XG4gICAgLy8gfSlcblxuICAgIGF3YWl0IG1hcmtFdmVudFByb2Nlc3NlZChpZGVtcG90ZW5jeUtleSwgJ212bS52ZW5kb3Iub25ib2FyZGluZ19jb21wbGV0ZWQnLCB0ZW5hbnRJZCwgdmVuZG9ySWQpXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW01WTV0gRXJyb3IgaGFuZGxpbmcgdmVuZG9yIG9uYm9hcmRlZDonLCBlcnJvcilcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBIYW5kbGUgdmVuZG9yIGFwcHJvdmVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVWZW5kb3JBcHByb3ZlZChcbiAgZXZlbnQ6IE1WTUV2ZW50QmFzZSAmIHsgcGF5bG9hZDogVmVuZG9yU3RhdHVzQ2hhbmdlZFBheWxvYWQgfVxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgY29uc3QgeyBpZGVtcG90ZW5jeUtleSwgcGF5bG9hZCB9ID0gZXZlbnRcblxuICBpZiAoYXdhaXQgaXNFdmVudFByb2Nlc3NlZChpZGVtcG90ZW5jeUtleSkpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyB0ZW5hbnRJZCwgdmVuZG9ySWQsIHZlbmRvck5hbWUsIGNoYW5nZWRCeSB9ID0gcGF5bG9hZFxuXG4gICAgY29uc29sZS5sb2coJ1tNVk1dIFZlbmRvciBhcHByb3ZlZDonLCB2ZW5kb3JOYW1lKVxuXG4gICAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgICAgYWN0aW9uOiAnVEVOQU5UX1VQREFURUQnIGFzIEF1ZGl0QWN0aW9uLFxuICAgICAgYWN0b3JJZDogY2hhbmdlZEJ5IHx8ICdzeXN0ZW0nLFxuICAgICAgYWN0b3JFbWFpbDogJ2FkbWluQHRlbmFudCcsXG4gICAgICB0ZW5hbnRJZCxcbiAgICAgIHRhcmdldFR5cGU6ICdWRU5ET1InLFxuICAgICAgdGFyZ2V0SWQ6IHZlbmRvcklkLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgZXZlbnRUeXBlOiAnTVZNX1ZFTkRPUl9BUFBST1ZFRCcsXG4gICAgICAgIHZlbmRvck5hbWUsXG4gICAgICAgIHByZXZpb3VzU3RhdHVzOiBwYXlsb2FkLnByZXZpb3VzU3RhdHVzLFxuICAgICAgICBuZXdTdGF0dXM6IHBheWxvYWQubmV3U3RhdHVzLFxuICAgICAgICBjaGFuZ2VkQXQ6IHBheWxvYWQuY2hhbmdlZEF0XG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFRPRE86IE5vdGlmeSB2ZW5kb3Igb2YgYXBwcm92YWxcbiAgICAvLyBhd2FpdCBub3RpZmljYXRpb25TZXJ2aWNlLnNlbmQoey4uLn0pXG5cbiAgICBhd2FpdCBtYXJrRXZlbnRQcm9jZXNzZWQoaWRlbXBvdGVuY3lLZXksICdtdm0udmVuZG9yLmFwcHJvdmVkJywgdGVuYW50SWQsIGNoYW5nZWRCeSB8fCAnc3lzdGVtJylcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbTVZNXSBFcnJvciBoYW5kbGluZyB2ZW5kb3IgYXBwcm92ZWQ6JywgZXJyb3IpXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyB9XG4gIH1cbn1cblxuLyoqXG4gKiBIYW5kbGUgdmVuZG9yIHN1c3BlbmRlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlVmVuZG9yU3VzcGVuZGVkKFxuICBldmVudDogTVZNRXZlbnRCYXNlICYgeyBwYXlsb2FkOiBWZW5kb3JTdGF0dXNDaGFuZ2VkUGF5bG9hZCB9XG4pOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICBjb25zdCB7IGlkZW1wb3RlbmN5S2V5LCBwYXlsb2FkIH0gPSBldmVudFxuXG4gIGlmIChhd2FpdCBpc0V2ZW50UHJvY2Vzc2VkKGlkZW1wb3RlbmN5S2V5KSkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHRlbmFudElkLCB2ZW5kb3JJZCwgdmVuZG9yTmFtZSwgcmVhc29uLCBjaGFuZ2VkQnkgfSA9IHBheWxvYWRcblxuICAgIGNvbnNvbGUubG9nKCdbTVZNXSBWZW5kb3Igc3VzcGVuZGVkOicsIHZlbmRvck5hbWUsICdSZWFzb246JywgcmVhc29uKVxuXG4gICAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgICAgYWN0aW9uOiAnVEVOQU5UX1NVU1BFTkRFRCcgYXMgQXVkaXRBY3Rpb24sXG4gICAgICBhY3RvcklkOiBjaGFuZ2VkQnkgfHwgJ3N5c3RlbScsXG4gICAgICBhY3RvckVtYWlsOiAnYWRtaW5AdGVuYW50JyxcbiAgICAgIHRlbmFudElkLFxuICAgICAgdGFyZ2V0VHlwZTogJ1ZFTkRPUicsXG4gICAgICB0YXJnZXRJZDogdmVuZG9ySWQsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBldmVudFR5cGU6ICdNVk1fVkVORE9SX1NVU1BFTkRFRCcsXG4gICAgICAgIHZlbmRvck5hbWUsXG4gICAgICAgIHJlYXNvbixcbiAgICAgICAgcHJldmlvdXNTdGF0dXM6IHBheWxvYWQucHJldmlvdXNTdGF0dXMsXG4gICAgICAgIGNoYW5nZWRBdDogcGF5bG9hZC5jaGFuZ2VkQXRcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgYXdhaXQgbWFya0V2ZW50UHJvY2Vzc2VkKGlkZW1wb3RlbmN5S2V5LCAnbXZtLnZlbmRvci5zdXNwZW5kZWQnLCB0ZW5hbnRJZCwgY2hhbmdlZEJ5IHx8ICdzeXN0ZW0nKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tNVk1dIEVycm9yIGhhbmRsaW5nIHZlbmRvciBzdXNwZW5kZWQ6JywgZXJyb3IpXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyB9XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gT1JERVIgU1BMSVRUSU5HIEhBTkRMRVJTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogSGFuZGxlIG9yZGVyIHNwbGl0XG4gKiAtIExvZ3MgdGhlIHNwbGl0IGZvciBhdWRpdFxuICogLSBVcGRhdGVzIHBhcmVudCBvcmRlciBtZXRhZGF0YSAoaWYgbmVlZGVkKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlT3JkZXJTcGxpdChcbiAgZXZlbnQ6IE1WTUV2ZW50QmFzZSAmIHsgcGF5bG9hZDogT3JkZXJTcGxpdFBheWxvYWQgfVxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgY29uc3QgeyBpZGVtcG90ZW5jeUtleSwgcGF5bG9hZCB9ID0gZXZlbnRcblxuICBpZiAoYXdhaXQgaXNFdmVudFByb2Nlc3NlZChpZGVtcG90ZW5jeUtleSkpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyB0ZW5hbnRJZCwgcGFyZW50T3JkZXJJZCwgcGFyZW50T3JkZXJOdW1iZXIsIHZlbmRvckNvdW50LCB0b3RhbEFtb3VudCwgdG90YWxDb21taXNzaW9uIH0gPSBwYXlsb2FkXG5cbiAgICBjb25zb2xlLmxvZygnW01WTV0gT3JkZXIgc3BsaXQ6JywgcGFyZW50T3JkZXJOdW1iZXIsICdpbnRvJywgdmVuZG9yQ291bnQsICdzdWItb3JkZXJzJylcblxuICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgIGFjdGlvbjogJ1RFTkFOVF9VUERBVEVEJyBhcyBBdWRpdEFjdGlvbixcbiAgICAgIGFjdG9ySWQ6ICdzeXN0ZW0nLFxuICAgICAgYWN0b3JFbWFpbDogJ212bS1zeXN0ZW1AaW50ZXJuYWwnLFxuICAgICAgdGVuYW50SWQsXG4gICAgICB0YXJnZXRUeXBlOiAnT1JERVJfU1BMSVQnLFxuICAgICAgdGFyZ2V0SWQ6IHBhcmVudE9yZGVySWQsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBldmVudFR5cGU6ICdNVk1fT1JERVJfU1BMSVQnLFxuICAgICAgICBwYXJlbnRPcmRlck51bWJlcixcbiAgICAgICAgdmVuZG9yQ291bnQsXG4gICAgICAgIHN1Yk9yZGVySWRzOiBwYXlsb2FkLnN1Yk9yZGVySWRzLFxuICAgICAgICBzdWJPcmRlck51bWJlcnM6IHBheWxvYWQuc3ViT3JkZXJOdW1iZXJzLFxuICAgICAgICB0b3RhbEFtb3VudCxcbiAgICAgICAgdG90YWxDb21taXNzaW9uLFxuICAgICAgICBzcGxpdEF0OiBwYXlsb2FkLnNwbGl0QXRcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgYXdhaXQgbWFya0V2ZW50UHJvY2Vzc2VkKGlkZW1wb3RlbmN5S2V5LCAnbXZtLm9yZGVyLnNwbGl0JywgdGVuYW50SWQsICdzeXN0ZW0nKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tNVk1dIEVycm9yIGhhbmRsaW5nIG9yZGVyIHNwbGl0OicsIGVycm9yKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicgfVxuICB9XG59XG5cbi8qKlxuICogSGFuZGxlIHN1Yi1vcmRlciBjcmVhdGVkXG4gKiAtIFJlc2VydmVzIGludmVudG9yeSBmb3IgdmVuZG9yIGl0ZW1zXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVTdWJPcmRlckNyZWF0ZWQoXG4gIGV2ZW50OiBNVk1FdmVudEJhc2UgJiB7IHBheWxvYWQ6IFN1Yk9yZGVyQ3JlYXRlZFBheWxvYWQgfVxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nOyByZXNlcnZhdGlvbklkPzogc3RyaW5nIH0+IHtcbiAgY29uc3QgeyBpZGVtcG90ZW5jeUtleSwgcGF5bG9hZCB9ID0gZXZlbnRcblxuICBpZiAoYXdhaXQgaXNFdmVudFByb2Nlc3NlZChpZGVtcG90ZW5jeUtleSkpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyB0ZW5hbnRJZCwgdmVuZG9ySWQsIHN1Yk9yZGVySWQsIHN1Yk9yZGVyTnVtYmVyLCBpdGVtcywgZ3JhbmRUb3RhbCwgY29tbWlzc2lvbkFtb3VudCB9ID0gcGF5bG9hZFxuXG4gICAgY29uc29sZS5sb2coJ1tNVk1dIFN1Yi1vcmRlciBjcmVhdGVkOicsIHN1Yk9yZGVyTnVtYmVyLCAnZm9yIHZlbmRvcicsIHZlbmRvcklkKVxuICAgIGNvbnNvbGUubG9nKCdbTVZNXSBJdGVtczonLCBpdGVtcy5sZW5ndGgsICdUb3RhbDogJCcgKyBncmFuZFRvdGFsLCAnQ29tbWlzc2lvbjogJCcgKyBjb21taXNzaW9uQW1vdW50KVxuXG4gICAgLy8gVE9ETzogUmVzZXJ2ZSBpbnZlbnRvcnkgZm9yIHRoZXNlIGl0ZW1zXG4gICAgLy8gSW4gcHJvZHVjdGlvbjpcbiAgICAvLyBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAvLyAgIGF3YWl0IHByaXNtYS5pbnZlbnRvcnlMZXZlbC51cGRhdGUoe1xuICAgIC8vICAgICB3aGVyZTogeyBwcm9kdWN0SWRfbG9jYXRpb25JZDogeyBwcm9kdWN0SWQ6IGl0ZW0ucHJvZHVjdElkLCBsb2NhdGlvbklkOiAnLi4uJyB9IH0sXG4gICAgLy8gICAgIGRhdGE6IHsgcXVhbnRpdHlSZXNlcnZlZDogeyBpbmNyZW1lbnQ6IGl0ZW0ucXVhbnRpdHkgfSB9XG4gICAgLy8gICB9KVxuICAgIC8vIH1cblxuICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgIGFjdGlvbjogJ1RFTkFOVF9DUkVBVEVEJyBhcyBBdWRpdEFjdGlvbixcbiAgICAgIGFjdG9ySWQ6IHZlbmRvcklkLFxuICAgICAgYWN0b3JFbWFpbDogJ3ZlbmRvckBtdm0nLFxuICAgICAgdGVuYW50SWQsXG4gICAgICB0YXJnZXRUeXBlOiAnVkVORE9SX1NVQl9PUkRFUicsXG4gICAgICB0YXJnZXRJZDogc3ViT3JkZXJJZCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGV2ZW50VHlwZTogJ01WTV9TVUJPUkRFUl9DUkVBVEVEJyxcbiAgICAgICAgc3ViT3JkZXJOdW1iZXIsXG4gICAgICAgIHBhcmVudE9yZGVySWQ6IHBheWxvYWQucGFyZW50T3JkZXJJZCxcbiAgICAgICAgcGFyZW50T3JkZXJOdW1iZXI6IHBheWxvYWQucGFyZW50T3JkZXJOdW1iZXIsXG4gICAgICAgIGl0ZW1Db3VudDogaXRlbXMubGVuZ3RoLFxuICAgICAgICBncmFuZFRvdGFsLFxuICAgICAgICBjb21taXNzaW9uQW1vdW50LFxuICAgICAgICB2ZW5kb3JFYXJuaW5nczogcGF5bG9hZC52ZW5kb3JFYXJuaW5nc1xuICAgICAgfVxuICAgIH0pXG5cbiAgICBhd2FpdCBtYXJrRXZlbnRQcm9jZXNzZWQoaWRlbXBvdGVuY3lLZXksICdtdm0uc3Vib3JkZXIuY3JlYXRlZCcsIHRlbmFudElkLCB2ZW5kb3JJZClcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZXNlcnZhdGlvbklkOiBgbXZtX3Jlc18ke0RhdGUubm93KCl9YCB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW01WTV0gRXJyb3IgaGFuZGxpbmcgc3ViLW9yZGVyIGNyZWF0ZWQ6JywgZXJyb3IpXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyB9XG4gIH1cbn1cblxuLyoqXG4gKiBIYW5kbGUgc3ViLW9yZGVyIGRlbGl2ZXJlZFxuICogLSBSZWxlYXNlcyBpbnZlbnRvcnkgcmVzZXJ2YXRpb24gKHN0b2NrIGFscmVhZHkgZGVjcmVtZW50ZWQpXG4gKiAtIFVwZGF0ZXMgY3VzdG9tZXIgbWV0cmljc1xuICogLSBNYXJrcyB2ZW5kb3IgZWFybmluZ3MgYXMgcmVhZHlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVN1Yk9yZGVyRGVsaXZlcmVkKFxuICBldmVudDogTVZNRXZlbnRCYXNlICYgeyBwYXlsb2FkOiBTdWJPcmRlckRlbGl2ZXJlZFBheWxvYWQgfVxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgY29uc3QgeyBpZGVtcG90ZW5jeUtleSwgcGF5bG9hZCB9ID0gZXZlbnRcblxuICBpZiAoYXdhaXQgaXNFdmVudFByb2Nlc3NlZChpZGVtcG90ZW5jeUtleSkpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyB0ZW5hbnRJZCwgdmVuZG9ySWQsIHN1Yk9yZGVySWQsIHN1Yk9yZGVyTnVtYmVyLCBncmFuZFRvdGFsLCBjb21taXNzaW9uQW1vdW50LCBjdXN0b21lcklkIH0gPSBwYXlsb2FkXG5cbiAgICBjb25zb2xlLmxvZygnW01WTV0gU3ViLW9yZGVyIGRlbGl2ZXJlZDonLCBzdWJPcmRlck51bWJlcilcblxuICAgIC8vIFRPRE86IFVwZGF0ZSBjdXN0b21lciBtZXRyaWNzXG4gICAgLy8gaWYgKGN1c3RvbWVySWQpIHtcbiAgICAvLyAgIGF3YWl0IHByaXNtYS5jdXN0b21lci51cGRhdGUoe1xuICAgIC8vICAgICB3aGVyZTogeyBpZDogY3VzdG9tZXJJZCB9LFxuICAgIC8vICAgICBkYXRhOiB7XG4gICAgLy8gICAgICAgdG90YWxPcmRlcnM6IHsgaW5jcmVtZW50OiAxIH0sXG4gICAgLy8gICAgICAgdG90YWxTcGVudDogeyBpbmNyZW1lbnQ6IGdyYW5kVG90YWwgfSxcbiAgICAvLyAgICAgICBsYXN0T3JkZXJBdDogbmV3IERhdGUoKVxuICAgIC8vICAgICB9XG4gICAgLy8gICB9KVxuICAgIC8vIH1cblxuICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgIGFjdGlvbjogJ1RFTkFOVF9VUERBVEVEJyBhcyBBdWRpdEFjdGlvbixcbiAgICAgIGFjdG9ySWQ6IHZlbmRvcklkLFxuICAgICAgYWN0b3JFbWFpbDogJ3ZlbmRvckBtdm0nLFxuICAgICAgdGVuYW50SWQsXG4gICAgICB0YXJnZXRUeXBlOiAnVkVORE9SX1NVQl9PUkRFUicsXG4gICAgICB0YXJnZXRJZDogc3ViT3JkZXJJZCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGV2ZW50VHlwZTogJ01WTV9TVUJPUkRFUl9ERUxJVkVSRUQnLFxuICAgICAgICBzdWJPcmRlck51bWJlcixcbiAgICAgICAgZ3JhbmRUb3RhbCxcbiAgICAgICAgY29tbWlzc2lvbkFtb3VudCxcbiAgICAgICAgdmVuZG9yRWFybmluZ3M6IHBheWxvYWQudmVuZG9yRWFybmluZ3MsXG4gICAgICAgIGN1c3RvbWVySWQsXG4gICAgICAgIGRlbGl2ZXJlZEF0OiBwYXlsb2FkLmRlbGl2ZXJlZEF0XG4gICAgICB9XG4gICAgfSlcblxuICAgIGF3YWl0IG1hcmtFdmVudFByb2Nlc3NlZChpZGVtcG90ZW5jeUtleSwgJ212bS5zdWJvcmRlci5kZWxpdmVyZWQnLCB0ZW5hbnRJZCwgdmVuZG9ySWQpXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW01WTV0gRXJyb3IgaGFuZGxpbmcgc3ViLW9yZGVyIGRlbGl2ZXJlZDonLCBlcnJvcilcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InIH1cbiAgfVxufVxuXG4vKipcbiAqIEhhbmRsZSBzdWItb3JkZXIgY2FuY2VsbGVkXG4gKiAtIFJlbGVhc2VzIGludmVudG9yeSByZXNlcnZhdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlU3ViT3JkZXJDYW5jZWxsZWQoXG4gIGV2ZW50OiBNVk1FdmVudEJhc2UgJiB7IHBheWxvYWQ6IFN1Yk9yZGVyQ2FuY2VsbGVkUGF5bG9hZCB9XG4pOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICBjb25zdCB7IGlkZW1wb3RlbmN5S2V5LCBwYXlsb2FkIH0gPSBldmVudFxuXG4gIGlmIChhd2FpdCBpc0V2ZW50UHJvY2Vzc2VkKGlkZW1wb3RlbmN5S2V5KSkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHRlbmFudElkLCB2ZW5kb3JJZCwgc3ViT3JkZXJJZCwgc3ViT3JkZXJOdW1iZXIsIGl0ZW1zLCByZWFzb24gfSA9IHBheWxvYWRcblxuICAgIGNvbnNvbGUubG9nKCdbTVZNXSBTdWItb3JkZXIgY2FuY2VsbGVkOicsIHN1Yk9yZGVyTnVtYmVyLCAnUmVhc29uOicsIHJlYXNvbilcblxuICAgIC8vIFRPRE86IFJlbGVhc2UgaW52ZW50b3J5IHJlc2VydmF0aW9uXG4gICAgLy8gZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgLy8gICBhd2FpdCBwcmlzbWEuaW52ZW50b3J5TGV2ZWwudXBkYXRlKHtcbiAgICAvLyAgICAgd2hlcmU6IHsgcHJvZHVjdElkX2xvY2F0aW9uSWQ6IHsgcHJvZHVjdElkOiBpdGVtLnByb2R1Y3RJZCwgbG9jYXRpb25JZDogJy4uLicgfSB9LFxuICAgIC8vICAgICBkYXRhOiB7IHF1YW50aXR5UmVzZXJ2ZWQ6IHsgZGVjcmVtZW50OiBpdGVtLnF1YW50aXR5IH0gfVxuICAgIC8vICAgfSlcbiAgICAvLyB9XG5cbiAgICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgICBhY3Rpb246ICdURU5BTlRfVVBEQVRFRCcgYXMgQXVkaXRBY3Rpb24sXG4gICAgICBhY3RvcklkOiB2ZW5kb3JJZCxcbiAgICAgIGFjdG9yRW1haWw6ICd2ZW5kb3JAbXZtJyxcbiAgICAgIHRlbmFudElkLFxuICAgICAgdGFyZ2V0VHlwZTogJ1ZFTkRPUl9TVUJfT1JERVInLFxuICAgICAgdGFyZ2V0SWQ6IHN1Yk9yZGVySWQsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBldmVudFR5cGU6ICdNVk1fU1VCT1JERVJfQ0FOQ0VMTEVEJyxcbiAgICAgICAgc3ViT3JkZXJOdW1iZXIsXG4gICAgICAgIHBhcmVudE9yZGVySWQ6IHBheWxvYWQucGFyZW50T3JkZXJJZCxcbiAgICAgICAgcmVhc29uLFxuICAgICAgICBpdGVtQ291bnQ6IGl0ZW1zLmxlbmd0aCxcbiAgICAgICAgY2FuY2VsbGVkQXQ6IHBheWxvYWQuY2FuY2VsbGVkQXRcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgYXdhaXQgbWFya0V2ZW50UHJvY2Vzc2VkKGlkZW1wb3RlbmN5S2V5LCAnbXZtLnN1Ym9yZGVyLmNhbmNlbGxlZCcsIHRlbmFudElkLCB2ZW5kb3JJZClcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbTVZNXSBFcnJvciBoYW5kbGluZyBzdWItb3JkZXIgY2FuY2VsbGVkOicsIGVycm9yKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPTU1JU1NJT04gJiBQQVlPVVQgSEFORExFUlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBIYW5kbGUgY29tbWlzc2lvbiBlYXJuZWRcbiAqIC0gQ3JlYXRlcyBjb21taXNzaW9uIGxlZGdlciBlbnRyeSAoZm9yIGF1ZGl0L3JlcG9ydGluZylcbiAqIC0gRG9lcyBOT1QgbW92ZSBtb25leVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ29tbWlzc2lvbkVhcm5lZChcbiAgZXZlbnQ6IE1WTUV2ZW50QmFzZSAmIHsgcGF5bG9hZDogQ29tbWlzc2lvbkVhcm5lZFBheWxvYWQgfVxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgY29uc3QgeyBpZGVtcG90ZW5jeUtleSwgcGF5bG9hZCB9ID0gZXZlbnRcblxuICBpZiAoYXdhaXQgaXNFdmVudFByb2Nlc3NlZChpZGVtcG90ZW5jeUtleSkpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyB0ZW5hbnRJZCwgdmVuZG9ySWQsIHN1Yk9yZGVySWQsIHN1Yk9yZGVyTnVtYmVyLCBjb21taXNzaW9uUmF0ZSwgY29tbWlzc2lvbkFtb3VudCwgb3JkZXJUb3RhbCB9ID0gcGF5bG9hZFxuXG4gICAgY29uc29sZS5sb2coJ1tNVk1dIENvbW1pc3Npb24gZWFybmVkOiAkJyArIGNvbW1pc3Npb25BbW91bnQsICdvbiBvcmRlcicsIHN1Yk9yZGVyTnVtYmVyKVxuICAgIGNvbnNvbGUubG9nKCdbTVZNXSBSYXRlOicsIGNvbW1pc3Npb25SYXRlICsgJyUnLCAnT3JkZXIgdG90YWw6ICQnICsgb3JkZXJUb3RhbClcblxuICAgIC8vIE5PVEU6IE5vIGFjdHVhbCBtb25leSBtb3ZlbWVudCBoZXJlIC0gdGhpcyBpcyBmb3IgYXVkaXQvcmVwb3J0aW5nIG9ubHlcbiAgICAvLyBBY3R1YWwgcGF5b3V0IHdvdWxkIGJlIGhhbmRsZWQgYnkgYSBzZXBhcmF0ZSBwYXlvdXQgc2VydmljZVxuXG4gICAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgICAgYWN0aW9uOiAnVEVOQU5UX1VQREFURUQnIGFzIEF1ZGl0QWN0aW9uLFxuICAgICAgYWN0b3JJZDogdmVuZG9ySWQsXG4gICAgICBhY3RvckVtYWlsOiAndmVuZG9yQG12bScsXG4gICAgICB0ZW5hbnRJZCxcbiAgICAgIHRhcmdldFR5cGU6ICdDT01NSVNTSU9OJyxcbiAgICAgIHRhcmdldElkOiBzdWJPcmRlcklkLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgZXZlbnRUeXBlOiAnTVZNX0NPTU1JU1NJT05fRUFSTkVEJyxcbiAgICAgICAgc3ViT3JkZXJOdW1iZXIsXG4gICAgICAgIG9yZGVyVG90YWwsXG4gICAgICAgIGNvbW1pc3Npb25SYXRlLFxuICAgICAgICBjb21taXNzaW9uQW1vdW50LFxuICAgICAgICB2ZW5kb3JFYXJuaW5nczogcGF5bG9hZC52ZW5kb3JFYXJuaW5ncyxcbiAgICAgICAgZWFybmVkQXQ6IHBheWxvYWQuZWFybmVkQXRcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgYXdhaXQgbWFya0V2ZW50UHJvY2Vzc2VkKGlkZW1wb3RlbmN5S2V5LCAnbXZtLmNvbW1pc3Npb24uZWFybmVkJywgdGVuYW50SWQsIHZlbmRvcklkKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tNVk1dIEVycm9yIGhhbmRsaW5nIGNvbW1pc3Npb24gZWFybmVkOicsIGVycm9yKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicgfVxuICB9XG59XG5cbi8qKlxuICogSGFuZGxlIHBheW91dCByZWFkeVxuICogLSBMb2dzIHBheW91dCByZWFkaW5lc3MgKGZvciBhdWRpdClcbiAqIC0gRG9lcyBOT1QgZXhlY3V0ZSBwYXlvdXQgKGhhbmRsZWQgYnkgZXh0ZXJuYWwgc3lzdGVtKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlUGF5b3V0UmVhZHkoXG4gIGV2ZW50OiBNVk1FdmVudEJhc2UgJiB7IHBheWxvYWQ6IFBheW91dFJlYWR5UGF5bG9hZCB9XG4pOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICBjb25zdCB7IGlkZW1wb3RlbmN5S2V5LCBwYXlsb2FkIH0gPSBldmVudFxuXG4gIGlmIChhd2FpdCBpc0V2ZW50UHJvY2Vzc2VkKGlkZW1wb3RlbmN5S2V5KSkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHRlbmFudElkLCB2ZW5kb3JJZCwgcGF5b3V0UmVjb3JkSWQsIG5ldEFtb3VudCwgY3VycmVuY3ksIHN1Yk9yZGVySWRzIH0gPSBwYXlsb2FkXG5cbiAgICBjb25zb2xlLmxvZygnW01WTV0gUGF5b3V0IHJlYWR5OiAkJyArIG5ldEFtb3VudCwgY3VycmVuY3ksICdmb3IgdmVuZG9yJywgdmVuZG9ySWQpXG4gICAgY29uc29sZS5sb2coJ1tNVk1dIEluY2x1ZGVzJywgc3ViT3JkZXJJZHMubGVuZ3RoLCAnc3ViLW9yZGVycycpXG5cbiAgICAvLyBOT1RFOiBObyBhY3R1YWwgcGF5b3V0IGV4ZWN1dGlvbiBoZXJlXG4gICAgLy8gVGhpcyBvbmx5IGxvZ3MgdGhhdCBhIHBheW91dCBpcyByZWFkeSBmb3IgcHJvY2Vzc2luZyBieSBleHRlcm5hbCBzeXN0ZW1cblxuICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgIGFjdGlvbjogJ1RFTkFOVF9VUERBVEVEJyBhcyBBdWRpdEFjdGlvbixcbiAgICAgIGFjdG9ySWQ6IHZlbmRvcklkLFxuICAgICAgYWN0b3JFbWFpbDogJ3ZlbmRvckBtdm0nLFxuICAgICAgdGVuYW50SWQsXG4gICAgICB0YXJnZXRUeXBlOiAnUEFZT1VUJyxcbiAgICAgIHRhcmdldElkOiBwYXlvdXRSZWNvcmRJZCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGV2ZW50VHlwZTogJ01WTV9QQVlPVVRfUkVBRFknLFxuICAgICAgICBncm9zc0Ftb3VudDogcGF5bG9hZC5ncm9zc0Ftb3VudCxcbiAgICAgICAgY29tbWlzc2lvbkFtb3VudDogcGF5bG9hZC5jb21taXNzaW9uQW1vdW50LFxuICAgICAgICBuZXRBbW91bnQsXG4gICAgICAgIGN1cnJlbmN5LFxuICAgICAgICBzdWJPcmRlckNvdW50OiBzdWJPcmRlcklkcy5sZW5ndGgsXG4gICAgICAgIHNjaGVkdWxlZEF0OiBwYXlsb2FkLnNjaGVkdWxlZEF0XG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIFRPRE86IE5vdGlmeSB2ZW5kb3Igb2YgcGVuZGluZyBwYXlvdXRcbiAgICAvLyBhd2FpdCBub3RpZmljYXRpb25TZXJ2aWNlLnNlbmQoe1xuICAgIC8vICAgdGVuYW50SWQsXG4gICAgLy8gICBjaGFubmVsOiAnRU1BSUwnLFxuICAgIC8vICAgdGVtcGxhdGVJZDogJ3ZlbmRvcl9wYXlvdXRfcmVhZHknLFxuICAgIC8vICAgdGVtcGxhdGVEYXRhOiB7IG5ldEFtb3VudCwgY3VycmVuY3ksIHNjaGVkdWxlZEF0OiBwYXlsb2FkLnNjaGVkdWxlZEF0IH1cbiAgICAvLyB9KVxuXG4gICAgYXdhaXQgbWFya0V2ZW50UHJvY2Vzc2VkKGlkZW1wb3RlbmN5S2V5LCAnbXZtLnBheW91dC5yZWFkeScsIHRlbmFudElkLCB2ZW5kb3JJZClcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbTVZNXSBFcnJvciBoYW5kbGluZyBwYXlvdXQgcmVhZHk6JywgZXJyb3IpXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyB9XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVZFTlQgUk9VVEVSXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogUm91dGUgTVZNIGV2ZW50cyB0byBhcHByb3ByaWF0ZSBoYW5kbGVyc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlTVZNRXZlbnQoXG4gIGV2ZW50OiBNVk1FdmVudEJhc2UgJiB7IHBheWxvYWQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IH1cbik6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gIGNvbnN0IHsgZXZlbnRUeXBlIH0gPSBldmVudFxuXG4gIGNvbnNvbGUubG9nKCdbTVZNXSBQcm9jZXNzaW5nIGV2ZW50OicsIGV2ZW50VHlwZSlcblxuICBzd2l0Y2ggKGV2ZW50VHlwZSkge1xuICAgIC8vIFZlbmRvciBsaWZlY3ljbGVcbiAgICBjYXNlICdtdm0udmVuZG9yLm9uYm9hcmRpbmdfY29tcGxldGVkJzpcbiAgICAgIHJldHVybiBoYW5kbGVWZW5kb3JPbmJvYXJkZWQoZXZlbnQgYXMgdW5rbm93biBhcyBNVk1FdmVudEJhc2UgJiB7IHBheWxvYWQ6IFZlbmRvck9uYm9hcmRlZFBheWxvYWQgfSlcblxuICAgIGNhc2UgJ212bS52ZW5kb3IuYXBwcm92ZWQnOlxuICAgICAgcmV0dXJuIGhhbmRsZVZlbmRvckFwcHJvdmVkKGV2ZW50IGFzIHVua25vd24gYXMgTVZNRXZlbnRCYXNlICYgeyBwYXlsb2FkOiBWZW5kb3JTdGF0dXNDaGFuZ2VkUGF5bG9hZCB9KVxuXG4gICAgY2FzZSAnbXZtLnZlbmRvci5zdXNwZW5kZWQnOlxuICAgICAgcmV0dXJuIGhhbmRsZVZlbmRvclN1c3BlbmRlZChldmVudCBhcyB1bmtub3duIGFzIE1WTUV2ZW50QmFzZSAmIHsgcGF5bG9hZDogVmVuZG9yU3RhdHVzQ2hhbmdlZFBheWxvYWQgfSlcblxuICAgIC8vIE9yZGVyIHNwbGl0dGluZ1xuICAgIGNhc2UgJ212bS5vcmRlci5zcGxpdCc6XG4gICAgICByZXR1cm4gaGFuZGxlT3JkZXJTcGxpdChldmVudCBhcyB1bmtub3duIGFzIE1WTUV2ZW50QmFzZSAmIHsgcGF5bG9hZDogT3JkZXJTcGxpdFBheWxvYWQgfSlcblxuICAgIGNhc2UgJ212bS5zdWJvcmRlci5jcmVhdGVkJzpcbiAgICAgIHJldHVybiBoYW5kbGVTdWJPcmRlckNyZWF0ZWQoZXZlbnQgYXMgdW5rbm93biBhcyBNVk1FdmVudEJhc2UgJiB7IHBheWxvYWQ6IFN1Yk9yZGVyQ3JlYXRlZFBheWxvYWQgfSlcblxuICAgIGNhc2UgJ212bS5zdWJvcmRlci5kZWxpdmVyZWQnOlxuICAgICAgcmV0dXJuIGhhbmRsZVN1Yk9yZGVyRGVsaXZlcmVkKGV2ZW50IGFzIHVua25vd24gYXMgTVZNRXZlbnRCYXNlICYgeyBwYXlsb2FkOiBTdWJPcmRlckRlbGl2ZXJlZFBheWxvYWQgfSlcblxuICAgIGNhc2UgJ212bS5zdWJvcmRlci5jYW5jZWxsZWQnOlxuICAgICAgcmV0dXJuIGhhbmRsZVN1Yk9yZGVyQ2FuY2VsbGVkKGV2ZW50IGFzIHVua25vd24gYXMgTVZNRXZlbnRCYXNlICYgeyBwYXlsb2FkOiBTdWJPcmRlckNhbmNlbGxlZFBheWxvYWQgfSlcblxuICAgIC8vIENvbW1pc3Npb24gJiBwYXlvdXRcbiAgICBjYXNlICdtdm0uY29tbWlzc2lvbi5lYXJuZWQnOlxuICAgICAgcmV0dXJuIGhhbmRsZUNvbW1pc3Npb25FYXJuZWQoZXZlbnQgYXMgdW5rbm93biBhcyBNVk1FdmVudEJhc2UgJiB7IHBheWxvYWQ6IENvbW1pc3Npb25FYXJuZWRQYXlsb2FkIH0pXG5cbiAgICBjYXNlICdtdm0ucGF5b3V0LnJlYWR5JzpcbiAgICAgIHJldHVybiBoYW5kbGVQYXlvdXRSZWFkeShldmVudCBhcyB1bmtub3duIGFzIE1WTUV2ZW50QmFzZSAmIHsgcGF5bG9hZDogUGF5b3V0UmVhZHlQYXlsb2FkIH0pXG5cbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS5sb2coJ1tNVk1dIFVua25vd24gZXZlbnQgdHlwZTonLCBldmVudFR5cGUpXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH0gLy8gRG9uJ3QgZmFpbCBvbiB1bmtub3duIGV2ZW50c1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVOVElUTEVNRU5UU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEdldCBNVk0gZW50aXRsZW1lbnRzIGZvciBhIHRlbmFudFxuICogVXNlZCBieSBNVk0gbW9kdWxlIHRvIGNoZWNrIGxpbWl0c1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TVZNRW50aXRsZW1lbnRzKHRlbmFudElkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhblxuICBtb2R1bGU6ICdNVk0nXG4gIGZlYXR1cmVzOiBzdHJpbmdbXVxuICBsaW1pdHM6IFJlY29yZDxzdHJpbmcsIG51bWJlciB8IG51bGw+XG4gIGV4cGlyZXNBdDogc3RyaW5nIHwgbnVsbFxufT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVudGl0bGVtZW50ID0gYXdhaXQgcHJpc21hLmVudGl0bGVtZW50LmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdGVuYW50SWRfbW9kdWxlOiB7XG4gICAgICAgICAgdGVuYW50SWQsXG4gICAgICAgICAgbW9kdWxlOiAnTVZNJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBzdWJzY3JpcHRpb246IHRydWVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYgKCFlbnRpdGxlbWVudCB8fCBlbnRpdGxlbWVudC5zdGF0dXMgIT09ICdBQ1RJVkUnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbW9kdWxlOiAnTVZNJyxcbiAgICAgICAgZmVhdHVyZXM6IFtdLFxuICAgICAgICBsaW1pdHM6IHt9LFxuICAgICAgICBleHBpcmVzQXQ6IG51bGxcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQYXJzZSBsaW1pdHMgZnJvbSBKU09OXG4gICAgY29uc3QgbGltaXRzID0gKGVudGl0bGVtZW50LmxpbWl0cyBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXIgfCBudWxsPikgfHwge31cblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbW9kdWxlOiAnTVZNJyxcbiAgICAgIGZlYXR1cmVzOiBbXG4gICAgICAgICd2ZW5kb3JzJyxcbiAgICAgICAgJ3ZlbmRvcl9vbmJvYXJkaW5nJyxcbiAgICAgICAgJ3ZlbmRvcl9kYXNoYm9hcmQnLFxuICAgICAgICAnb3JkZXJfc3BsaXR0aW5nJyxcbiAgICAgICAgJ2NvbW1pc3Npb25fbWFuYWdlbWVudCcsXG4gICAgICAgICdwYXlvdXRfdHJhY2tpbmcnXG4gICAgICBdLFxuICAgICAgbGltaXRzOiB7XG4gICAgICAgIG1heF92ZW5kb3JzOiBsaW1pdHMubWF4X3ZlbmRvcnMgPz8gMTAsXG4gICAgICAgIG1heF92ZW5kb3Jfc3RhZmZfcGVyX3ZlbmRvcjogbGltaXRzLm1heF92ZW5kb3Jfc3RhZmZfcGVyX3ZlbmRvciA/PyAzLFxuICAgICAgICBtYXhfcHJvZHVjdHNfcGVyX3ZlbmRvcjogbGltaXRzLm1heF9wcm9kdWN0c19wZXJfdmVuZG9yID8/IDUwLFxuICAgICAgICBtYXhfY29tbWlzc2lvbl9ydWxlczogbGltaXRzLm1heF9jb21taXNzaW9uX3J1bGVzID8/IDUsXG4gICAgICAgIG1heF92ZW5kb3JfdGllcnM6IGxpbWl0cy5tYXhfdmVuZG9yX3RpZXJzID8/IDMsXG4gICAgICAgIGNvbW1pc3Npb25fcmF0ZV9taW46IGxpbWl0cy5jb21taXNzaW9uX3JhdGVfbWluID8/IDUsXG4gICAgICAgIGNvbW1pc3Npb25fcmF0ZV9tYXg6IGxpbWl0cy5jb21taXNzaW9uX3JhdGVfbWF4ID8/IDMwXG4gICAgICB9LFxuICAgICAgZXhwaXJlc0F0OiBlbnRpdGxlbWVudC52YWxpZFVudGlsPy50b0lTT1N0cmluZygpID8/IG51bGxcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW01WTV0gRXJyb3IgZmV0Y2hpbmcgZW50aXRsZW1lbnRzOicsIGVycm9yKVxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1vZHVsZTogJ01WTScsXG4gICAgICBmZWF0dXJlczogW10sXG4gICAgICBsaW1pdHM6IHt9LFxuICAgICAgZXhwaXJlc0F0OiBudWxsXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsicHJpc21hIiwiY3JlYXRlQXVkaXRMb2ciLCJpc0V2ZW50UHJvY2Vzc2VkIiwiaWRlbXBvdGVuY3lLZXkiLCJleGlzdGluZyIsImF1ZGl0TG9nIiwiZmluZEZpcnN0Iiwid2hlcmUiLCJ0YXJnZXRJZCIsInRhcmdldFR5cGUiLCJtYXJrRXZlbnRQcm9jZXNzZWQiLCJldmVudFR5cGUiLCJ0ZW5hbnRJZCIsImFjdG9ySWQiLCJhY3Rpb24iLCJhY3RvckVtYWlsIiwibWV0YWRhdGEiLCJwcm9jZXNzZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImhhbmRsZVZlbmRvck9uYm9hcmRlZCIsImV2ZW50IiwicGF5bG9hZCIsImNvbnNvbGUiLCJsb2ciLCJzdWNjZXNzIiwidmVuZG9ySWQiLCJ2ZW5kb3JOYW1lIiwiZW1haWwiLCJjb21taXNzaW9uUmF0ZSIsInRpZXJJZCIsInRpZXJOYW1lIiwib25ib2FyZGVkQXQiLCJlcnJvciIsIkVycm9yIiwibWVzc2FnZSIsImhhbmRsZVZlbmRvckFwcHJvdmVkIiwiY2hhbmdlZEJ5IiwicHJldmlvdXNTdGF0dXMiLCJuZXdTdGF0dXMiLCJjaGFuZ2VkQXQiLCJoYW5kbGVWZW5kb3JTdXNwZW5kZWQiLCJyZWFzb24iLCJoYW5kbGVPcmRlclNwbGl0IiwicGFyZW50T3JkZXJJZCIsInBhcmVudE9yZGVyTnVtYmVyIiwidmVuZG9yQ291bnQiLCJ0b3RhbEFtb3VudCIsInRvdGFsQ29tbWlzc2lvbiIsInN1Yk9yZGVySWRzIiwic3ViT3JkZXJOdW1iZXJzIiwic3BsaXRBdCIsImhhbmRsZVN1Yk9yZGVyQ3JlYXRlZCIsInN1Yk9yZGVySWQiLCJzdWJPcmRlck51bWJlciIsIml0ZW1zIiwiZ3JhbmRUb3RhbCIsImNvbW1pc3Npb25BbW91bnQiLCJsZW5ndGgiLCJpdGVtQ291bnQiLCJ2ZW5kb3JFYXJuaW5ncyIsInJlc2VydmF0aW9uSWQiLCJub3ciLCJoYW5kbGVTdWJPcmRlckRlbGl2ZXJlZCIsImN1c3RvbWVySWQiLCJkZWxpdmVyZWRBdCIsImhhbmRsZVN1Yk9yZGVyQ2FuY2VsbGVkIiwiY2FuY2VsbGVkQXQiLCJoYW5kbGVDb21taXNzaW9uRWFybmVkIiwib3JkZXJUb3RhbCIsImVhcm5lZEF0IiwiaGFuZGxlUGF5b3V0UmVhZHkiLCJwYXlvdXRSZWNvcmRJZCIsIm5ldEFtb3VudCIsImN1cnJlbmN5IiwiZ3Jvc3NBbW91bnQiLCJzdWJPcmRlckNvdW50Iiwic2NoZWR1bGVkQXQiLCJoYW5kbGVNVk1FdmVudCIsImdldE1WTUVudGl0bGVtZW50cyIsImVudGl0bGVtZW50IiwiZmluZFVuaXF1ZSIsInRlbmFudElkX21vZHVsZSIsIm1vZHVsZSIsImluY2x1ZGUiLCJzdWJzY3JpcHRpb24iLCJzdGF0dXMiLCJmZWF0dXJlcyIsImxpbWl0cyIsImV4cGlyZXNBdCIsIm1heF92ZW5kb3JzIiwibWF4X3ZlbmRvcl9zdGFmZl9wZXJfdmVuZG9yIiwibWF4X3Byb2R1Y3RzX3Blcl92ZW5kb3IiLCJtYXhfY29tbWlzc2lvbl9ydWxlcyIsIm1heF92ZW5kb3JfdGllcnMiLCJjb21taXNzaW9uX3JhdGVfbWluIiwiY29tbWlzc2lvbl9yYXRlX21heCIsInZhbGlkVW50aWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mvm-event-handlers.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PARTNER_SCOPED_MODELS: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.PARTNER_SCOPED_MODELS),\n/* harmony export */   PLATFORM_MODELS: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.PLATFORM_MODELS),\n/* harmony export */   TENANT_SCOPED_MODELS: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.TENANT_SCOPED_MODELS),\n/* harmony export */   TenantIsolationError: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.TenantIsolationError),\n/* harmony export */   clearViolationLogs: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.clearViolationLogs),\n/* harmony export */   createPartnerContext: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.createPartnerContext),\n/* harmony export */   createTenantContext: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.createTenantContext),\n/* harmony export */   getViolationLogs: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.getViolationLogs),\n/* harmony export */   isPartnerScopedModel: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.isPartnerScopedModel),\n/* harmony export */   isTenantScopedModel: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.isTenantScopedModel),\n/* harmony export */   logViolation: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.logViolation),\n/* harmony export */   prisma: () => (/* binding */ prisma),\n/* harmony export */   validatePartnerAccess: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.validatePartnerAccess),\n/* harmony export */   validateTenantAccess: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.validateTenantAccess),\n/* harmony export */   withPartnerData: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withPartnerData),\n/* harmony export */   withPartnerFilter: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withPartnerFilter),\n/* harmony export */   withTenantData: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withTenantData),\n/* harmony export */   withTenantFilter: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withTenantFilter)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tenant-isolation */ \"(rsc)/./src/lib/tenant-isolation.ts\");\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) globalForPrisma.prisma = prisma;\n// Re-export tenant isolation utilities\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUMvREksS0FBS0MsS0FBeUIsR0FBZ0I7UUFBQztRQUFTO0tBQU8sR0FBRyxDQUFTO0FBQzdFLEdBQUU7QUFFRixJQUFJQSxJQUF5QixFQUFjSixnQkFBZ0JFLE1BQU0sR0FBR0E7QUFFcEUsdUNBQXVDO0FBd0JaIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Fhcy1jb3JlLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCh7XG4gIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBbJ2Vycm9yJywgJ3dhcm4nXSA6IFsnZXJyb3InXSxcbn0pXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXG5cbi8vIFJlLWV4cG9ydCB0ZW5hbnQgaXNvbGF0aW9uIHV0aWxpdGllc1xuZXhwb3J0IHtcbiAgdmFsaWRhdGVUZW5hbnRBY2Nlc3MsXG4gIHZhbGlkYXRlUGFydG5lckFjY2VzcyxcbiAgY3JlYXRlVGVuYW50Q29udGV4dCxcbiAgY3JlYXRlUGFydG5lckNvbnRleHQsXG4gIHdpdGhUZW5hbnRGaWx0ZXIsXG4gIHdpdGhUZW5hbnREYXRhLFxuICB3aXRoUGFydG5lckZpbHRlcixcbiAgd2l0aFBhcnRuZXJEYXRhLFxuICBUZW5hbnRJc29sYXRpb25FcnJvcixcbiAgaXNUZW5hbnRTY29wZWRNb2RlbCxcbiAgaXNQYXJ0bmVyU2NvcGVkTW9kZWwsXG4gIGdldFZpb2xhdGlvbkxvZ3MsXG4gIGNsZWFyVmlvbGF0aW9uTG9ncyxcbiAgbG9nVmlvbGF0aW9uLFxuICBURU5BTlRfU0NPUEVEX01PREVMUyxcbiAgUEFSVE5FUl9TQ09QRURfTU9ERUxTLFxuICBQTEFURk9STV9NT0RFTFMsXG4gIHR5cGUgVGVuYW50Q29udGV4dCxcbiAgdHlwZSBQYXJ0bmVyQ29udGV4dCxcbiAgdHlwZSBUZW5hbnRTY29wZWRNb2RlbCxcbiAgdHlwZSBQYXJ0bmVyU2NvcGVkTW9kZWwsXG4gIHR5cGUgUGxhdGZvcm1Nb2RlbFxufSBmcm9tICcuL3RlbmFudC1pc29sYXRpb24nXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsImxvZyIsInByb2Nlc3MiLCJ2YWxpZGF0ZVRlbmFudEFjY2VzcyIsInZhbGlkYXRlUGFydG5lckFjY2VzcyIsImNyZWF0ZVRlbmFudENvbnRleHQiLCJjcmVhdGVQYXJ0bmVyQ29udGV4dCIsIndpdGhUZW5hbnRGaWx0ZXIiLCJ3aXRoVGVuYW50RGF0YSIsIndpdGhQYXJ0bmVyRmlsdGVyIiwid2l0aFBhcnRuZXJEYXRhIiwiVGVuYW50SXNvbGF0aW9uRXJyb3IiLCJpc1RlbmFudFNjb3BlZE1vZGVsIiwiaXNQYXJ0bmVyU2NvcGVkTW9kZWwiLCJnZXRWaW9sYXRpb25Mb2dzIiwiY2xlYXJWaW9sYXRpb25Mb2dzIiwibG9nVmlvbGF0aW9uIiwiVEVOQU5UX1NDT1BFRF9NT0RFTFMiLCJQQVJUTkVSX1NDT1BFRF9NT0RFTFMiLCJQTEFURk9STV9NT0RFTFMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/tenant-isolation.ts":
/*!*************************************!*\
  !*** ./src/lib/tenant-isolation.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PARTNER_SCOPED_MODELS: () => (/* binding */ PARTNER_SCOPED_MODELS),\n/* harmony export */   PLATFORM_MODELS: () => (/* binding */ PLATFORM_MODELS),\n/* harmony export */   TENANT_SCOPED_MODELS: () => (/* binding */ TENANT_SCOPED_MODELS),\n/* harmony export */   TenantIsolationError: () => (/* binding */ TenantIsolationError),\n/* harmony export */   clearViolationLogs: () => (/* binding */ clearViolationLogs),\n/* harmony export */   createPartnerContext: () => (/* binding */ createPartnerContext),\n/* harmony export */   createTenantContext: () => (/* binding */ createTenantContext),\n/* harmony export */   getViolationLogs: () => (/* binding */ getViolationLogs),\n/* harmony export */   isPartnerScopedModel: () => (/* binding */ isPartnerScopedModel),\n/* harmony export */   isTenantScopedModel: () => (/* binding */ isTenantScopedModel),\n/* harmony export */   logViolation: () => (/* binding */ logViolation),\n/* harmony export */   validatePartnerAccess: () => (/* binding */ validatePartnerAccess),\n/* harmony export */   validateTenantAccess: () => (/* binding */ validateTenantAccess),\n/* harmony export */   withPartnerData: () => (/* binding */ withPartnerData),\n/* harmony export */   withPartnerFilter: () => (/* binding */ withPartnerFilter),\n/* harmony export */   withTenantData: () => (/* binding */ withTenantData),\n/* harmony export */   withTenantFilter: () => (/* binding */ withTenantFilter)\n/* harmony export */ });\n/**\n * Tenant Isolation Enforcement\n * \n * This module provides strict tenant data isolation at the database level.\n * Instead of Prisma middleware (which has async context issues), this uses\n * application-level validation before queries are executed.\n * \n * Features:\n * - Pre-query validation functions\n * - SUPER_ADMIN bypass with explicit flag\n * - Violation logging and hard failure\n * - Safe query builders that enforce tenant scoping\n */ // Models that require tenant isolation (tenant-scoped)\nconst TENANT_SCOPED_MODELS = [\n    \"TenantMembership\",\n    \"TenantDomain\",\n    \"AuditLog\"\n];\n// Models that require partner isolation (partner-scoped)\n// These are separate from tenant isolation - partners are platform-level\nconst PARTNER_SCOPED_MODELS = [\n    \"PartnerUser\",\n    \"PartnerAgreement\",\n    \"PartnerReferralCode\",\n    \"PartnerReferral\",\n    \"PartnerEarning\"\n];\n// Platform-level models (no isolation, Super Admin only)\nconst PLATFORM_MODELS = [\n    \"Partner\",\n    \"User\",\n    \"Tenant\",\n    \"Session\",\n    \"MagicLink\"\n];\nconst violations = [];\nconst MAX_VIOLATION_LOGS = 1000;\nfunction logViolation(violation) {\n    const log = {\n        ...violation,\n        timestamp: new Date()\n    };\n    violations.push(log);\n    if (violations.length > MAX_VIOLATION_LOGS) {\n        violations.shift();\n    }\n    console.error(\"[TENANT ISOLATION VIOLATION]\", JSON.stringify(log, null, 2));\n}\nfunction getViolationLogs() {\n    return [\n        ...violations\n    ];\n}\nfunction clearViolationLogs() {\n    violations.length = 0;\n}\n/**\n * Tenant Isolation Error\n */ class TenantIsolationError extends Error {\n    constructor(message, model, action, context){\n        super(message);\n        this.model = model;\n        this.action = action;\n        this.context = context;\n        this.name = \"TenantIsolationError\";\n    }\n}\n/**\n * Check if a model is tenant-scoped\n */ function isTenantScopedModel(model) {\n    return TENANT_SCOPED_MODELS.includes(model);\n}\n/**\n * Validate tenant context before executing a query\n * This should be called before any tenant-scoped database operation\n */ function validateTenantAccess(model, action, context, queryTenantId) {\n    // Skip validation for global models\n    if (!isTenantScopedModel(model)) {\n        return;\n    }\n    // Allow explicit bypass (for migrations, admin tools, etc.)\n    if (context?.bypassIsolation === true) {\n        if (!context.isSuperAdmin) {\n            const reason = \"Bypass isolation attempted without SUPER_ADMIN role\";\n            logViolation({\n                model,\n                action,\n                context,\n                query: {\n                    queryTenantId\n                },\n                reason\n            });\n            throw new TenantIsolationError(reason, model, action, context);\n        }\n        return;\n    }\n    // SUPER_ADMIN can access all data\n    if (context?.isSuperAdmin) {\n        return;\n    }\n    // No context = violation\n    if (!context) {\n        const reason = \"No tenant context provided for tenant-scoped query\";\n        logViolation({\n            model,\n            action,\n            context,\n            query: {\n                queryTenantId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n    // No tenantId in context = violation\n    if (!context.tenantId) {\n        const reason = \"No tenantId in context for tenant-scoped query\";\n        logViolation({\n            model,\n            action,\n            context,\n            query: {\n                queryTenantId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n    // If query specifies a tenantId, it must match context\n    if (queryTenantId && queryTenantId !== context.tenantId) {\n        const reason = `Cross-tenant access attempt: query tenantId (${queryTenantId}) != context tenantId (${context.tenantId})`;\n        logViolation({\n            model,\n            action,\n            context,\n            query: {\n                queryTenantId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n}\n/**\n * Create a tenant context from user session\n */ function createTenantContext(tenantId, userId, isSuperAdmin, bypassIsolation = false) {\n    return {\n        tenantId,\n        userId,\n        isSuperAdmin,\n        bypassIsolation\n    };\n}\n/**\n * Create a partner context from user session\n */ function createPartnerContext(partnerId, userId, isSuperAdmin, isPartnerOwner = false, isPartnerAdmin = false, bypassIsolation = false) {\n    return {\n        partnerId,\n        userId,\n        isSuperAdmin,\n        isPartnerOwner,\n        isPartnerAdmin,\n        bypassIsolation\n    };\n}\n/**\n * Ensure a WHERE clause includes the correct tenantId\n */ function withTenantFilter(where, tenantId) {\n    return {\n        ...where,\n        tenantId\n    };\n}\n/**\n * Ensure data being created includes the correct tenantId\n */ function withTenantData(data, tenantId) {\n    return {\n        ...data,\n        tenantId\n    };\n}\n/**\n * Check if a model is partner-scoped\n */ function isPartnerScopedModel(model) {\n    return PARTNER_SCOPED_MODELS.includes(model);\n}\n/**\n * Validate partner context before executing a query\n * This should be called before any partner-scoped database operation\n */ function validatePartnerAccess(model, action, context, queryPartnerId) {\n    // Skip validation for non-partner models\n    if (!isPartnerScopedModel(model)) {\n        return;\n    }\n    // Allow explicit bypass (for migrations, admin tools, etc.)\n    if (context?.bypassIsolation === true) {\n        if (!context.isSuperAdmin) {\n            const reason = \"Partner bypass isolation attempted without SUPER_ADMIN role\";\n            logViolation({\n                model,\n                action,\n                context: context,\n                query: {\n                    queryPartnerId\n                },\n                reason\n            });\n            throw new TenantIsolationError(reason, model, action, context);\n        }\n        return;\n    }\n    // SUPER_ADMIN can access all partner data\n    if (context?.isSuperAdmin) {\n        return;\n    }\n    // No context = violation\n    if (!context) {\n        const reason = \"No partner context provided for partner-scoped query\";\n        logViolation({\n            model,\n            action,\n            context: null,\n            query: {\n                queryPartnerId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, null);\n    }\n    // No partnerId in context = violation\n    if (!context.partnerId) {\n        const reason = \"No partnerId in context for partner-scoped query\";\n        logViolation({\n            model,\n            action,\n            context: context,\n            query: {\n                queryPartnerId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n    // If query specifies a partnerId, it must match context\n    if (queryPartnerId && queryPartnerId !== context.partnerId) {\n        const reason = `Cross-partner access attempt: query partnerId (${queryPartnerId}) != context partnerId (${context.partnerId})`;\n        logViolation({\n            model,\n            action,\n            context: context,\n            query: {\n                queryPartnerId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n}\n/**\n * Ensure a WHERE clause includes the correct partnerId\n */ function withPartnerFilter(where, partnerId) {\n    return {\n        ...where,\n        partnerId\n    };\n}\n/**\n * Ensure data being created includes the correct partnerId\n */ function withPartnerData(data, partnerId) {\n    return {\n        ...data,\n        partnerId\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UE4sU0FBaUI7SUFFakIsT0FBTztRQUNMLEdBQUdNLElBQUk7UUFDUE47SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Fhcy1jb3JlLy4vc3JjL2xpYi90ZW5hbnQtaXNvbGF0aW9uLnRzP2YyNTMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZW5hbnQgSXNvbGF0aW9uIEVuZm9yY2VtZW50XG4gKiBcbiAqIFRoaXMgbW9kdWxlIHByb3ZpZGVzIHN0cmljdCB0ZW5hbnQgZGF0YSBpc29sYXRpb24gYXQgdGhlIGRhdGFiYXNlIGxldmVsLlxuICogSW5zdGVhZCBvZiBQcmlzbWEgbWlkZGxld2FyZSAod2hpY2ggaGFzIGFzeW5jIGNvbnRleHQgaXNzdWVzKSwgdGhpcyB1c2VzXG4gKiBhcHBsaWNhdGlvbi1sZXZlbCB2YWxpZGF0aW9uIGJlZm9yZSBxdWVyaWVzIGFyZSBleGVjdXRlZC5cbiAqIFxuICogRmVhdHVyZXM6XG4gKiAtIFByZS1xdWVyeSB2YWxpZGF0aW9uIGZ1bmN0aW9uc1xuICogLSBTVVBFUl9BRE1JTiBieXBhc3Mgd2l0aCBleHBsaWNpdCBmbGFnXG4gKiAtIFZpb2xhdGlvbiBsb2dnaW5nIGFuZCBoYXJkIGZhaWx1cmVcbiAqIC0gU2FmZSBxdWVyeSBidWlsZGVycyB0aGF0IGVuZm9yY2UgdGVuYW50IHNjb3BpbmdcbiAqL1xuXG4vLyBNb2RlbHMgdGhhdCByZXF1aXJlIHRlbmFudCBpc29sYXRpb24gKHRlbmFudC1zY29wZWQpXG5leHBvcnQgY29uc3QgVEVOQU5UX1NDT1BFRF9NT0RFTFMgPSBbXG4gICdUZW5hbnRNZW1iZXJzaGlwJyxcbiAgJ1RlbmFudERvbWFpbicsIFxuICAnQXVkaXRMb2cnLFxuICAvLyBBZGQgZnV0dXJlIHRlbmFudC1zY29wZWQgbW9kZWxzIGhlcmVcbl0gYXMgY29uc3RcblxuLy8gTW9kZWxzIHRoYXQgcmVxdWlyZSBwYXJ0bmVyIGlzb2xhdGlvbiAocGFydG5lci1zY29wZWQpXG4vLyBUaGVzZSBhcmUgc2VwYXJhdGUgZnJvbSB0ZW5hbnQgaXNvbGF0aW9uIC0gcGFydG5lcnMgYXJlIHBsYXRmb3JtLWxldmVsXG5leHBvcnQgY29uc3QgUEFSVE5FUl9TQ09QRURfTU9ERUxTID0gW1xuICAnUGFydG5lclVzZXInLFxuICAnUGFydG5lckFncmVlbWVudCcsXG4gICdQYXJ0bmVyUmVmZXJyYWxDb2RlJyxcbiAgJ1BhcnRuZXJSZWZlcnJhbCcsXG4gICdQYXJ0bmVyRWFybmluZycsXG5dIGFzIGNvbnN0XG5cbi8vIFBsYXRmb3JtLWxldmVsIG1vZGVscyAobm8gaXNvbGF0aW9uLCBTdXBlciBBZG1pbiBvbmx5KVxuZXhwb3J0IGNvbnN0IFBMQVRGT1JNX01PREVMUyA9IFtcbiAgJ1BhcnRuZXInLFxuICAnVXNlcicsXG4gICdUZW5hbnQnLFxuICAnU2Vzc2lvbicsXG4gICdNYWdpY0xpbmsnLFxuXSBhcyBjb25zdFxuXG5leHBvcnQgdHlwZSBUZW5hbnRTY29wZWRNb2RlbCA9IHR5cGVvZiBURU5BTlRfU0NPUEVEX01PREVMU1tudW1iZXJdXG5leHBvcnQgdHlwZSBQYXJ0bmVyU2NvcGVkTW9kZWwgPSB0eXBlb2YgUEFSVE5FUl9TQ09QRURfTU9ERUxTW251bWJlcl1cbmV4cG9ydCB0eXBlIFBsYXRmb3JtTW9kZWwgPSB0eXBlb2YgUExBVEZPUk1fTU9ERUxTW251bWJlcl1cblxuZXhwb3J0IGludGVyZmFjZSBUZW5hbnRDb250ZXh0IHtcbiAgdGVuYW50SWQ6IHN0cmluZyB8IG51bGxcbiAgdXNlcklkOiBzdHJpbmcgfCBudWxsXG4gIGlzU3VwZXJBZG1pbjogYm9vbGVhblxuICBieXBhc3NJc29sYXRpb24/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFydG5lckNvbnRleHQge1xuICBwYXJ0bmVySWQ6IHN0cmluZyB8IG51bGxcbiAgdXNlcklkOiBzdHJpbmcgfCBudWxsXG4gIGlzU3VwZXJBZG1pbjogYm9vbGVhblxuICBpc1BhcnRuZXJPd25lcj86IGJvb2xlYW5cbiAgaXNQYXJ0bmVyQWRtaW4/OiBib29sZWFuXG4gIGJ5cGFzc0lzb2xhdGlvbj86IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBWaW9sYXRpb24gbG9nZ2VyXG4gKi9cbmludGVyZmFjZSBWaW9sYXRpb25Mb2cge1xuICB0aW1lc3RhbXA6IERhdGVcbiAgbW9kZWw6IHN0cmluZ1xuICBhY3Rpb246IHN0cmluZ1xuICBjb250ZXh0OiBUZW5hbnRDb250ZXh0IHwgbnVsbFxuICBxdWVyeTogYW55XG4gIHJlYXNvbjogc3RyaW5nXG59XG5cbmNvbnN0IHZpb2xhdGlvbnM6IFZpb2xhdGlvbkxvZ1tdID0gW11cbmNvbnN0IE1BWF9WSU9MQVRJT05fTE9HUyA9IDEwMDBcblxuZXhwb3J0IGZ1bmN0aW9uIGxvZ1Zpb2xhdGlvbih2aW9sYXRpb246IE9taXQ8VmlvbGF0aW9uTG9nLCAndGltZXN0YW1wJz4pOiB2b2lkIHtcbiAgY29uc3QgbG9nOiBWaW9sYXRpb25Mb2cgPSB7XG4gICAgLi4udmlvbGF0aW9uLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICB9XG4gIFxuICB2aW9sYXRpb25zLnB1c2gobG9nKVxuICBcbiAgaWYgKHZpb2xhdGlvbnMubGVuZ3RoID4gTUFYX1ZJT0xBVElPTl9MT0dTKSB7XG4gICAgdmlvbGF0aW9ucy5zaGlmdCgpXG4gIH1cbiAgXG4gIGNvbnNvbGUuZXJyb3IoJ1tURU5BTlQgSVNPTEFUSU9OIFZJT0xBVElPTl0nLCBKU09OLnN0cmluZ2lmeShsb2csIG51bGwsIDIpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmlvbGF0aW9uTG9ncygpOiBWaW9sYXRpb25Mb2dbXSB7XG4gIHJldHVybiBbLi4udmlvbGF0aW9uc11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyVmlvbGF0aW9uTG9ncygpOiB2b2lkIHtcbiAgdmlvbGF0aW9ucy5sZW5ndGggPSAwXG59XG5cbi8qKlxuICogVGVuYW50IElzb2xhdGlvbiBFcnJvclxuICovXG5leHBvcnQgY2xhc3MgVGVuYW50SXNvbGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBwdWJsaWMgbW9kZWw6IHN0cmluZyxcbiAgICBwdWJsaWMgYWN0aW9uOiBzdHJpbmcsXG4gICAgcHVibGljIGNvbnRleHQ6IFRlbmFudENvbnRleHQgfCBudWxsXG4gICkge1xuICAgIHN1cGVyKG1lc3NhZ2UpXG4gICAgdGhpcy5uYW1lID0gJ1RlbmFudElzb2xhdGlvbkVycm9yJ1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBtb2RlbCBpcyB0ZW5hbnQtc2NvcGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1RlbmFudFNjb3BlZE1vZGVsKG1vZGVsOiBzdHJpbmcpOiBtb2RlbCBpcyBUZW5hbnRTY29wZWRNb2RlbCB7XG4gIHJldHVybiBURU5BTlRfU0NPUEVEX01PREVMUy5pbmNsdWRlcyhtb2RlbCBhcyBhbnkpXG59XG5cbi8qKlxuICogVmFsaWRhdGUgdGVuYW50IGNvbnRleHQgYmVmb3JlIGV4ZWN1dGluZyBhIHF1ZXJ5XG4gKiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIGFueSB0ZW5hbnQtc2NvcGVkIGRhdGFiYXNlIG9wZXJhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVUZW5hbnRBY2Nlc3MoXG4gIG1vZGVsOiBzdHJpbmcsXG4gIGFjdGlvbjogc3RyaW5nLFxuICBjb250ZXh0OiBUZW5hbnRDb250ZXh0IHwgbnVsbCxcbiAgcXVlcnlUZW5hbnRJZD86IHN0cmluZyB8IG51bGxcbik6IHZvaWQge1xuICAvLyBTa2lwIHZhbGlkYXRpb24gZm9yIGdsb2JhbCBtb2RlbHNcbiAgaWYgKCFpc1RlbmFudFNjb3BlZE1vZGVsKG1vZGVsKSkge1xuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBBbGxvdyBleHBsaWNpdCBieXBhc3MgKGZvciBtaWdyYXRpb25zLCBhZG1pbiB0b29scywgZXRjLilcbiAgaWYgKGNvbnRleHQ/LmJ5cGFzc0lzb2xhdGlvbiA9PT0gdHJ1ZSkge1xuICAgIGlmICghY29udGV4dC5pc1N1cGVyQWRtaW4pIHtcbiAgICAgIGNvbnN0IHJlYXNvbiA9ICdCeXBhc3MgaXNvbGF0aW9uIGF0dGVtcHRlZCB3aXRob3V0IFNVUEVSX0FETUlOIHJvbGUnXG4gICAgICBsb2dWaW9sYXRpb24oeyBtb2RlbCwgYWN0aW9uLCBjb250ZXh0LCBxdWVyeTogeyBxdWVyeVRlbmFudElkIH0sIHJlYXNvbiB9KVxuICAgICAgdGhyb3cgbmV3IFRlbmFudElzb2xhdGlvbkVycm9yKHJlYXNvbiwgbW9kZWwsIGFjdGlvbiwgY29udGV4dClcbiAgICB9XG4gICAgcmV0dXJuXG4gIH1cbiAgXG4gIC8vIFNVUEVSX0FETUlOIGNhbiBhY2Nlc3MgYWxsIGRhdGFcbiAgaWYgKGNvbnRleHQ/LmlzU3VwZXJBZG1pbikge1xuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBObyBjb250ZXh0ID0gdmlvbGF0aW9uXG4gIGlmICghY29udGV4dCkge1xuICAgIGNvbnN0IHJlYXNvbiA9ICdObyB0ZW5hbnQgY29udGV4dCBwcm92aWRlZCBmb3IgdGVuYW50LXNjb3BlZCBxdWVyeSdcbiAgICBsb2dWaW9sYXRpb24oeyBtb2RlbCwgYWN0aW9uLCBjb250ZXh0LCBxdWVyeTogeyBxdWVyeVRlbmFudElkIH0sIHJlYXNvbiB9KVxuICAgIHRocm93IG5ldyBUZW5hbnRJc29sYXRpb25FcnJvcihyZWFzb24sIG1vZGVsLCBhY3Rpb24sIGNvbnRleHQpXG4gIH1cbiAgXG4gIC8vIE5vIHRlbmFudElkIGluIGNvbnRleHQgPSB2aW9sYXRpb25cbiAgaWYgKCFjb250ZXh0LnRlbmFudElkKSB7XG4gICAgY29uc3QgcmVhc29uID0gJ05vIHRlbmFudElkIGluIGNvbnRleHQgZm9yIHRlbmFudC1zY29wZWQgcXVlcnknXG4gICAgbG9nVmlvbGF0aW9uKHsgbW9kZWwsIGFjdGlvbiwgY29udGV4dCwgcXVlcnk6IHsgcXVlcnlUZW5hbnRJZCB9LCByZWFzb24gfSlcbiAgICB0aHJvdyBuZXcgVGVuYW50SXNvbGF0aW9uRXJyb3IocmVhc29uLCBtb2RlbCwgYWN0aW9uLCBjb250ZXh0KVxuICB9XG4gIFxuICAvLyBJZiBxdWVyeSBzcGVjaWZpZXMgYSB0ZW5hbnRJZCwgaXQgbXVzdCBtYXRjaCBjb250ZXh0XG4gIGlmIChxdWVyeVRlbmFudElkICYmIHF1ZXJ5VGVuYW50SWQgIT09IGNvbnRleHQudGVuYW50SWQpIHtcbiAgICBjb25zdCByZWFzb24gPSBgQ3Jvc3MtdGVuYW50IGFjY2VzcyBhdHRlbXB0OiBxdWVyeSB0ZW5hbnRJZCAoJHtxdWVyeVRlbmFudElkfSkgIT0gY29udGV4dCB0ZW5hbnRJZCAoJHtjb250ZXh0LnRlbmFudElkfSlgXG4gICAgbG9nVmlvbGF0aW9uKHsgbW9kZWwsIGFjdGlvbiwgY29udGV4dCwgcXVlcnk6IHsgcXVlcnlUZW5hbnRJZCB9LCByZWFzb24gfSlcbiAgICB0aHJvdyBuZXcgVGVuYW50SXNvbGF0aW9uRXJyb3IocmVhc29uLCBtb2RlbCwgYWN0aW9uLCBjb250ZXh0KVxuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgdGVuYW50IGNvbnRleHQgZnJvbSB1c2VyIHNlc3Npb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRlbmFudENvbnRleHQoXG4gIHRlbmFudElkOiBzdHJpbmcgfCBudWxsLFxuICB1c2VySWQ6IHN0cmluZyB8IG51bGwsXG4gIGlzU3VwZXJBZG1pbjogYm9vbGVhbixcbiAgYnlwYXNzSXNvbGF0aW9uOiBib29sZWFuID0gZmFsc2Vcbik6IFRlbmFudENvbnRleHQge1xuICByZXR1cm4ge1xuICAgIHRlbmFudElkLFxuICAgIHVzZXJJZCxcbiAgICBpc1N1cGVyQWRtaW4sXG4gICAgYnlwYXNzSXNvbGF0aW9uXG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBwYXJ0bmVyIGNvbnRleHQgZnJvbSB1c2VyIHNlc3Npb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVBhcnRuZXJDb250ZXh0KFxuICBwYXJ0bmVySWQ6IHN0cmluZyB8IG51bGwsXG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbCxcbiAgaXNTdXBlckFkbWluOiBib29sZWFuLFxuICBpc1BhcnRuZXJPd25lcjogYm9vbGVhbiA9IGZhbHNlLFxuICBpc1BhcnRuZXJBZG1pbjogYm9vbGVhbiA9IGZhbHNlLFxuICBieXBhc3NJc29sYXRpb246IGJvb2xlYW4gPSBmYWxzZVxuKTogUGFydG5lckNvbnRleHQge1xuICByZXR1cm4ge1xuICAgIHBhcnRuZXJJZCxcbiAgICB1c2VySWQsXG4gICAgaXNTdXBlckFkbWluLFxuICAgIGlzUGFydG5lck93bmVyLFxuICAgIGlzUGFydG5lckFkbWluLFxuICAgIGJ5cGFzc0lzb2xhdGlvblxuICB9XG59XG5cbi8qKlxuICogRW5zdXJlIGEgV0hFUkUgY2xhdXNlIGluY2x1ZGVzIHRoZSBjb3JyZWN0IHRlbmFudElkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoVGVuYW50RmlsdGVyPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+PihcbiAgd2hlcmU6IFQsXG4gIHRlbmFudElkOiBzdHJpbmdcbik6IFQgJiB7IHRlbmFudElkOiBzdHJpbmcgfSB7XG4gIHJldHVybiB7XG4gICAgLi4ud2hlcmUsXG4gICAgdGVuYW50SWRcbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBkYXRhIGJlaW5nIGNyZWF0ZWQgaW5jbHVkZXMgdGhlIGNvcnJlY3QgdGVuYW50SWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhUZW5hbnREYXRhPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+PihcbiAgZGF0YTogVCxcbiAgdGVuYW50SWQ6IHN0cmluZ1xuKTogVCAmIHsgdGVuYW50SWQ6IHN0cmluZyB9IHtcbiAgcmV0dXJuIHtcbiAgICAuLi5kYXRhLFxuICAgIHRlbmFudElkXG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIG1vZGVsIGlzIHBhcnRuZXItc2NvcGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BhcnRuZXJTY29wZWRNb2RlbChtb2RlbDogc3RyaW5nKTogbW9kZWwgaXMgUGFydG5lclNjb3BlZE1vZGVsIHtcbiAgcmV0dXJuIFBBUlRORVJfU0NPUEVEX01PREVMUy5pbmNsdWRlcyhtb2RlbCBhcyBhbnkpXG59XG5cbi8qKlxuICogVmFsaWRhdGUgcGFydG5lciBjb250ZXh0IGJlZm9yZSBleGVjdXRpbmcgYSBxdWVyeVxuICogVGhpcyBzaG91bGQgYmUgY2FsbGVkIGJlZm9yZSBhbnkgcGFydG5lci1zY29wZWQgZGF0YWJhc2Ugb3BlcmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVBhcnRuZXJBY2Nlc3MoXG4gIG1vZGVsOiBzdHJpbmcsXG4gIGFjdGlvbjogc3RyaW5nLFxuICBjb250ZXh0OiBQYXJ0bmVyQ29udGV4dCB8IG51bGwsXG4gIHF1ZXJ5UGFydG5lcklkPzogc3RyaW5nIHwgbnVsbFxuKTogdm9pZCB7XG4gIC8vIFNraXAgdmFsaWRhdGlvbiBmb3Igbm9uLXBhcnRuZXIgbW9kZWxzXG4gIGlmICghaXNQYXJ0bmVyU2NvcGVkTW9kZWwobW9kZWwpKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgXG4gIC8vIEFsbG93IGV4cGxpY2l0IGJ5cGFzcyAoZm9yIG1pZ3JhdGlvbnMsIGFkbWluIHRvb2xzLCBldGMuKVxuICBpZiAoY29udGV4dD8uYnlwYXNzSXNvbGF0aW9uID09PSB0cnVlKSB7XG4gICAgaWYgKCFjb250ZXh0LmlzU3VwZXJBZG1pbikge1xuICAgICAgY29uc3QgcmVhc29uID0gJ1BhcnRuZXIgYnlwYXNzIGlzb2xhdGlvbiBhdHRlbXB0ZWQgd2l0aG91dCBTVVBFUl9BRE1JTiByb2xlJ1xuICAgICAgbG9nVmlvbGF0aW9uKHsgbW9kZWwsIGFjdGlvbiwgY29udGV4dDogY29udGV4dCBhcyBhbnksIHF1ZXJ5OiB7IHF1ZXJ5UGFydG5lcklkIH0sIHJlYXNvbiB9KVxuICAgICAgdGhyb3cgbmV3IFRlbmFudElzb2xhdGlvbkVycm9yKHJlYXNvbiwgbW9kZWwsIGFjdGlvbiwgY29udGV4dCBhcyBhbnkpXG4gICAgfVxuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBTVVBFUl9BRE1JTiBjYW4gYWNjZXNzIGFsbCBwYXJ0bmVyIGRhdGFcbiAgaWYgKGNvbnRleHQ/LmlzU3VwZXJBZG1pbikge1xuICAgIHJldHVyblxuICB9XG4gIFxuICAvLyBObyBjb250ZXh0ID0gdmlvbGF0aW9uXG4gIGlmICghY29udGV4dCkge1xuICAgIGNvbnN0IHJlYXNvbiA9ICdObyBwYXJ0bmVyIGNvbnRleHQgcHJvdmlkZWQgZm9yIHBhcnRuZXItc2NvcGVkIHF1ZXJ5J1xuICAgIGxvZ1Zpb2xhdGlvbih7IG1vZGVsLCBhY3Rpb24sIGNvbnRleHQ6IG51bGwsIHF1ZXJ5OiB7IHF1ZXJ5UGFydG5lcklkIH0sIHJlYXNvbiB9KVxuICAgIHRocm93IG5ldyBUZW5hbnRJc29sYXRpb25FcnJvcihyZWFzb24sIG1vZGVsLCBhY3Rpb24sIG51bGwpXG4gIH1cbiAgXG4gIC8vIE5vIHBhcnRuZXJJZCBpbiBjb250ZXh0ID0gdmlvbGF0aW9uXG4gIGlmICghY29udGV4dC5wYXJ0bmVySWQpIHtcbiAgICBjb25zdCByZWFzb24gPSAnTm8gcGFydG5lcklkIGluIGNvbnRleHQgZm9yIHBhcnRuZXItc2NvcGVkIHF1ZXJ5J1xuICAgIGxvZ1Zpb2xhdGlvbih7IG1vZGVsLCBhY3Rpb24sIGNvbnRleHQ6IGNvbnRleHQgYXMgYW55LCBxdWVyeTogeyBxdWVyeVBhcnRuZXJJZCB9LCByZWFzb24gfSlcbiAgICB0aHJvdyBuZXcgVGVuYW50SXNvbGF0aW9uRXJyb3IocmVhc29uLCBtb2RlbCwgYWN0aW9uLCBjb250ZXh0IGFzIGFueSlcbiAgfVxuICBcbiAgLy8gSWYgcXVlcnkgc3BlY2lmaWVzIGEgcGFydG5lcklkLCBpdCBtdXN0IG1hdGNoIGNvbnRleHRcbiAgaWYgKHF1ZXJ5UGFydG5lcklkICYmIHF1ZXJ5UGFydG5lcklkICE9PSBjb250ZXh0LnBhcnRuZXJJZCkge1xuICAgIGNvbnN0IHJlYXNvbiA9IGBDcm9zcy1wYXJ0bmVyIGFjY2VzcyBhdHRlbXB0OiBxdWVyeSBwYXJ0bmVySWQgKCR7cXVlcnlQYXJ0bmVySWR9KSAhPSBjb250ZXh0IHBhcnRuZXJJZCAoJHtjb250ZXh0LnBhcnRuZXJJZH0pYFxuICAgIGxvZ1Zpb2xhdGlvbih7IG1vZGVsLCBhY3Rpb24sIGNvbnRleHQ6IGNvbnRleHQgYXMgYW55LCBxdWVyeTogeyBxdWVyeVBhcnRuZXJJZCB9LCByZWFzb24gfSlcbiAgICB0aHJvdyBuZXcgVGVuYW50SXNvbGF0aW9uRXJyb3IocmVhc29uLCBtb2RlbCwgYWN0aW9uLCBjb250ZXh0IGFzIGFueSlcbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBhIFdIRVJFIGNsYXVzZSBpbmNsdWRlcyB0aGUgY29ycmVjdCBwYXJ0bmVySWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhQYXJ0bmVyRmlsdGVyPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+PihcbiAgd2hlcmU6IFQsXG4gIHBhcnRuZXJJZDogc3RyaW5nXG4pOiBUICYgeyBwYXJ0bmVySWQ6IHN0cmluZyB9IHtcbiAgcmV0dXJuIHtcbiAgICAuLi53aGVyZSxcbiAgICBwYXJ0bmVySWRcbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBkYXRhIGJlaW5nIGNyZWF0ZWQgaW5jbHVkZXMgdGhlIGNvcnJlY3QgcGFydG5lcklkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoUGFydG5lckRhdGE8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICBkYXRhOiBULFxuICBwYXJ0bmVySWQ6IHN0cmluZ1xuKTogVCAmIHsgcGFydG5lcklkOiBzdHJpbmcgfSB7XG4gIHJldHVybiB7XG4gICAgLi4uZGF0YSxcbiAgICBwYXJ0bmVySWRcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlRFTkFOVF9TQ09QRURfTU9ERUxTIiwiUEFSVE5FUl9TQ09QRURfTU9ERUxTIiwiUExBVEZPUk1fTU9ERUxTIiwidmlvbGF0aW9ucyIsIk1BWF9WSU9MQVRJT05fTE9HUyIsImxvZ1Zpb2xhdGlvbiIsInZpb2xhdGlvbiIsImxvZyIsInRpbWVzdGFtcCIsIkRhdGUiLCJwdXNoIiwibGVuZ3RoIiwic2hpZnQiLCJjb25zb2xlIiwiZXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0VmlvbGF0aW9uTG9ncyIsImNsZWFyVmlvbGF0aW9uTG9ncyIsIlRlbmFudElzb2xhdGlvbkVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJtb2RlbCIsImFjdGlvbiIsImNvbnRleHQiLCJuYW1lIiwiaXNUZW5hbnRTY29wZWRNb2RlbCIsImluY2x1ZGVzIiwidmFsaWRhdGVUZW5hbnRBY2Nlc3MiLCJxdWVyeVRlbmFudElkIiwiYnlwYXNzSXNvbGF0aW9uIiwiaXNTdXBlckFkbWluIiwicmVhc29uIiwicXVlcnkiLCJ0ZW5hbnRJZCIsImNyZWF0ZVRlbmFudENvbnRleHQiLCJ1c2VySWQiLCJjcmVhdGVQYXJ0bmVyQ29udGV4dCIsInBhcnRuZXJJZCIsImlzUGFydG5lck93bmVyIiwiaXNQYXJ0bmVyQWRtaW4iLCJ3aXRoVGVuYW50RmlsdGVyIiwid2hlcmUiLCJ3aXRoVGVuYW50RGF0YSIsImRhdGEiLCJpc1BhcnRuZXJTY29wZWRNb2RlbCIsInZhbGlkYXRlUGFydG5lckFjY2VzcyIsInF1ZXJ5UGFydG5lcklkIiwid2l0aFBhcnRuZXJGaWx0ZXIiLCJ3aXRoUGFydG5lckRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/tenant-isolation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmvm%2Fevents%2Froute&page=%2Fapi%2Fmvm%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmvm%2Fevents%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();