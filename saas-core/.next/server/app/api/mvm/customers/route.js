"use strict";(()=>{var e={};e.id=5411,e.ids=[5411],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},49123:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>N,patchFetch:()=>v,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>d});var t={};s.r(t),s.d(t,{GET:()=>c,POST:()=>m});var o=s(49303),a=s(88716),n=s(60670),u=s(87070),i=s(90662);async function c(e){try{let{searchParams:r}=new URL(e.url),s=r.get("tenantId"),t=r.get("customerId"),o=r.get("vendorId");if(!s)return u.NextResponse.json({success:!1,error:"tenantId is required"},{status:400});if(!t)return u.NextResponse.json({success:!1,error:"customerId is required"},{status:400});let a=await i.KB.getCustomer(s,t);if(!a)return u.NextResponse.json({success:!1,error:"Customer not found"},{status:404});return u.NextResponse.json({success:!0,customer:{id:a.id,firstName:a.firstName,lastName:a.lastName,fullName:a.fullName,email:a.email,phone:a.phone},source:"CORE",accessedBy:o?`vendor:${o}`:"tenant"})}catch(e){return console.error("[MVM] Error fetching customer:",e),u.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}async function m(e){try{let{tenantId:r,customerIds:s,vendorId:t}=await e.json();if(!r)return u.NextResponse.json({success:!1,error:"tenantId is required"},{status:400});if(!s||!Array.isArray(s))return u.NextResponse.json({success:!1,error:"customerIds array is required"},{status:400});let o=(await Promise.all(s.map(e=>i.KB.getCustomer(r,e)))).filter(Boolean).map(e=>({id:e.id,firstName:e.firstName,lastName:e.lastName,fullName:e.fullName,email:e.email,phone:e.phone}));return u.NextResponse.json({success:!0,customers:o,count:o.length,source:"CORE",accessedBy:t?`vendor:${t}`:"tenant"})}catch(e){return console.error("[MVM] Error batch fetching customers:",e),u.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/mvm/customers/route",pathname:"/api/mvm/customers",filename:"route",bundlePath:"app/api/mvm/customers/route"},resolvedPagePath:"/app/saas-core/src/app/api/mvm/customers/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:f}=p,N="/api/mvm/customers/route";function v(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:d})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[9380,5972,662],()=>s(49123));module.exports=t})();