"use strict";(()=>{var e={};e.id=3526,e.ids=[3526],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},38460:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>I,patchFetch:()=>S,requestAsyncStorage:()=>E,routeModule:()=>p,serverHooks:()=>R,staticGenerationAsyncStorage:()=>l});var t={};s.r(t),s.d(t,{DELETE:()=>i,GET:()=>d,PUT:()=>u});var n=s(49303),o=s(88716),a=s(60670),c=s(87070);async function d(e,r){try{let{orderId:e}=await r.params;if(!e)return c.NextResponse.json({success:!1,error:"orderId is required"},{status:400});return c.NextResponse.json({success:!1,error:`Order ${e} not found`},{status:404})}catch(e){return console.error("[SVM] Error fetching order:",e),c.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}async function u(e,r){try{let{orderId:s}=await r.params,{tenantId:t,action:n}=await e.json();if(!s||!t||!n)return c.NextResponse.json({success:!1,error:"orderId, tenantId, and action are required"},{status:400});let o=["PLACE","MARK_PAID","START_PROCESSING","MARK_SHIPPED","MARK_DELIVERED","MARK_FULFILLED","REQUEST_REFUND","MARK_REFUNDED"];if(!o.includes(n))return c.NextResponse.json({success:!1,error:`Unknown action: ${n}`,validActions:o},{status:400});return c.NextResponse.json({success:!0,message:`Order ${s} updated with action: ${n}`,order:{id:s,status:{PLACE:"PLACED",MARK_PAID:"PAID",START_PROCESSING:"PROCESSING",MARK_SHIPPED:"SHIPPED",MARK_DELIVERED:"DELIVERED",MARK_FULFILLED:"FULFILLED",MARK_REFUNDED:"REFUNDED"}[n]||"UNKNOWN",updatedAt:new Date().toISOString()}})}catch(e){return console.error("[SVM] Error updating order:",e),c.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Internal server error"},{status:500})}}async function i(e,r){try{let{orderId:s}=await r.params,{searchParams:t}=new URL(e.url),n=t.get("tenantId"),o=t.get("reason"),a=t.get("cancelledBy"),d=t.get("cancelledByUserId");if(!n)try{let r=await e.json();n=r.tenantId,o=r.reason,a=r.cancelledBy,d=r.cancelledByUserId}catch{}if(!s||!n||!o||!a)return c.NextResponse.json({success:!1,error:"orderId, tenantId, reason, and cancelledBy are required"},{status:400});if(!["CUSTOMER","MERCHANT","SYSTEM"].includes(a))return c.NextResponse.json({success:!1,error:"cancelledBy must be CUSTOMER, MERCHANT, or SYSTEM"},{status:400});return c.NextResponse.json({success:!0,message:`Order ${s} cancelled`,order:{id:s,status:"CANCELLED",updatedAt:new Date().toISOString()},cancellation:{reason:o,cancelledBy:a,cancelledByUserId:d,cancelledAt:new Date().toISOString()}})}catch(e){return console.error("[SVM] Error cancelling order:",e),c.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Internal server error"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/svm/orders/[orderId]/route",pathname:"/api/svm/orders/[orderId]",filename:"route",bundlePath:"app/api/svm/orders/[orderId]/route"},resolvedPagePath:"/app/saas-core/src/app/api/svm/orders/[orderId]/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:E,staticGenerationAsyncStorage:l,serverHooks:R}=p,I="/api/svm/orders/[orderId]/route";function S(){return(0,a.patchFetch)({serverHooks:R,staticGenerationAsyncStorage:l})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[9380,5972],()=>s(38460));module.exports=t})();