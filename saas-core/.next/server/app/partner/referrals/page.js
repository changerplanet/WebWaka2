(()=>{var e={};e.id=7137,e.ids=[7137],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},93897:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d}),s(8330),s(50731),s(35866);var a=s(23191),r=s(88716),l=s(37922),n=s.n(l),i=s(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let d=["",{children:["partner",{children:["referrals",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8330)),"/app/saas-core/src/app/partner/referrals/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,50731)),"/app/saas-core/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/app/saas-core/src/app/partner/referrals/page.tsx"],x="/partner/referrals/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/partner/referrals/page",pathname:"/partner/referrals",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},71145:(e,t,s)=>{Promise.resolve().then(s.bind(s,86636))},62881:(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var a=s(17577);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:l="",children:n,iconNode:o,...x},h)=>(0,a.createElement)("svg",{ref:h,...d,width:t,height:t,stroke:e,strokeWidth:r?24*Number(s)/Number(t):s,className:i("lucide",l),...!n&&!c(x)&&{"aria-hidden":"true"},...x},[...o.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(n)?n:[n]])),x=(e,t)=>{let s=(0,a.forwardRef)(({className:s,...l},c)=>(0,a.createElement)(o,{ref:c,iconNode:t,className:i(`lucide-${r(n(e))}`,`lucide-${e}`,s),...l}));return s.displayName=n(e),s}},66697:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},59734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])},26754:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},11890:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},39183:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},41291:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},30361:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},48998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},22465:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("hand-coins",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]])},77506:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},71810:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},50949:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},24061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},16671:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},35047:(e,t,s)=>{"use strict";var a=s(77389);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},86636:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Z});var a=s(10326),r=s(17577),l=s(35047),n=s(30361),i=s(41291),c=s(62881);let d=(0,c.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var o=s(48998),x=s(22465),h=s(26754),m=s(24061),p=s(16671),u=s(66697),f=s(71810),b=s(39183);let g=(0,c.Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),j=(0,c.Z)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var y=s(77506),N=s(50949),v=s(59734),k=s(11890);function w(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),[s,c]=(0,r.useState)(null),[w,Z]=(0,r.useState)(null),[S,A]=(0,r.useState)([]),[M,P]=(0,r.useState)(0),[E,C]=(0,r.useState)(!0),[D,_]=(0,r.useState)(null),[I,R]=(0,r.useState)(t.get("status")||""),[q,T]=(0,r.useState)(t.get("sort")||"referredAt"),[V,L]=(0,r.useState)("desc"),[z,U]=(0,r.useState)(0);async function G(){await fetch("/api/auth/logout",{method:"POST"}),e.push("/login")}let H=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(e),O=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),$=e=>{switch(e.toUpperCase()){case"ACTIVE":return a.jsx(n.Z,{className:"w-4 h-4 text-emerald-400"});case"PENDING":case"PENDING_ACTIVATION":return a.jsx(i.Z,{className:"w-4 h-4 text-amber-400"});case"SUSPENDED":return a.jsx(d,{className:"w-4 h-4 text-red-400"});default:return a.jsx(o.Z,{className:"w-4 h-4 text-slate-400"})}},F=e=>{switch(e.toUpperCase()){case"ACTIVE":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";case"PENDING":case"PENDING_ACTIVATION":return"bg-amber-500/20 text-amber-400 border-amber-500/30";case"SUSPENDED":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-slate-500/20 text-slate-400 border-slate-500/30"}},W=Math.ceil(M/20);return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-900 text-white",children:[(0,a.jsxs)("aside",{className:"fixed left-0 top-0 h-full w-64 bg-slate-800 border-r border-slate-700 z-40",children:[a.jsx("div",{className:"p-6 border-b border-slate-700",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:a.jsx(x.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"font-bold",children:"Partner Portal"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Referrals"})]})]})}),a.jsx("nav",{className:"p-4",children:a.jsx("ul",{className:"space-y-2",children:[{icon:h.Z,label:"Dashboard",href:"/partner"},{icon:m.Z,label:"Referrals",href:"/partner/referrals",active:!0},{icon:p.Z,label:"Earnings",href:"/partner/earnings"},{icon:u.Z,label:"Audit Log",href:"/partner/audit"}].map((e,t)=>a.jsx("li",{children:(0,a.jsxs)("a",{href:e.href,className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition ${e.active?"bg-indigo-600/20 text-indigo-400":"text-slate-400 hover:bg-slate-700/50 hover:text-white"}`,children:[a.jsx(e.icon,{className:"w-5 h-5"}),e.label]})},t))})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-700",children:(0,a.jsxs)("button",{onClick:G,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-700/50 hover:text-white transition",children:[a.jsx(f.Z,{className:"w-5 h-5"}),"Sign Out"]})})]}),(0,a.jsxs)("main",{className:"ml-64 p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400 text-sm mb-2",children:[a.jsx("a",{href:"/partner",className:"hover:text-white transition",children:"Dashboard"}),a.jsx(b.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"text-white",children:"Referrals"})]}),a.jsx("h1",{className:"text-3xl font-bold",children:"Referrals"}),a.jsx("p",{className:"text-slate-400 mt-1",children:"View and track all your referred tenants"})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-2xl font-bold",children:M}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Total Referrals"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(g,{className:"w-4 h-4 text-slate-500"}),(0,a.jsxs)("select",{value:I,onChange:e=>{R(e.target.value),U(0)},className:"px-4 py-2 bg-slate-800 border border-slate-700 rounded-xl text-white focus:ring-2 focus:ring-indigo-500 outline-none",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"ACTIVE",children:"Active"}),a.jsx("option",{value:"PENDING_ACTIVATION",children:"Pending"}),a.jsx("option",{value:"SUSPENDED",children:"Suspended"}),a.jsx("option",{value:"DEACTIVATED",children:"Churned"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(j,{className:"w-4 h-4 text-slate-500"}),(0,a.jsxs)("select",{value:q,onChange:e=>T(e.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-700 rounded-xl text-white focus:ring-2 focus:ring-indigo-500 outline-none",children:[a.jsx("option",{value:"referredAt",children:"Date Referred"}),a.jsx("option",{value:"revenue",children:"Revenue"})]}),a.jsx("button",{onClick:()=>L("asc"===V?"desc":"asc"),className:"px-3 py-2 bg-slate-800 border border-slate-700 rounded-xl hover:bg-slate-700 transition",children:"asc"===V?"↑":"↓"})]})]}),E?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(y.Z,{className:"w-8 h-8 animate-spin text-indigo-500"})}):D?(0,a.jsxs)("div",{className:"text-center py-20 text-red-400",children:[a.jsx(N.Z,{className:"w-12 h-12 mx-auto mb-4"}),a.jsx("p",{children:D})]}):0===S.length?(0,a.jsxs)("div",{className:"text-center py-20 bg-slate-800/50 rounded-2xl border border-slate-700 border-dashed",children:[a.jsx(v.Z,{className:"w-16 h-16 mx-auto text-slate-600 mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No referrals found"}),a.jsx("p",{className:"text-slate-400",children:I?"Try adjusting your filters":"Start referring tenants to see them here"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"bg-slate-800 rounded-2xl border border-slate-700 overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-slate-700",children:[a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-400",children:"Tenant"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-400",children:"Status"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-400",children:"Referred"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-400",children:"Attribution"}),a.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-slate-400",children:"Revenue"})]})}),a.jsx("tbody",{children:S.map(e=>(0,a.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[a.jsx("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-500/20 text-indigo-400 flex items-center justify-center font-bold",children:e.tenantName.charAt(0)}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:e.tenantName}),a.jsx("p",{className:"text-sm text-slate-500",children:e.tenantSlug})]})]})}),a.jsx("td",{className:"px-6 py-4",children:(0,a.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium border ${F(e.tenantStatus)}`,children:[$(e.tenantStatus),e.tenantStatus.replace("_"," ")]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[a.jsx("p",{className:"text-sm",children:O(e.referredAt)}),a.jsx("p",{className:"text-xs text-slate-500",children:e.attributionMethod.replace("_"," ")})]}),a.jsx("td",{className:"px-6 py-4",children:e.isLifetime?a.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-500/20 text-purple-400",children:"Lifetime"}):e.attributionExpiresAt?(0,a.jsxs)("span",{className:"text-xs text-slate-400",children:["Expires ",O(e.attributionExpiresAt)]}):a.jsx("span",{className:"text-xs text-slate-500",children:"-"})}),(0,a.jsxs)("td",{className:"px-6 py-4 text-right",children:[a.jsx("p",{className:"font-semibold text-emerald-400",children:H(e.totalRevenue)}),e.lastPaymentDate&&(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Last: ",O(e.lastPaymentDate)]})]})]},e.referralId))})]})}),W>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-400",children:["Showing ",z+1," to ",Math.min(z+20,M)," of ",M," referrals"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>U(Math.max(0,z-20)),disabled:0===z,className:"p-2 bg-slate-800 border border-slate-700 rounded-lg hover:bg-slate-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(k.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("span",{className:"px-4 py-2 text-sm",children:["Page ",Math.floor(z/20)+1," of ",W]}),a.jsx("button",{onClick:()=>U(z+20),disabled:z+20>=M,className:"p-2 bg-slate-800 border border-slate-700 rounded-lg hover:bg-slate-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(b.Z,{className:"w-5 h-5"})})]})]})]})]})]})}function Z(){return a.jsx(r.Suspense,{fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:a.jsx(y.Z,{className:"w-10 h-10 animate-spin text-indigo-500"})}),children:a.jsx(w,{})})}},8330:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/app/saas-core/src/app/partner/referrals/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9380,4641,1152],()=>s(93897));module.exports=a})();