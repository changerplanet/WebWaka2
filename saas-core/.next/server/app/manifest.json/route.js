"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/manifest.json/route";
exports.ids = ["app/manifest.json/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fmanifest.json%2Froute&page=%2Fmanifest.json%2Froute&appPaths=&pagePath=private-next-app-dir%2Fmanifest.json%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fmanifest.json%2Froute&page=%2Fmanifest.json%2Froute&appPaths=&pagePath=private-next-app-dir%2Fmanifest.json%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_saas_core_src_app_manifest_json_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/manifest.json/route.ts */ \"(rsc)/./src/app/manifest.json/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/manifest.json/route\",\n        pathname: \"/manifest.json\",\n        filename: \"route\",\n        bundlePath: \"app/manifest.json/route\"\n    },\n    resolvedPagePath: \"/app/saas-core/src/app/manifest.json/route.ts\",\n    nextConfigOutput,\n    userland: _app_saas_core_src_app_manifest_json_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/manifest.json/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZtYW5pZmVzdC5qc29uJTJGcm91dGUmcGFnZT0lMkZtYW5pZmVzdC5qc29uJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGbWFuaWZlc3QuanNvbiUyRnJvdXRlLnRzJmFwcERpcj0lMkZhcHAlMkZzYWFzLWNvcmUlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmFwcCUyRnNhYXMtY29yZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDSDtBQUMxRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2VtYXJrZXR3YWthLz9iZmUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9hcHAvc2Fhcy1jb3JlL3NyYy9hcHAvbWFuaWZlc3QuanNvbi9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9tYW5pZmVzdC5qc29uL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9tYW5pZmVzdC5qc29uXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL21hbmlmZXN0Lmpzb24vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvYXBwL3NhYXMtY29yZS9zcmMvYXBwL21hbmlmZXN0Lmpzb24vcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvbWFuaWZlc3QuanNvbi9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fmanifest.json%2Froute&page=%2Fmanifest.json%2Froute&appPaths=&pagePath=private-next-app-dir%2Fmanifest.json%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/manifest.json/route.ts":
/*!****************************************!*\
  !*** ./src/app/manifest.json/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_tenant_resolver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/tenant-resolver */ \"(rsc)/./src/lib/tenant-resolver.ts\");\n\n\n/**\n * Dynamic PWA Manifest per Tenant\n * \n * Resolution order:\n * 1. ?tenant= query param\n * 2. Host-based resolution (subdomain/custom domain)\n * 3. Fallback to default branding\n * \n * Caching Strategy:\n * - Cache-Control: private (per-user, per-tenant)\n * - ETag based on tenant ID + updatedAt for invalidation\n * - Vary: Host header for CDN awareness\n */ async function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const tenantSlug = searchParams.get(\"tenant\");\n        const host = request.headers.get(\"host\") || \"\";\n        // Default branding\n        let branding = {\n            id: \"default\",\n            name: \"eMarketWaka\",\n            slug: \"default\",\n            appName: \"eMarketWaka\",\n            shortName: \"eMarketWaka\",\n            description: \"eMarketWaka Commerce Platform\",\n            primaryColor: \"#6366f1\",\n            secondaryColor: \"#8b5cf6\",\n            backgroundColor: \"#ffffff\",\n            logoUrl: null,\n            faviconUrl: null,\n            updatedAt: new Date().toISOString()\n        };\n        // Try to resolve tenant\n        let context = null;\n        if (tenantSlug) {\n            context = await (0,_lib_tenant_resolver__WEBPACK_IMPORTED_MODULE_1__.resolveTenantFromQuery)(tenantSlug);\n        } else if (host) {\n            context = await (0,_lib_tenant_resolver__WEBPACK_IMPORTED_MODULE_1__.resolveTenantFromHost)(host);\n        }\n        if (context) {\n            const tenant = context.tenant;\n            branding = {\n                id: tenant.id,\n                name: tenant.name,\n                slug: tenant.slug,\n                appName: tenant.appName,\n                shortName: tenant.appName.substring(0, 12),\n                description: `${tenant.appName} - Powered by eMarketWaka`,\n                primaryColor: tenant.primaryColor,\n                secondaryColor: tenant.secondaryColor,\n                backgroundColor: \"#ffffff\",\n                logoUrl: tenant.logoUrl,\n                faviconUrl: tenant.faviconUrl,\n                updatedAt: tenant.updatedAt.toISOString()\n            };\n        }\n        // Generate manifest\n        const manifest = {\n            name: branding.appName,\n            short_name: branding.shortName,\n            description: branding.description,\n            start_url: `/?tenant=${branding.slug}`,\n            scope: \"/\",\n            display: \"standalone\",\n            orientation: \"portrait-primary\",\n            background_color: branding.backgroundColor,\n            theme_color: branding.primaryColor,\n            // Icons - use tenant favicon or defaults\n            icons: [\n                {\n                    src: branding.faviconUrl || `/api/icons/icon-72?tenant=${branding.slug}`,\n                    sizes: \"72x72\",\n                    type: \"image/png\",\n                    purpose: \"any\"\n                },\n                {\n                    src: branding.faviconUrl || `/api/icons/icon-96?tenant=${branding.slug}`,\n                    sizes: \"96x96\",\n                    type: \"image/png\",\n                    purpose: \"any\"\n                },\n                {\n                    src: branding.faviconUrl || `/api/icons/icon-128?tenant=${branding.slug}`,\n                    sizes: \"128x128\",\n                    type: \"image/png\",\n                    purpose: \"any\"\n                },\n                {\n                    src: branding.faviconUrl || `/api/icons/icon-144?tenant=${branding.slug}`,\n                    sizes: \"144x144\",\n                    type: \"image/png\",\n                    purpose: \"any\"\n                },\n                {\n                    src: branding.faviconUrl || `/api/icons/icon-152?tenant=${branding.slug}`,\n                    sizes: \"152x152\",\n                    type: \"image/png\",\n                    purpose: \"any\"\n                },\n                {\n                    src: branding.faviconUrl || `/api/icons/icon-192?tenant=${branding.slug}`,\n                    sizes: \"192x192\",\n                    type: \"image/png\",\n                    purpose: \"any maskable\"\n                },\n                {\n                    src: branding.faviconUrl || `/api/icons/icon-384?tenant=${branding.slug}`,\n                    sizes: \"384x384\",\n                    type: \"image/png\",\n                    purpose: \"any\"\n                },\n                {\n                    src: branding.faviconUrl || `/api/icons/icon-512?tenant=${branding.slug}`,\n                    sizes: \"512x512\",\n                    type: \"image/png\",\n                    purpose: \"any maskable\"\n                }\n            ],\n            // Categories for app stores\n            categories: [\n                \"business\",\n                \"productivity\"\n            ],\n            // Shortcuts for quick actions\n            shortcuts: [\n                {\n                    name: \"Dashboard\",\n                    short_name: \"Dashboard\",\n                    url: `/dashboard?tenant=${branding.slug}`,\n                    icons: [\n                        {\n                            src: `/api/icons/icon-96?tenant=${branding.slug}`,\n                            sizes: \"96x96\"\n                        }\n                    ]\n                }\n            ],\n            // Screenshots (optional, for app store listings)\n            screenshots: [],\n            // Related applications (optional)\n            related_applications: [],\n            prefer_related_applications: false,\n            // Custom extension for tenant identification\n            // This helps Service Worker know which tenant's cache to use\n            _tenant: {\n                id: branding.id,\n                slug: branding.slug,\n                primaryColor: branding.primaryColor,\n                secondaryColor: branding.secondaryColor\n            }\n        };\n        // Generate ETag for cache invalidation\n        const etag = `\"${branding.id}-${new Date(branding.updatedAt).getTime()}\"`;\n        // Check If-None-Match header for 304 response\n        const ifNoneMatch = request.headers.get(\"if-none-match\");\n        if (ifNoneMatch === etag) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n                status: 304\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(manifest, {\n            headers: {\n                \"Content-Type\": \"application/manifest+json\",\n                // Cache privately per user/tenant, revalidate after 1 hour\n                \"Cache-Control\": \"private, max-age=3600, must-revalidate\",\n                \"ETag\": etag,\n                // Vary by Host for CDN to cache differently per domain\n                \"Vary\": \"Host\",\n                // CORS for cross-origin manifest requests\n                \"Access-Control-Allow-Origin\": \"*\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Failed to generate manifest:\", error);\n        // Return minimal valid manifest on error\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            name: \"eMarketWaka\",\n            short_name: \"eMarketWaka\",\n            start_url: \"/\",\n            display: \"standalone\",\n            theme_color: \"#6366f1\",\n            background_color: \"#ffffff\",\n            icons: []\n        }, {\n            status: 200,\n            headers: {\n                \"Content-Type\": \"application/manifest+json\",\n                \"Cache-Control\": \"no-cache\"\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVk7Z0JBQ25DQyxnQkFBZ0JSLFNBQVNRLGNBQWM7WUFDekM7UUFDRjtRQUVBLHVDQUF1QztRQUN2QyxNQUFNNkIsT0FBTyxDQUFDLENBQUMsRUFBRXJDLFNBQVNDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSVksS0FBS2IsU0FBU1ksU0FBUyxFQUFFMEIsT0FBTyxHQUFHLENBQUMsQ0FBQztRQUV6RSw4Q0FBOEM7UUFDOUMsTUFBTUMsY0FBYy9DLFFBQVFPLE9BQU8sQ0FBQ0YsR0FBRyxDQUFDO1FBQ3hDLElBQUkwQyxnQkFBZ0JGLE1BQU07WUFDeEIsT0FBTyxJQUFJakQscURBQVlBLENBQUMsTUFBTTtnQkFBRW9ELFFBQVE7WUFBSTtRQUM5QztRQUVBLE9BQU9wRCxxREFBWUEsQ0FBQ3FELElBQUksQ0FBQ3ZCLFVBQVU7WUFDakNuQixTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIsMkRBQTJEO2dCQUMzRCxpQkFBaUI7Z0JBQ2pCLFFBQVFzQztnQkFDUix1REFBdUQ7Z0JBQ3ZELFFBQVE7Z0JBQ1IsMENBQTBDO2dCQUMxQywrQkFBK0I7WUFDakM7UUFDRjtJQUNGLEVBQUUsT0FBT0ssT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsZ0NBQWdDQTtRQUU5Qyx5Q0FBeUM7UUFDekMsT0FBT3RELHFEQUFZQSxDQUFDcUQsSUFBSSxDQUFDO1lBQ3ZCdkMsTUFBTTtZQUNOaUIsWUFBWTtZQUNaQyxXQUFXO1lBQ1hFLFNBQVM7WUFDVEcsYUFBYTtZQUNiRCxrQkFBa0I7WUFDbEJFLE9BQU8sRUFBRTtRQUNYLEdBQUc7WUFDRGMsUUFBUTtZQUNSekMsU0FBUztnQkFDUCxnQkFBZ0I7Z0JBQ2hCLGlCQUFpQjtZQUNuQjtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2VtYXJrZXR3YWthLy4vc3JjL2FwcC9tYW5pZmVzdC5qc29uL3JvdXRlLnRzP2JhMTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgcmVzb2x2ZVRlbmFudEZyb21RdWVyeSwgcmVzb2x2ZVRlbmFudEZyb21Ib3N0LCBUZW5hbnRDb250ZXh0IH0gZnJvbSAnQC9saWIvdGVuYW50LXJlc29sdmVyJ1xuXG4vKipcbiAqIER5bmFtaWMgUFdBIE1hbmlmZXN0IHBlciBUZW5hbnRcbiAqIFxuICogUmVzb2x1dGlvbiBvcmRlcjpcbiAqIDEuID90ZW5hbnQ9IHF1ZXJ5IHBhcmFtXG4gKiAyLiBIb3N0LWJhc2VkIHJlc29sdXRpb24gKHN1YmRvbWFpbi9jdXN0b20gZG9tYWluKVxuICogMy4gRmFsbGJhY2sgdG8gZGVmYXVsdCBicmFuZGluZ1xuICogXG4gKiBDYWNoaW5nIFN0cmF0ZWd5OlxuICogLSBDYWNoZS1Db250cm9sOiBwcml2YXRlIChwZXItdXNlciwgcGVyLXRlbmFudClcbiAqIC0gRVRhZyBiYXNlZCBvbiB0ZW5hbnQgSUQgKyB1cGRhdGVkQXQgZm9yIGludmFsaWRhdGlvblxuICogLSBWYXJ5OiBIb3N0IGhlYWRlciBmb3IgQ0ROIGF3YXJlbmVzc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXG4gICAgY29uc3QgdGVuYW50U2x1ZyA9IHNlYXJjaFBhcmFtcy5nZXQoJ3RlbmFudCcpXG4gICAgY29uc3QgaG9zdCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2hvc3QnKSB8fCAnJ1xuICAgIFxuICAgIC8vIERlZmF1bHQgYnJhbmRpbmdcbiAgICBsZXQgYnJhbmRpbmcgPSB7XG4gICAgICBpZDogJ2RlZmF1bHQnLFxuICAgICAgbmFtZTogJ2VNYXJrZXRXYWthJyxcbiAgICAgIHNsdWc6ICdkZWZhdWx0JyxcbiAgICAgIGFwcE5hbWU6ICdlTWFya2V0V2FrYScsXG4gICAgICBzaG9ydE5hbWU6ICdlTWFya2V0V2FrYScsXG4gICAgICBkZXNjcmlwdGlvbjogJ2VNYXJrZXRXYWthIENvbW1lcmNlIFBsYXRmb3JtJyxcbiAgICAgIHByaW1hcnlDb2xvcjogJyM2MzY2ZjEnLFxuICAgICAgc2Vjb25kYXJ5Q29sb3I6ICcjOGI1Y2Y2JyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnLFxuICAgICAgbG9nb1VybDogbnVsbCBhcyBzdHJpbmcgfCBudWxsLFxuICAgICAgZmF2aWNvblVybDogbnVsbCBhcyBzdHJpbmcgfCBudWxsLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9XG4gICAgXG4gICAgLy8gVHJ5IHRvIHJlc29sdmUgdGVuYW50XG4gICAgbGV0IGNvbnRleHQ6IFRlbmFudENvbnRleHQgfCBudWxsID0gbnVsbFxuICAgIGlmICh0ZW5hbnRTbHVnKSB7XG4gICAgICBjb250ZXh0ID0gYXdhaXQgcmVzb2x2ZVRlbmFudEZyb21RdWVyeSh0ZW5hbnRTbHVnKVxuICAgIH0gZWxzZSBpZiAoaG9zdCkge1xuICAgICAgY29udGV4dCA9IGF3YWl0IHJlc29sdmVUZW5hbnRGcm9tSG9zdChob3N0KVxuICAgIH1cbiAgICBcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgY29uc3QgdGVuYW50ID0gY29udGV4dC50ZW5hbnRcbiAgICAgIGJyYW5kaW5nID0ge1xuICAgICAgICBpZDogdGVuYW50LmlkLFxuICAgICAgICBuYW1lOiB0ZW5hbnQubmFtZSxcbiAgICAgICAgc2x1ZzogdGVuYW50LnNsdWcsXG4gICAgICAgIGFwcE5hbWU6IHRlbmFudC5hcHBOYW1lLFxuICAgICAgICBzaG9ydE5hbWU6IHRlbmFudC5hcHBOYW1lLnN1YnN0cmluZygwLCAxMiksIC8vIFBXQSBzaG9ydCBuYW1lIGxpbWl0XG4gICAgICAgIGRlc2NyaXB0aW9uOiBgJHt0ZW5hbnQuYXBwTmFtZX0gLSBQb3dlcmVkIGJ5IGVNYXJrZXRXYWthYCxcbiAgICAgICAgcHJpbWFyeUNvbG9yOiB0ZW5hbnQucHJpbWFyeUNvbG9yLFxuICAgICAgICBzZWNvbmRhcnlDb2xvcjogdGVuYW50LnNlY29uZGFyeUNvbG9yLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmZmZmJyxcbiAgICAgICAgbG9nb1VybDogdGVuYW50LmxvZ29VcmwsXG4gICAgICAgIGZhdmljb25Vcmw6IHRlbmFudC5mYXZpY29uVXJsLFxuICAgICAgICB1cGRhdGVkQXQ6IHRlbmFudC51cGRhdGVkQXQudG9JU09TdHJpbmcoKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBHZW5lcmF0ZSBtYW5pZmVzdFxuICAgIGNvbnN0IG1hbmlmZXN0ID0ge1xuICAgICAgbmFtZTogYnJhbmRpbmcuYXBwTmFtZSxcbiAgICAgIHNob3J0X25hbWU6IGJyYW5kaW5nLnNob3J0TmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBicmFuZGluZy5kZXNjcmlwdGlvbixcbiAgICAgIHN0YXJ0X3VybDogYC8/dGVuYW50PSR7YnJhbmRpbmcuc2x1Z31gLFxuICAgICAgc2NvcGU6ICcvJyxcbiAgICAgIGRpc3BsYXk6ICdzdGFuZGFsb25lJyxcbiAgICAgIG9yaWVudGF0aW9uOiAncG9ydHJhaXQtcHJpbWFyeScsXG4gICAgICBiYWNrZ3JvdW5kX2NvbG9yOiBicmFuZGluZy5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICB0aGVtZV9jb2xvcjogYnJhbmRpbmcucHJpbWFyeUNvbG9yLFxuICAgICAgXG4gICAgICAvLyBJY29ucyAtIHVzZSB0ZW5hbnQgZmF2aWNvbiBvciBkZWZhdWx0c1xuICAgICAgaWNvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHNyYzogYnJhbmRpbmcuZmF2aWNvblVybCB8fCBgL2FwaS9pY29ucy9pY29uLTcyP3RlbmFudD0ke2JyYW5kaW5nLnNsdWd9YCxcbiAgICAgICAgICBzaXplczogJzcyeDcyJyxcbiAgICAgICAgICB0eXBlOiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgICBwdXJwb3NlOiAnYW55J1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgc3JjOiBicmFuZGluZy5mYXZpY29uVXJsIHx8IGAvYXBpL2ljb25zL2ljb24tOTY/dGVuYW50PSR7YnJhbmRpbmcuc2x1Z31gLFxuICAgICAgICAgIHNpemVzOiAnOTZ4OTYnLFxuICAgICAgICAgIHR5cGU6ICdpbWFnZS9wbmcnLFxuICAgICAgICAgIHB1cnBvc2U6ICdhbnknXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzcmM6IGJyYW5kaW5nLmZhdmljb25VcmwgfHwgYC9hcGkvaWNvbnMvaWNvbi0xMjg/dGVuYW50PSR7YnJhbmRpbmcuc2x1Z31gLFxuICAgICAgICAgIHNpemVzOiAnMTI4eDEyOCcsXG4gICAgICAgICAgdHlwZTogJ2ltYWdlL3BuZycsXG4gICAgICAgICAgcHVycG9zZTogJ2FueSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHNyYzogYnJhbmRpbmcuZmF2aWNvblVybCB8fCBgL2FwaS9pY29ucy9pY29uLTE0ND90ZW5hbnQ9JHticmFuZGluZy5zbHVnfWAsXG4gICAgICAgICAgc2l6ZXM6ICcxNDR4MTQ0JyxcbiAgICAgICAgICB0eXBlOiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgICBwdXJwb3NlOiAnYW55J1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgc3JjOiBicmFuZGluZy5mYXZpY29uVXJsIHx8IGAvYXBpL2ljb25zL2ljb24tMTUyP3RlbmFudD0ke2JyYW5kaW5nLnNsdWd9YCxcbiAgICAgICAgICBzaXplczogJzE1MngxNTInLFxuICAgICAgICAgIHR5cGU6ICdpbWFnZS9wbmcnLFxuICAgICAgICAgIHB1cnBvc2U6ICdhbnknXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzcmM6IGJyYW5kaW5nLmZhdmljb25VcmwgfHwgYC9hcGkvaWNvbnMvaWNvbi0xOTI/dGVuYW50PSR7YnJhbmRpbmcuc2x1Z31gLFxuICAgICAgICAgIHNpemVzOiAnMTkyeDE5MicsXG4gICAgICAgICAgdHlwZTogJ2ltYWdlL3BuZycsXG4gICAgICAgICAgcHVycG9zZTogJ2FueSBtYXNrYWJsZSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHNyYzogYnJhbmRpbmcuZmF2aWNvblVybCB8fCBgL2FwaS9pY29ucy9pY29uLTM4ND90ZW5hbnQ9JHticmFuZGluZy5zbHVnfWAsXG4gICAgICAgICAgc2l6ZXM6ICczODR4Mzg0JyxcbiAgICAgICAgICB0eXBlOiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgICBwdXJwb3NlOiAnYW55J1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgc3JjOiBicmFuZGluZy5mYXZpY29uVXJsIHx8IGAvYXBpL2ljb25zL2ljb24tNTEyP3RlbmFudD0ke2JyYW5kaW5nLnNsdWd9YCxcbiAgICAgICAgICBzaXplczogJzUxMng1MTInLFxuICAgICAgICAgIHR5cGU6ICdpbWFnZS9wbmcnLFxuICAgICAgICAgIHB1cnBvc2U6ICdhbnkgbWFza2FibGUnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBcbiAgICAgIC8vIENhdGVnb3JpZXMgZm9yIGFwcCBzdG9yZXNcbiAgICAgIGNhdGVnb3JpZXM6IFsnYnVzaW5lc3MnLCAncHJvZHVjdGl2aXR5J10sXG4gICAgICBcbiAgICAgIC8vIFNob3J0Y3V0cyBmb3IgcXVpY2sgYWN0aW9uc1xuICAgICAgc2hvcnRjdXRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnRGFzaGJvYXJkJyxcbiAgICAgICAgICBzaG9ydF9uYW1lOiAnRGFzaGJvYXJkJyxcbiAgICAgICAgICB1cmw6IGAvZGFzaGJvYXJkP3RlbmFudD0ke2JyYW5kaW5nLnNsdWd9YCxcbiAgICAgICAgICBpY29uczogW3sgc3JjOiBgL2FwaS9pY29ucy9pY29uLTk2P3RlbmFudD0ke2JyYW5kaW5nLnNsdWd9YCwgc2l6ZXM6ICc5Nng5NicgfV1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFxuICAgICAgLy8gU2NyZWVuc2hvdHMgKG9wdGlvbmFsLCBmb3IgYXBwIHN0b3JlIGxpc3RpbmdzKVxuICAgICAgc2NyZWVuc2hvdHM6IFtdLFxuICAgICAgXG4gICAgICAvLyBSZWxhdGVkIGFwcGxpY2F0aW9ucyAob3B0aW9uYWwpXG4gICAgICByZWxhdGVkX2FwcGxpY2F0aW9uczogW10sXG4gICAgICBwcmVmZXJfcmVsYXRlZF9hcHBsaWNhdGlvbnM6IGZhbHNlLFxuICAgICAgXG4gICAgICAvLyBDdXN0b20gZXh0ZW5zaW9uIGZvciB0ZW5hbnQgaWRlbnRpZmljYXRpb25cbiAgICAgIC8vIFRoaXMgaGVscHMgU2VydmljZSBXb3JrZXIga25vdyB3aGljaCB0ZW5hbnQncyBjYWNoZSB0byB1c2VcbiAgICAgIF90ZW5hbnQ6IHtcbiAgICAgICAgaWQ6IGJyYW5kaW5nLmlkLFxuICAgICAgICBzbHVnOiBicmFuZGluZy5zbHVnLFxuICAgICAgICBwcmltYXJ5Q29sb3I6IGJyYW5kaW5nLnByaW1hcnlDb2xvcixcbiAgICAgICAgc2Vjb25kYXJ5Q29sb3I6IGJyYW5kaW5nLnNlY29uZGFyeUNvbG9yXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEdlbmVyYXRlIEVUYWcgZm9yIGNhY2hlIGludmFsaWRhdGlvblxuICAgIGNvbnN0IGV0YWcgPSBgXCIke2JyYW5kaW5nLmlkfS0ke25ldyBEYXRlKGJyYW5kaW5nLnVwZGF0ZWRBdCkuZ2V0VGltZSgpfVwiYFxuICAgIFxuICAgIC8vIENoZWNrIElmLU5vbmUtTWF0Y2ggaGVhZGVyIGZvciAzMDQgcmVzcG9uc2VcbiAgICBjb25zdCBpZk5vbmVNYXRjaCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2lmLW5vbmUtbWF0Y2gnKVxuICAgIGlmIChpZk5vbmVNYXRjaCA9PT0gZXRhZykge1xuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UobnVsbCwgeyBzdGF0dXM6IDMwNCB9KVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24obWFuaWZlc3QsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9tYW5pZmVzdCtqc29uJyxcbiAgICAgICAgLy8gQ2FjaGUgcHJpdmF0ZWx5IHBlciB1c2VyL3RlbmFudCwgcmV2YWxpZGF0ZSBhZnRlciAxIGhvdXJcbiAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAncHJpdmF0ZSwgbWF4LWFnZT0zNjAwLCBtdXN0LXJldmFsaWRhdGUnLFxuICAgICAgICAnRVRhZyc6IGV0YWcsXG4gICAgICAgIC8vIFZhcnkgYnkgSG9zdCBmb3IgQ0ROIHRvIGNhY2hlIGRpZmZlcmVudGx5IHBlciBkb21haW5cbiAgICAgICAgJ1ZhcnknOiAnSG9zdCcsXG4gICAgICAgIC8vIENPUlMgZm9yIGNyb3NzLW9yaWdpbiBtYW5pZmVzdCByZXF1ZXN0c1xuICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonXG4gICAgICB9XG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgbWFuaWZlc3Q6JywgZXJyb3IpXG4gICAgXG4gICAgLy8gUmV0dXJuIG1pbmltYWwgdmFsaWQgbWFuaWZlc3Qgb24gZXJyb3JcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgbmFtZTogJ2VNYXJrZXRXYWthJyxcbiAgICAgIHNob3J0X25hbWU6ICdlTWFya2V0V2FrYScsXG4gICAgICBzdGFydF91cmw6ICcvJyxcbiAgICAgIGRpc3BsYXk6ICdzdGFuZGFsb25lJyxcbiAgICAgIHRoZW1lX2NvbG9yOiAnIzYzNjZmMScsXG4gICAgICBiYWNrZ3JvdW5kX2NvbG9yOiAnI2ZmZmZmZicsXG4gICAgICBpY29uczogW11cbiAgICB9LCB7XG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9tYW5pZmVzdCtqc29uJyxcbiAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInJlc29sdmVUZW5hbnRGcm9tUXVlcnkiLCJyZXNvbHZlVGVuYW50RnJvbUhvc3QiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwidGVuYW50U2x1ZyIsImdldCIsImhvc3QiLCJoZWFkZXJzIiwiYnJhbmRpbmciLCJpZCIsIm5hbWUiLCJzbHVnIiwiYXBwTmFtZSIsInNob3J0TmFtZSIsImRlc2NyaXB0aW9uIiwicHJpbWFyeUNvbG9yIiwic2Vjb25kYXJ5Q29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJsb2dvVXJsIiwiZmF2aWNvblVybCIsInVwZGF0ZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImNvbnRleHQiLCJ0ZW5hbnQiLCJzdWJzdHJpbmciLCJtYW5pZmVzdCIsInNob3J0X25hbWUiLCJzdGFydF91cmwiLCJzY29wZSIsImRpc3BsYXkiLCJvcmllbnRhdGlvbiIsImJhY2tncm91bmRfY29sb3IiLCJ0aGVtZV9jb2xvciIsImljb25zIiwic3JjIiwic2l6ZXMiLCJ0eXBlIiwicHVycG9zZSIsImNhdGVnb3JpZXMiLCJzaG9ydGN1dHMiLCJzY3JlZW5zaG90cyIsInJlbGF0ZWRfYXBwbGljYXRpb25zIiwicHJlZmVyX3JlbGF0ZWRfYXBwbGljYXRpb25zIiwiX3RlbmFudCIsImV0YWciLCJnZXRUaW1lIiwiaWZOb25lTWF0Y2giLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/manifest.json/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PARTNER_SCOPED_MODELS: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.PARTNER_SCOPED_MODELS),\n/* harmony export */   PLATFORM_MODELS: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.PLATFORM_MODELS),\n/* harmony export */   TENANT_SCOPED_MODELS: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.TENANT_SCOPED_MODELS),\n/* harmony export */   TenantIsolationError: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.TenantIsolationError),\n/* harmony export */   clearViolationLogs: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.clearViolationLogs),\n/* harmony export */   createPartnerContext: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.createPartnerContext),\n/* harmony export */   createTenantContext: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.createTenantContext),\n/* harmony export */   getViolationLogs: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.getViolationLogs),\n/* harmony export */   isPartnerScopedModel: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.isPartnerScopedModel),\n/* harmony export */   isTenantScopedModel: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.isTenantScopedModel),\n/* harmony export */   logViolation: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.logViolation),\n/* harmony export */   prisma: () => (/* binding */ prisma),\n/* harmony export */   validatePartnerAccess: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.validatePartnerAccess),\n/* harmony export */   validateTenantAccess: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.validateTenantAccess),\n/* harmony export */   withPartnerData: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withPartnerData),\n/* harmony export */   withPartnerFilter: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withPartnerFilter),\n/* harmony export */   withTenantData: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withTenantData),\n/* harmony export */   withTenantFilter: () => (/* reexport safe */ _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__.withTenantFilter)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _tenant_isolation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tenant-isolation */ \"(rsc)/./src/lib/tenant-isolation.ts\");\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) globalForPrisma.prisma = prisma;\n// Re-export tenant isolation utilities\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUMvREksS0FBS0MsS0FBeUIsR0FBZ0I7UUFBQztRQUFTO0tBQU8sR0FBRyxDQUFTO0FBQzdFLEdBQUU7QUFFRixJQUFJQSxJQUF5QixFQUFjSixnQkFBZ0JFLE1BQU0sR0FBR0E7QUFFcEUsdUNBQXVDO0FBd0JaIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW1hcmtldHdha2EvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxufVxuXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KHtcbiAgbG9nOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IFsnZXJyb3InLCAnd2FybiddIDogWydlcnJvciddLFxufSlcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcblxuLy8gUmUtZXhwb3J0IHRlbmFudCBpc29sYXRpb24gdXRpbGl0aWVzXG5leHBvcnQge1xuICB2YWxpZGF0ZVRlbmFudEFjY2VzcyxcbiAgdmFsaWRhdGVQYXJ0bmVyQWNjZXNzLFxuICBjcmVhdGVUZW5hbnRDb250ZXh0LFxuICBjcmVhdGVQYXJ0bmVyQ29udGV4dCxcbiAgd2l0aFRlbmFudEZpbHRlcixcbiAgd2l0aFRlbmFudERhdGEsXG4gIHdpdGhQYXJ0bmVyRmlsdGVyLFxuICB3aXRoUGFydG5lckRhdGEsXG4gIFRlbmFudElzb2xhdGlvbkVycm9yLFxuICBpc1RlbmFudFNjb3BlZE1vZGVsLFxuICBpc1BhcnRuZXJTY29wZWRNb2RlbCxcbiAgZ2V0VmlvbGF0aW9uTG9ncyxcbiAgY2xlYXJWaW9sYXRpb25Mb2dzLFxuICBsb2dWaW9sYXRpb24sXG4gIFRFTkFOVF9TQ09QRURfTU9ERUxTLFxuICBQQVJUTkVSX1NDT1BFRF9NT0RFTFMsXG4gIFBMQVRGT1JNX01PREVMUyxcbiAgdHlwZSBUZW5hbnRDb250ZXh0LFxuICB0eXBlIFBhcnRuZXJDb250ZXh0LFxuICB0eXBlIFRlbmFudFNjb3BlZE1vZGVsLFxuICB0eXBlIFBhcnRuZXJTY29wZWRNb2RlbCxcbiAgdHlwZSBQbGF0Zm9ybU1vZGVsXG59IGZyb20gJy4vdGVuYW50LWlzb2xhdGlvbidcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyIsInZhbGlkYXRlVGVuYW50QWNjZXNzIiwidmFsaWRhdGVQYXJ0bmVyQWNjZXNzIiwiY3JlYXRlVGVuYW50Q29udGV4dCIsImNyZWF0ZVBhcnRuZXJDb250ZXh0Iiwid2l0aFRlbmFudEZpbHRlciIsIndpdGhUZW5hbnREYXRhIiwid2l0aFBhcnRuZXJGaWx0ZXIiLCJ3aXRoUGFydG5lckRhdGEiLCJUZW5hbnRJc29sYXRpb25FcnJvciIsImlzVGVuYW50U2NvcGVkTW9kZWwiLCJpc1BhcnRuZXJTY29wZWRNb2RlbCIsImdldFZpb2xhdGlvbkxvZ3MiLCJjbGVhclZpb2xhdGlvbkxvZ3MiLCJsb2dWaW9sYXRpb24iLCJURU5BTlRfU0NPUEVEX01PREVMUyIsIlBBUlRORVJfU0NPUEVEX01PREVMUyIsIlBMQVRGT1JNX01PREVMUyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/tenant-isolation.ts":
/*!*************************************!*\
  !*** ./src/lib/tenant-isolation.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PARTNER_SCOPED_MODELS: () => (/* binding */ PARTNER_SCOPED_MODELS),\n/* harmony export */   PLATFORM_MODELS: () => (/* binding */ PLATFORM_MODELS),\n/* harmony export */   TENANT_SCOPED_MODELS: () => (/* binding */ TENANT_SCOPED_MODELS),\n/* harmony export */   TenantIsolationError: () => (/* binding */ TenantIsolationError),\n/* harmony export */   clearViolationLogs: () => (/* binding */ clearViolationLogs),\n/* harmony export */   createPartnerContext: () => (/* binding */ createPartnerContext),\n/* harmony export */   createTenantContext: () => (/* binding */ createTenantContext),\n/* harmony export */   getViolationLogs: () => (/* binding */ getViolationLogs),\n/* harmony export */   isPartnerScopedModel: () => (/* binding */ isPartnerScopedModel),\n/* harmony export */   isTenantScopedModel: () => (/* binding */ isTenantScopedModel),\n/* harmony export */   logViolation: () => (/* binding */ logViolation),\n/* harmony export */   validatePartnerAccess: () => (/* binding */ validatePartnerAccess),\n/* harmony export */   validateTenantAccess: () => (/* binding */ validateTenantAccess),\n/* harmony export */   withPartnerData: () => (/* binding */ withPartnerData),\n/* harmony export */   withPartnerFilter: () => (/* binding */ withPartnerFilter),\n/* harmony export */   withTenantData: () => (/* binding */ withTenantData),\n/* harmony export */   withTenantFilter: () => (/* binding */ withTenantFilter)\n/* harmony export */ });\n/**\n * Tenant Isolation Enforcement\n * \n * This module provides strict tenant data isolation at the database level.\n * Instead of Prisma middleware (which has async context issues), this uses\n * application-level validation before queries are executed.\n * \n * Features:\n * - Pre-query validation functions\n * - SUPER_ADMIN bypass with explicit flag\n * - Violation logging and hard failure\n * - Safe query builders that enforce tenant scoping\n */ // Models that require tenant isolation (tenant-scoped)\nconst TENANT_SCOPED_MODELS = [\n    \"TenantMembership\",\n    \"TenantDomain\",\n    \"AuditLog\"\n];\n// Models that require partner isolation (partner-scoped)\n// These are separate from tenant isolation - partners are platform-level\nconst PARTNER_SCOPED_MODELS = [\n    \"PartnerUser\",\n    \"PartnerAgreement\",\n    \"PartnerReferralCode\",\n    \"PartnerReferral\",\n    \"PartnerEarning\"\n];\n// Platform-level models (no isolation, Super Admin only)\nconst PLATFORM_MODELS = [\n    \"Partner\",\n    \"User\",\n    \"Tenant\",\n    \"Session\",\n    \"MagicLink\"\n];\nconst violations = [];\nconst MAX_VIOLATION_LOGS = 1000;\nfunction logViolation(violation) {\n    const log = {\n        ...violation,\n        timestamp: new Date()\n    };\n    violations.push(log);\n    if (violations.length > MAX_VIOLATION_LOGS) {\n        violations.shift();\n    }\n    console.error(\"[TENANT ISOLATION VIOLATION]\", JSON.stringify(log, null, 2));\n}\nfunction getViolationLogs() {\n    return [\n        ...violations\n    ];\n}\nfunction clearViolationLogs() {\n    violations.length = 0;\n}\n/**\n * Tenant Isolation Error\n */ class TenantIsolationError extends Error {\n    constructor(message, model, action, context){\n        super(message);\n        this.model = model;\n        this.action = action;\n        this.context = context;\n        this.name = \"TenantIsolationError\";\n    }\n}\n/**\n * Check if a model is tenant-scoped\n */ function isTenantScopedModel(model) {\n    return TENANT_SCOPED_MODELS.includes(model);\n}\n/**\n * Validate tenant context before executing a query\n * This should be called before any tenant-scoped database operation\n */ function validateTenantAccess(model, action, context, queryTenantId) {\n    // Skip validation for global models\n    if (!isTenantScopedModel(model)) {\n        return;\n    }\n    // Allow explicit bypass (for migrations, admin tools, etc.)\n    if (context?.bypassIsolation === true) {\n        if (!context.isSuperAdmin) {\n            const reason = \"Bypass isolation attempted without SUPER_ADMIN role\";\n            logViolation({\n                model,\n                action,\n                context,\n                query: {\n                    queryTenantId\n                },\n                reason\n            });\n            throw new TenantIsolationError(reason, model, action, context);\n        }\n        return;\n    }\n    // SUPER_ADMIN can access all data\n    if (context?.isSuperAdmin) {\n        return;\n    }\n    // No context = violation\n    if (!context) {\n        const reason = \"No tenant context provided for tenant-scoped query\";\n        logViolation({\n            model,\n            action,\n            context,\n            query: {\n                queryTenantId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n    // No tenantId in context = violation\n    if (!context.tenantId) {\n        const reason = \"No tenantId in context for tenant-scoped query\";\n        logViolation({\n            model,\n            action,\n            context,\n            query: {\n                queryTenantId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n    // If query specifies a tenantId, it must match context\n    if (queryTenantId && queryTenantId !== context.tenantId) {\n        const reason = `Cross-tenant access attempt: query tenantId (${queryTenantId}) != context tenantId (${context.tenantId})`;\n        logViolation({\n            model,\n            action,\n            context,\n            query: {\n                queryTenantId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n}\n/**\n * Create a tenant context from user session\n */ function createTenantContext(tenantId, userId, isSuperAdmin, bypassIsolation = false) {\n    return {\n        tenantId,\n        userId,\n        isSuperAdmin,\n        bypassIsolation\n    };\n}\n/**\n * Create a partner context from user session\n */ function createPartnerContext(partnerId, userId, isSuperAdmin, isPartnerOwner = false, isPartnerAdmin = false, bypassIsolation = false) {\n    return {\n        partnerId,\n        userId,\n        isSuperAdmin,\n        isPartnerOwner,\n        isPartnerAdmin,\n        bypassIsolation\n    };\n}\n/**\n * Ensure a WHERE clause includes the correct tenantId\n */ function withTenantFilter(where, tenantId) {\n    return {\n        ...where,\n        tenantId\n    };\n}\n/**\n * Ensure data being created includes the correct tenantId\n */ function withTenantData(data, tenantId) {\n    return {\n        ...data,\n        tenantId\n    };\n}\n/**\n * Check if a model is partner-scoped\n */ function isPartnerScopedModel(model) {\n    return PARTNER_SCOPED_MODELS.includes(model);\n}\n/**\n * Validate partner context before executing a query\n * This should be called before any partner-scoped database operation\n */ function validatePartnerAccess(model, action, context, queryPartnerId) {\n    // Skip validation for non-partner models\n    if (!isPartnerScopedModel(model)) {\n        return;\n    }\n    // Allow explicit bypass (for migrations, admin tools, etc.)\n    if (context?.bypassIsolation === true) {\n        if (!context.isSuperAdmin) {\n            const reason = \"Partner bypass isolation attempted without SUPER_ADMIN role\";\n            logViolation({\n                model,\n                action,\n                context: context,\n                query: {\n                    queryPartnerId\n                },\n                reason\n            });\n            throw new TenantIsolationError(reason, model, action, context);\n        }\n        return;\n    }\n    // SUPER_ADMIN can access all partner data\n    if (context?.isSuperAdmin) {\n        return;\n    }\n    // No context = violation\n    if (!context) {\n        const reason = \"No partner context provided for partner-scoped query\";\n        logViolation({\n            model,\n            action,\n            context: null,\n            query: {\n                queryPartnerId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, null);\n    }\n    // No partnerId in context = violation\n    if (!context.partnerId) {\n        const reason = \"No partnerId in context for partner-scoped query\";\n        logViolation({\n            model,\n            action,\n            context: context,\n            query: {\n                queryPartnerId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n    // If query specifies a partnerId, it must match context\n    if (queryPartnerId && queryPartnerId !== context.partnerId) {\n        const reason = `Cross-partner access attempt: query partnerId (${queryPartnerId}) != context partnerId (${context.partnerId})`;\n        logViolation({\n            model,\n            action,\n            context: context,\n            query: {\n                queryPartnerId\n            },\n            reason\n        });\n        throw new TenantIsolationError(reason, model, action, context);\n    }\n}\n/**\n * Ensure a WHERE clause includes the correct partnerId\n */ function withPartnerFilter(where, partnerId) {\n    return {\n        ...where,\n        partnerId\n    };\n}\n/**\n * Ensure data being created includes the correct partnerId\n */ function withPartnerData(data, partnerId) {\n    return {\n        ...data,\n        partnerId\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UE4sU0FBaUI7SUFFakIsT0FBTztRQUNMLEdBQUdNLElBQUk7UUFDUE47SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW1hcmtldHdha2EvLi9zcmMvbGliL3RlbmFudC1pc29sYXRpb24udHM/ZjI1MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlbmFudCBJc29sYXRpb24gRW5mb3JjZW1lbnRcbiAqIFxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgc3RyaWN0IHRlbmFudCBkYXRhIGlzb2xhdGlvbiBhdCB0aGUgZGF0YWJhc2UgbGV2ZWwuXG4gKiBJbnN0ZWFkIG9mIFByaXNtYSBtaWRkbGV3YXJlICh3aGljaCBoYXMgYXN5bmMgY29udGV4dCBpc3N1ZXMpLCB0aGlzIHVzZXNcbiAqIGFwcGxpY2F0aW9uLWxldmVsIHZhbGlkYXRpb24gYmVmb3JlIHF1ZXJpZXMgYXJlIGV4ZWN1dGVkLlxuICogXG4gKiBGZWF0dXJlczpcbiAqIC0gUHJlLXF1ZXJ5IHZhbGlkYXRpb24gZnVuY3Rpb25zXG4gKiAtIFNVUEVSX0FETUlOIGJ5cGFzcyB3aXRoIGV4cGxpY2l0IGZsYWdcbiAqIC0gVmlvbGF0aW9uIGxvZ2dpbmcgYW5kIGhhcmQgZmFpbHVyZVxuICogLSBTYWZlIHF1ZXJ5IGJ1aWxkZXJzIHRoYXQgZW5mb3JjZSB0ZW5hbnQgc2NvcGluZ1xuICovXG5cbi8vIE1vZGVscyB0aGF0IHJlcXVpcmUgdGVuYW50IGlzb2xhdGlvbiAodGVuYW50LXNjb3BlZClcbmV4cG9ydCBjb25zdCBURU5BTlRfU0NPUEVEX01PREVMUyA9IFtcbiAgJ1RlbmFudE1lbWJlcnNoaXAnLFxuICAnVGVuYW50RG9tYWluJywgXG4gICdBdWRpdExvZycsXG4gIC8vIEFkZCBmdXR1cmUgdGVuYW50LXNjb3BlZCBtb2RlbHMgaGVyZVxuXSBhcyBjb25zdFxuXG4vLyBNb2RlbHMgdGhhdCByZXF1aXJlIHBhcnRuZXIgaXNvbGF0aW9uIChwYXJ0bmVyLXNjb3BlZClcbi8vIFRoZXNlIGFyZSBzZXBhcmF0ZSBmcm9tIHRlbmFudCBpc29sYXRpb24gLSBwYXJ0bmVycyBhcmUgcGxhdGZvcm0tbGV2ZWxcbmV4cG9ydCBjb25zdCBQQVJUTkVSX1NDT1BFRF9NT0RFTFMgPSBbXG4gICdQYXJ0bmVyVXNlcicsXG4gICdQYXJ0bmVyQWdyZWVtZW50JyxcbiAgJ1BhcnRuZXJSZWZlcnJhbENvZGUnLFxuICAnUGFydG5lclJlZmVycmFsJyxcbiAgJ1BhcnRuZXJFYXJuaW5nJyxcbl0gYXMgY29uc3RcblxuLy8gUGxhdGZvcm0tbGV2ZWwgbW9kZWxzIChubyBpc29sYXRpb24sIFN1cGVyIEFkbWluIG9ubHkpXG5leHBvcnQgY29uc3QgUExBVEZPUk1fTU9ERUxTID0gW1xuICAnUGFydG5lcicsXG4gICdVc2VyJyxcbiAgJ1RlbmFudCcsXG4gICdTZXNzaW9uJyxcbiAgJ01hZ2ljTGluaycsXG5dIGFzIGNvbnN0XG5cbmV4cG9ydCB0eXBlIFRlbmFudFNjb3BlZE1vZGVsID0gdHlwZW9mIFRFTkFOVF9TQ09QRURfTU9ERUxTW251bWJlcl1cbmV4cG9ydCB0eXBlIFBhcnRuZXJTY29wZWRNb2RlbCA9IHR5cGVvZiBQQVJUTkVSX1NDT1BFRF9NT0RFTFNbbnVtYmVyXVxuZXhwb3J0IHR5cGUgUGxhdGZvcm1Nb2RlbCA9IHR5cGVvZiBQTEFURk9STV9NT0RFTFNbbnVtYmVyXVxuXG5leHBvcnQgaW50ZXJmYWNlIFRlbmFudENvbnRleHQge1xuICB0ZW5hbnRJZDogc3RyaW5nIHwgbnVsbFxuICB1c2VySWQ6IHN0cmluZyB8IG51bGxcbiAgaXNTdXBlckFkbWluOiBib29sZWFuXG4gIGJ5cGFzc0lzb2xhdGlvbj86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJ0bmVyQ29udGV4dCB7XG4gIHBhcnRuZXJJZDogc3RyaW5nIHwgbnVsbFxuICB1c2VySWQ6IHN0cmluZyB8IG51bGxcbiAgaXNTdXBlckFkbWluOiBib29sZWFuXG4gIGlzUGFydG5lck93bmVyPzogYm9vbGVhblxuICBpc1BhcnRuZXJBZG1pbj86IGJvb2xlYW5cbiAgYnlwYXNzSXNvbGF0aW9uPzogYm9vbGVhblxufVxuXG4vKipcbiAqIFZpb2xhdGlvbiBsb2dnZXJcbiAqL1xuaW50ZXJmYWNlIFZpb2xhdGlvbkxvZyB7XG4gIHRpbWVzdGFtcDogRGF0ZVxuICBtb2RlbDogc3RyaW5nXG4gIGFjdGlvbjogc3RyaW5nXG4gIGNvbnRleHQ6IFRlbmFudENvbnRleHQgfCBudWxsXG4gIHF1ZXJ5OiBhbnlcbiAgcmVhc29uOiBzdHJpbmdcbn1cblxuY29uc3QgdmlvbGF0aW9uczogVmlvbGF0aW9uTG9nW10gPSBbXVxuY29uc3QgTUFYX1ZJT0xBVElPTl9MT0dTID0gMTAwMFxuXG5leHBvcnQgZnVuY3Rpb24gbG9nVmlvbGF0aW9uKHZpb2xhdGlvbjogT21pdDxWaW9sYXRpb25Mb2csICd0aW1lc3RhbXAnPik6IHZvaWQge1xuICBjb25zdCBsb2c6IFZpb2xhdGlvbkxvZyA9IHtcbiAgICAuLi52aW9sYXRpb24sXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gIH1cbiAgXG4gIHZpb2xhdGlvbnMucHVzaChsb2cpXG4gIFxuICBpZiAodmlvbGF0aW9ucy5sZW5ndGggPiBNQVhfVklPTEFUSU9OX0xPR1MpIHtcbiAgICB2aW9sYXRpb25zLnNoaWZ0KClcbiAgfVxuICBcbiAgY29uc29sZS5lcnJvcignW1RFTkFOVCBJU09MQVRJT04gVklPTEFUSU9OXScsIEpTT04uc3RyaW5naWZ5KGxvZywgbnVsbCwgMikpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWaW9sYXRpb25Mb2dzKCk6IFZpb2xhdGlvbkxvZ1tdIHtcbiAgcmV0dXJuIFsuLi52aW9sYXRpb25zXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJWaW9sYXRpb25Mb2dzKCk6IHZvaWQge1xuICB2aW9sYXRpb25zLmxlbmd0aCA9IDBcbn1cblxuLyoqXG4gKiBUZW5hbnQgSXNvbGF0aW9uIEVycm9yXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW5hbnRJc29sYXRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIHB1YmxpYyBtb2RlbDogc3RyaW5nLFxuICAgIHB1YmxpYyBhY3Rpb246IHN0cmluZyxcbiAgICBwdWJsaWMgY29udGV4dDogVGVuYW50Q29udGV4dCB8IG51bGxcbiAgKSB7XG4gICAgc3VwZXIobWVzc2FnZSlcbiAgICB0aGlzLm5hbWUgPSAnVGVuYW50SXNvbGF0aW9uRXJyb3InXG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIG1vZGVsIGlzIHRlbmFudC1zY29wZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVGVuYW50U2NvcGVkTW9kZWwobW9kZWw6IHN0cmluZyk6IG1vZGVsIGlzIFRlbmFudFNjb3BlZE1vZGVsIHtcbiAgcmV0dXJuIFRFTkFOVF9TQ09QRURfTU9ERUxTLmluY2x1ZGVzKG1vZGVsIGFzIGFueSlcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSB0ZW5hbnQgY29udGV4dCBiZWZvcmUgZXhlY3V0aW5nIGEgcXVlcnlcbiAqIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCBiZWZvcmUgYW55IHRlbmFudC1zY29wZWQgZGF0YWJhc2Ugb3BlcmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVRlbmFudEFjY2VzcyhcbiAgbW9kZWw6IHN0cmluZyxcbiAgYWN0aW9uOiBzdHJpbmcsXG4gIGNvbnRleHQ6IFRlbmFudENvbnRleHQgfCBudWxsLFxuICBxdWVyeVRlbmFudElkPzogc3RyaW5nIHwgbnVsbFxuKTogdm9pZCB7XG4gIC8vIFNraXAgdmFsaWRhdGlvbiBmb3IgZ2xvYmFsIG1vZGVsc1xuICBpZiAoIWlzVGVuYW50U2NvcGVkTW9kZWwobW9kZWwpKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgXG4gIC8vIEFsbG93IGV4cGxpY2l0IGJ5cGFzcyAoZm9yIG1pZ3JhdGlvbnMsIGFkbWluIHRvb2xzLCBldGMuKVxuICBpZiAoY29udGV4dD8uYnlwYXNzSXNvbGF0aW9uID09PSB0cnVlKSB7XG4gICAgaWYgKCFjb250ZXh0LmlzU3VwZXJBZG1pbikge1xuICAgICAgY29uc3QgcmVhc29uID0gJ0J5cGFzcyBpc29sYXRpb24gYXR0ZW1wdGVkIHdpdGhvdXQgU1VQRVJfQURNSU4gcm9sZSdcbiAgICAgIGxvZ1Zpb2xhdGlvbih7IG1vZGVsLCBhY3Rpb24sIGNvbnRleHQsIHF1ZXJ5OiB7IHF1ZXJ5VGVuYW50SWQgfSwgcmVhc29uIH0pXG4gICAgICB0aHJvdyBuZXcgVGVuYW50SXNvbGF0aW9uRXJyb3IocmVhc29uLCBtb2RlbCwgYWN0aW9uLCBjb250ZXh0KVxuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuICBcbiAgLy8gU1VQRVJfQURNSU4gY2FuIGFjY2VzcyBhbGwgZGF0YVxuICBpZiAoY29udGV4dD8uaXNTdXBlckFkbWluKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgXG4gIC8vIE5vIGNvbnRleHQgPSB2aW9sYXRpb25cbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgY29uc3QgcmVhc29uID0gJ05vIHRlbmFudCBjb250ZXh0IHByb3ZpZGVkIGZvciB0ZW5hbnQtc2NvcGVkIHF1ZXJ5J1xuICAgIGxvZ1Zpb2xhdGlvbih7IG1vZGVsLCBhY3Rpb24sIGNvbnRleHQsIHF1ZXJ5OiB7IHF1ZXJ5VGVuYW50SWQgfSwgcmVhc29uIH0pXG4gICAgdGhyb3cgbmV3IFRlbmFudElzb2xhdGlvbkVycm9yKHJlYXNvbiwgbW9kZWwsIGFjdGlvbiwgY29udGV4dClcbiAgfVxuICBcbiAgLy8gTm8gdGVuYW50SWQgaW4gY29udGV4dCA9IHZpb2xhdGlvblxuICBpZiAoIWNvbnRleHQudGVuYW50SWQpIHtcbiAgICBjb25zdCByZWFzb24gPSAnTm8gdGVuYW50SWQgaW4gY29udGV4dCBmb3IgdGVuYW50LXNjb3BlZCBxdWVyeSdcbiAgICBsb2dWaW9sYXRpb24oeyBtb2RlbCwgYWN0aW9uLCBjb250ZXh0LCBxdWVyeTogeyBxdWVyeVRlbmFudElkIH0sIHJlYXNvbiB9KVxuICAgIHRocm93IG5ldyBUZW5hbnRJc29sYXRpb25FcnJvcihyZWFzb24sIG1vZGVsLCBhY3Rpb24sIGNvbnRleHQpXG4gIH1cbiAgXG4gIC8vIElmIHF1ZXJ5IHNwZWNpZmllcyBhIHRlbmFudElkLCBpdCBtdXN0IG1hdGNoIGNvbnRleHRcbiAgaWYgKHF1ZXJ5VGVuYW50SWQgJiYgcXVlcnlUZW5hbnRJZCAhPT0gY29udGV4dC50ZW5hbnRJZCkge1xuICAgIGNvbnN0IHJlYXNvbiA9IGBDcm9zcy10ZW5hbnQgYWNjZXNzIGF0dGVtcHQ6IHF1ZXJ5IHRlbmFudElkICgke3F1ZXJ5VGVuYW50SWR9KSAhPSBjb250ZXh0IHRlbmFudElkICgke2NvbnRleHQudGVuYW50SWR9KWBcbiAgICBsb2dWaW9sYXRpb24oeyBtb2RlbCwgYWN0aW9uLCBjb250ZXh0LCBxdWVyeTogeyBxdWVyeVRlbmFudElkIH0sIHJlYXNvbiB9KVxuICAgIHRocm93IG5ldyBUZW5hbnRJc29sYXRpb25FcnJvcihyZWFzb24sIG1vZGVsLCBhY3Rpb24sIGNvbnRleHQpXG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSB0ZW5hbnQgY29udGV4dCBmcm9tIHVzZXIgc2Vzc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGVuYW50Q29udGV4dChcbiAgdGVuYW50SWQ6IHN0cmluZyB8IG51bGwsXG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbCxcbiAgaXNTdXBlckFkbWluOiBib29sZWFuLFxuICBieXBhc3NJc29sYXRpb246IGJvb2xlYW4gPSBmYWxzZVxuKTogVGVuYW50Q29udGV4dCB7XG4gIHJldHVybiB7XG4gICAgdGVuYW50SWQsXG4gICAgdXNlcklkLFxuICAgIGlzU3VwZXJBZG1pbixcbiAgICBieXBhc3NJc29sYXRpb25cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhIHBhcnRuZXIgY29udGV4dCBmcm9tIHVzZXIgc2Vzc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUGFydG5lckNvbnRleHQoXG4gIHBhcnRuZXJJZDogc3RyaW5nIHwgbnVsbCxcbiAgdXNlcklkOiBzdHJpbmcgfCBudWxsLFxuICBpc1N1cGVyQWRtaW46IGJvb2xlYW4sXG4gIGlzUGFydG5lck93bmVyOiBib29sZWFuID0gZmFsc2UsXG4gIGlzUGFydG5lckFkbWluOiBib29sZWFuID0gZmFsc2UsXG4gIGJ5cGFzc0lzb2xhdGlvbjogYm9vbGVhbiA9IGZhbHNlXG4pOiBQYXJ0bmVyQ29udGV4dCB7XG4gIHJldHVybiB7XG4gICAgcGFydG5lcklkLFxuICAgIHVzZXJJZCxcbiAgICBpc1N1cGVyQWRtaW4sXG4gICAgaXNQYXJ0bmVyT3duZXIsXG4gICAgaXNQYXJ0bmVyQWRtaW4sXG4gICAgYnlwYXNzSXNvbGF0aW9uXG4gIH1cbn1cblxuLyoqXG4gKiBFbnN1cmUgYSBXSEVSRSBjbGF1c2UgaW5jbHVkZXMgdGhlIGNvcnJlY3QgdGVuYW50SWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhUZW5hbnRGaWx0ZXI8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICB3aGVyZTogVCxcbiAgdGVuYW50SWQ6IHN0cmluZ1xuKTogVCAmIHsgdGVuYW50SWQ6IHN0cmluZyB9IHtcbiAgcmV0dXJuIHtcbiAgICAuLi53aGVyZSxcbiAgICB0ZW5hbnRJZFxuICB9XG59XG5cbi8qKlxuICogRW5zdXJlIGRhdGEgYmVpbmcgY3JlYXRlZCBpbmNsdWRlcyB0aGUgY29ycmVjdCB0ZW5hbnRJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aFRlbmFudERhdGE8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICBkYXRhOiBULFxuICB0ZW5hbnRJZDogc3RyaW5nXG4pOiBUICYgeyB0ZW5hbnRJZDogc3RyaW5nIH0ge1xuICByZXR1cm4ge1xuICAgIC4uLmRhdGEsXG4gICAgdGVuYW50SWRcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbW9kZWwgaXMgcGFydG5lci1zY29wZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUGFydG5lclNjb3BlZE1vZGVsKG1vZGVsOiBzdHJpbmcpOiBtb2RlbCBpcyBQYXJ0bmVyU2NvcGVkTW9kZWwge1xuICByZXR1cm4gUEFSVE5FUl9TQ09QRURfTU9ERUxTLmluY2x1ZGVzKG1vZGVsIGFzIGFueSlcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBwYXJ0bmVyIGNvbnRleHQgYmVmb3JlIGV4ZWN1dGluZyBhIHF1ZXJ5XG4gKiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIGFueSBwYXJ0bmVyLXNjb3BlZCBkYXRhYmFzZSBvcGVyYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGFydG5lckFjY2VzcyhcbiAgbW9kZWw6IHN0cmluZyxcbiAgYWN0aW9uOiBzdHJpbmcsXG4gIGNvbnRleHQ6IFBhcnRuZXJDb250ZXh0IHwgbnVsbCxcbiAgcXVlcnlQYXJ0bmVySWQ/OiBzdHJpbmcgfCBudWxsXG4pOiB2b2lkIHtcbiAgLy8gU2tpcCB2YWxpZGF0aW9uIGZvciBub24tcGFydG5lciBtb2RlbHNcbiAgaWYgKCFpc1BhcnRuZXJTY29wZWRNb2RlbChtb2RlbCkpIHtcbiAgICByZXR1cm5cbiAgfVxuICBcbiAgLy8gQWxsb3cgZXhwbGljaXQgYnlwYXNzIChmb3IgbWlncmF0aW9ucywgYWRtaW4gdG9vbHMsIGV0Yy4pXG4gIGlmIChjb250ZXh0Py5ieXBhc3NJc29sYXRpb24gPT09IHRydWUpIHtcbiAgICBpZiAoIWNvbnRleHQuaXNTdXBlckFkbWluKSB7XG4gICAgICBjb25zdCByZWFzb24gPSAnUGFydG5lciBieXBhc3MgaXNvbGF0aW9uIGF0dGVtcHRlZCB3aXRob3V0IFNVUEVSX0FETUlOIHJvbGUnXG4gICAgICBsb2dWaW9sYXRpb24oeyBtb2RlbCwgYWN0aW9uLCBjb250ZXh0OiBjb250ZXh0IGFzIGFueSwgcXVlcnk6IHsgcXVlcnlQYXJ0bmVySWQgfSwgcmVhc29uIH0pXG4gICAgICB0aHJvdyBuZXcgVGVuYW50SXNvbGF0aW9uRXJyb3IocmVhc29uLCBtb2RlbCwgYWN0aW9uLCBjb250ZXh0IGFzIGFueSlcbiAgICB9XG4gICAgcmV0dXJuXG4gIH1cbiAgXG4gIC8vIFNVUEVSX0FETUlOIGNhbiBhY2Nlc3MgYWxsIHBhcnRuZXIgZGF0YVxuICBpZiAoY29udGV4dD8uaXNTdXBlckFkbWluKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgXG4gIC8vIE5vIGNvbnRleHQgPSB2aW9sYXRpb25cbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgY29uc3QgcmVhc29uID0gJ05vIHBhcnRuZXIgY29udGV4dCBwcm92aWRlZCBmb3IgcGFydG5lci1zY29wZWQgcXVlcnknXG4gICAgbG9nVmlvbGF0aW9uKHsgbW9kZWwsIGFjdGlvbiwgY29udGV4dDogbnVsbCwgcXVlcnk6IHsgcXVlcnlQYXJ0bmVySWQgfSwgcmVhc29uIH0pXG4gICAgdGhyb3cgbmV3IFRlbmFudElzb2xhdGlvbkVycm9yKHJlYXNvbiwgbW9kZWwsIGFjdGlvbiwgbnVsbClcbiAgfVxuICBcbiAgLy8gTm8gcGFydG5lcklkIGluIGNvbnRleHQgPSB2aW9sYXRpb25cbiAgaWYgKCFjb250ZXh0LnBhcnRuZXJJZCkge1xuICAgIGNvbnN0IHJlYXNvbiA9ICdObyBwYXJ0bmVySWQgaW4gY29udGV4dCBmb3IgcGFydG5lci1zY29wZWQgcXVlcnknXG4gICAgbG9nVmlvbGF0aW9uKHsgbW9kZWwsIGFjdGlvbiwgY29udGV4dDogY29udGV4dCBhcyBhbnksIHF1ZXJ5OiB7IHF1ZXJ5UGFydG5lcklkIH0sIHJlYXNvbiB9KVxuICAgIHRocm93IG5ldyBUZW5hbnRJc29sYXRpb25FcnJvcihyZWFzb24sIG1vZGVsLCBhY3Rpb24sIGNvbnRleHQgYXMgYW55KVxuICB9XG4gIFxuICAvLyBJZiBxdWVyeSBzcGVjaWZpZXMgYSBwYXJ0bmVySWQsIGl0IG11c3QgbWF0Y2ggY29udGV4dFxuICBpZiAocXVlcnlQYXJ0bmVySWQgJiYgcXVlcnlQYXJ0bmVySWQgIT09IGNvbnRleHQucGFydG5lcklkKSB7XG4gICAgY29uc3QgcmVhc29uID0gYENyb3NzLXBhcnRuZXIgYWNjZXNzIGF0dGVtcHQ6IHF1ZXJ5IHBhcnRuZXJJZCAoJHtxdWVyeVBhcnRuZXJJZH0pICE9IGNvbnRleHQgcGFydG5lcklkICgke2NvbnRleHQucGFydG5lcklkfSlgXG4gICAgbG9nVmlvbGF0aW9uKHsgbW9kZWwsIGFjdGlvbiwgY29udGV4dDogY29udGV4dCBhcyBhbnksIHF1ZXJ5OiB7IHF1ZXJ5UGFydG5lcklkIH0sIHJlYXNvbiB9KVxuICAgIHRocm93IG5ldyBUZW5hbnRJc29sYXRpb25FcnJvcihyZWFzb24sIG1vZGVsLCBhY3Rpb24sIGNvbnRleHQgYXMgYW55KVxuICB9XG59XG5cbi8qKlxuICogRW5zdXJlIGEgV0hFUkUgY2xhdXNlIGluY2x1ZGVzIHRoZSBjb3JyZWN0IHBhcnRuZXJJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aFBhcnRuZXJGaWx0ZXI8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICB3aGVyZTogVCxcbiAgcGFydG5lcklkOiBzdHJpbmdcbik6IFQgJiB7IHBhcnRuZXJJZDogc3RyaW5nIH0ge1xuICByZXR1cm4ge1xuICAgIC4uLndoZXJlLFxuICAgIHBhcnRuZXJJZFxuICB9XG59XG5cbi8qKlxuICogRW5zdXJlIGRhdGEgYmVpbmcgY3JlYXRlZCBpbmNsdWRlcyB0aGUgY29ycmVjdCBwYXJ0bmVySWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhQYXJ0bmVyRGF0YTxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55Pj4oXG4gIGRhdGE6IFQsXG4gIHBhcnRuZXJJZDogc3RyaW5nXG4pOiBUICYgeyBwYXJ0bmVySWQ6IHN0cmluZyB9IHtcbiAgcmV0dXJuIHtcbiAgICAuLi5kYXRhLFxuICAgIHBhcnRuZXJJZFxuICB9XG59XG4iXSwibmFtZXMiOlsiVEVOQU5UX1NDT1BFRF9NT0RFTFMiLCJQQVJUTkVSX1NDT1BFRF9NT0RFTFMiLCJQTEFURk9STV9NT0RFTFMiLCJ2aW9sYXRpb25zIiwiTUFYX1ZJT0xBVElPTl9MT0dTIiwibG9nVmlvbGF0aW9uIiwidmlvbGF0aW9uIiwibG9nIiwidGltZXN0YW1wIiwiRGF0ZSIsInB1c2giLCJsZW5ndGgiLCJzaGlmdCIsImNvbnNvbGUiLCJlcnJvciIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRWaW9sYXRpb25Mb2dzIiwiY2xlYXJWaW9sYXRpb25Mb2dzIiwiVGVuYW50SXNvbGF0aW9uRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsIm1vZGVsIiwiYWN0aW9uIiwiY29udGV4dCIsIm5hbWUiLCJpc1RlbmFudFNjb3BlZE1vZGVsIiwiaW5jbHVkZXMiLCJ2YWxpZGF0ZVRlbmFudEFjY2VzcyIsInF1ZXJ5VGVuYW50SWQiLCJieXBhc3NJc29sYXRpb24iLCJpc1N1cGVyQWRtaW4iLCJyZWFzb24iLCJxdWVyeSIsInRlbmFudElkIiwiY3JlYXRlVGVuYW50Q29udGV4dCIsInVzZXJJZCIsImNyZWF0ZVBhcnRuZXJDb250ZXh0IiwicGFydG5lcklkIiwiaXNQYXJ0bmVyT3duZXIiLCJpc1BhcnRuZXJBZG1pbiIsIndpdGhUZW5hbnRGaWx0ZXIiLCJ3aGVyZSIsIndpdGhUZW5hbnREYXRhIiwiZGF0YSIsImlzUGFydG5lclNjb3BlZE1vZGVsIiwidmFsaWRhdGVQYXJ0bmVyQWNjZXNzIiwicXVlcnlQYXJ0bmVySWQiLCJ3aXRoUGFydG5lckZpbHRlciIsIndpdGhQYXJ0bmVyRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/tenant-isolation.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/tenant-resolver.ts":
/*!************************************!*\
  !*** ./src/lib/tenant-resolver.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PUBLIC_ROUTES: () => (/* binding */ PUBLIC_ROUTES),\n/* harmony export */   SUPER_ADMIN_ROUTES: () => (/* binding */ SUPER_ADMIN_ROUTES),\n/* harmony export */   getTenantById: () => (/* binding */ getTenantById),\n/* harmony export */   getTenantBySlug: () => (/* binding */ getTenantBySlug),\n/* harmony export */   getTenantFromDomain: () => (/* binding */ getTenantFromDomain),\n/* harmony export */   getTenantFromSlug: () => (/* binding */ getTenantFromSlug),\n/* harmony export */   isPublicRoute: () => (/* binding */ isPublicRoute),\n/* harmony export */   isSuperAdminRoute: () => (/* binding */ isSuperAdminRoute),\n/* harmony export */   isTenantAccessible: () => (/* binding */ isTenantAccessible),\n/* harmony export */   resolveTenant: () => (/* binding */ resolveTenant),\n/* harmony export */   resolveTenantBySlug: () => (/* binding */ resolveTenantBySlug),\n/* harmony export */   resolveTenantFromHeader: () => (/* binding */ resolveTenantFromHeader),\n/* harmony export */   resolveTenantFromHost: () => (/* binding */ resolveTenantFromHost),\n/* harmony export */   resolveTenantFromQuery: () => (/* binding */ resolveTenantFromQuery)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n// Routes that don't require tenant resolution\nconst PUBLIC_ROUTES = [\n    \"/login\",\n    \"/register\",\n    \"/api/auth\",\n    \"/api/health\",\n    \"/_next\",\n    \"/favicon.ico\",\n    \"/manifest.json\",\n    \"/sw.js\",\n    \"/icons\"\n];\n// Super Admin routes (require SUPER_ADMIN, no tenant needed)\nconst SUPER_ADMIN_ROUTES = [\n    \"/admin\",\n    \"/api/admin\"\n];\n/**\n * Check if a path is public (no tenant resolution needed)\n */ function isPublicRoute(pathname) {\n    return PUBLIC_ROUTES.some((route)=>pathname.startsWith(route));\n}\n/**\n * Check if a path is a Super Admin route\n */ function isSuperAdminRoute(pathname) {\n    return SUPER_ADMIN_ROUTES.some((route)=>pathname.startsWith(route));\n}\n/**\n * Resolves tenant from hostname using proper resolution order:\n * 1. Custom domain (exact match in TenantDomain)\n * 2. Subdomain (extracted from hostname)\n * 3. Returns null if no match\n */ async function resolveTenantFromHost(hostname) {\n    const host = hostname.split(\":\")[0].toLowerCase();\n    // 1. Check for custom domain match (highest priority)\n    const customDomain = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.tenantDomain.findFirst({\n        where: {\n            domain: host,\n            type: \"CUSTOM\",\n            status: \"VERIFIED\"\n        },\n        include: {\n            tenant: {\n                include: {\n                    domains: true\n                }\n            }\n        }\n    });\n    if (customDomain && customDomain.tenant.status === \"ACTIVE\") {\n        return {\n            tenant: customDomain.tenant,\n            resolvedVia: \"custom_domain\",\n            domain: host\n        };\n    }\n    // 2. Extract and check subdomain\n    const parts = host.split(\".\");\n    if (parts.length >= 3) {\n        const subdomain = parts[0];\n        // Skip common non-tenant subdomains\n        if (![\n            \"www\",\n            \"api\",\n            \"app\",\n            \"admin\",\n            \"preview\",\n            \"localhost\"\n        ].includes(subdomain)) {\n            // Check TenantDomain for subdomain\n            const subdomainEntry = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.tenantDomain.findFirst({\n                where: {\n                    domain: subdomain,\n                    type: \"SUBDOMAIN\",\n                    status: \"VERIFIED\"\n                },\n                include: {\n                    tenant: {\n                        include: {\n                            domains: true\n                        }\n                    }\n                }\n            });\n            if (subdomainEntry && subdomainEntry.tenant.status === \"ACTIVE\") {\n                return {\n                    tenant: subdomainEntry.tenant,\n                    resolvedVia: \"subdomain\",\n                    domain: subdomain\n                };\n            }\n            // Fallback: Check Tenant.slug directly\n            const tenant = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.tenant.findFirst({\n                where: {\n                    slug: subdomain,\n                    status: \"ACTIVE\"\n                },\n                include: {\n                    domains: true\n                }\n            });\n            if (tenant) {\n                return {\n                    tenant,\n                    resolvedVia: \"subdomain\",\n                    domain: subdomain\n                };\n            }\n        }\n    }\n    return null;\n}\n/**\n * Resolves tenant from X-Tenant-ID header (for internal tools)\n */ async function resolveTenantFromHeader(tenantId) {\n    const tenant = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.tenant.findFirst({\n        where: {\n            id: tenantId,\n            status: \"ACTIVE\"\n        },\n        include: {\n            domains: true\n        }\n    });\n    if (tenant) {\n        return {\n            tenant,\n            resolvedVia: \"header\"\n        };\n    }\n    return null;\n}\n/**\n * Resolves tenant from query parameter (for testing/preview)\n */ async function resolveTenantFromQuery(slug) {\n    // First try TenantDomain\n    const domainEntry = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.tenantDomain.findFirst({\n        where: {\n            domain: slug.toLowerCase(),\n            type: \"SUBDOMAIN\"\n        },\n        include: {\n            tenant: {\n                include: {\n                    domains: true\n                }\n            }\n        }\n    });\n    if (domainEntry && domainEntry.tenant.status === \"ACTIVE\") {\n        return {\n            tenant: domainEntry.tenant,\n            resolvedVia: \"query\",\n            domain: slug\n        };\n    }\n    // Fallback to slug\n    const tenant = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.tenant.findFirst({\n        where: {\n            slug: slug.toLowerCase(),\n            status: \"ACTIVE\"\n        },\n        include: {\n            domains: true\n        }\n    });\n    if (tenant) {\n        return {\n            tenant,\n            resolvedVia: \"query\",\n            domain: slug\n        };\n    }\n    return null;\n}\n/**\n * Full tenant resolution with all fallbacks\n * Resolution order:\n * 1. Custom domain\n * 2. Subdomain\n * 3. X-Tenant-ID header\n * 4. ?tenant= query param\n */ async function resolveTenant(hostname, headers, query) {\n    // 1 & 2. Try hostname resolution (custom domain, then subdomain)\n    let context = await resolveTenantFromHost(hostname);\n    if (context) return context;\n    // 3. Try X-Tenant-ID header\n    if (headers.tenantId) {\n        context = await resolveTenantFromHeader(headers.tenantId);\n        if (context) return context;\n    }\n    // 4. Try query parameter\n    if (query.tenant) {\n        context = await resolveTenantFromQuery(query.tenant);\n        if (context) return context;\n    }\n    return null;\n}\n/**\n * Check if tenant is accessible (not suspended/deactivated)\n */ function isTenantAccessible(tenant) {\n    return tenant.status === \"ACTIVE\";\n}\n/**\n * Get tenant by ID (for internal use)\n */ async function getTenantById(id) {\n    return _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.tenant.findUnique({\n        where: {\n            id\n        },\n        include: {\n            domains: true\n        }\n    });\n}\n/**\n * Get tenant by slug\n */ async function getTenantBySlug(slug) {\n    return _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.tenant.findUnique({\n        where: {\n            slug\n        },\n        include: {\n            domains: true\n        }\n    });\n}\n/**\n * Alias for getTenantBySlug (for backwards compatibility)\n */ const resolveTenantBySlug = getTenantBySlug;\n// Export helper functions for core module\nasync function getTenantFromSlug(slug) {\n    return getTenantBySlug(slug);\n}\nasync function getTenantFromDomain(domain) {\n    const context = await resolveTenantFromHost(domain);\n    return context?.tenant || null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTtRQUNoQmlCLFVBQVUsTUFBTUwsdUJBQXVCSSxNQUFNaEIsTUFBTTtRQUNuRCxJQUFJaUIsU0FBUyxPQUFPQTtJQUN0QjtJQUVBLE9BQU87QUFDVDtBQUVBOztDQUVDLEdBQ00sU0FBU0MsbUJBQW1CbEIsTUFBYztJQUMvQyxPQUFPQSxPQUFPRixNQUFNLEtBQUs7QUFDM0I7QUFFQTs7Q0FFQyxHQUNNLGVBQWVxQixjQUFjUixFQUFVO0lBQzVDLE9BQU9qQywyQ0FBTUEsQ0FBQ3NCLE1BQU0sQ0FBQ29CLFVBQVUsQ0FBQztRQUM5QnpCLE9BQU87WUFBRWdCO1FBQUc7UUFDWlosU0FBUztZQUFFRSxTQUFTO1FBQUs7SUFDM0I7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZW9CLGdCQUFnQmIsSUFBWTtJQUNoRCxPQUFPOUIsMkNBQU1BLENBQUNzQixNQUFNLENBQUNvQixVQUFVLENBQUM7UUFDOUJ6QixPQUFPO1lBQUVhO1FBQUs7UUFDZFQsU0FBUztZQUFFRSxTQUFTO1FBQUs7SUFDM0I7QUFDRjtBQUVBOztDQUVDLEdBQ00sTUFBTXFCLHNCQUFzQkQsZ0JBQWU7QUFNbEQsMENBQTBDO0FBQ25DLGVBQWVFLGtCQUFrQmYsSUFBWTtJQUNsRCxPQUFPYSxnQkFBZ0JiO0FBQ3pCO0FBRU8sZUFBZWdCLG9CQUFvQjVCLE1BQWM7SUFDdEQsTUFBTXFCLFVBQVUsTUFBTTlCLHNCQUFzQlM7SUFDNUMsT0FBT3FCLFNBQVNqQixVQUFVO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW1hcmtldHdha2EvLi9zcmMvbGliL3RlbmFudC1yZXNvbHZlci50cz84MjY2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4vcHJpc21hJ1xuaW1wb3J0IHsgVGVuYW50LCBUZW5hbnREb21haW4sIERvbWFpblR5cGUsIERvbWFpblN0YXR1cywgVGVuYW50U3RhdHVzIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmV4cG9ydCB0eXBlIFRlbmFudFdpdGhEb21haW5zID0gVGVuYW50ICYge1xuICBkb21haW5zOiBUZW5hbnREb21haW5bXVxufVxuXG5leHBvcnQgdHlwZSBUZW5hbnRDb250ZXh0ID0ge1xuICB0ZW5hbnQ6IFRlbmFudFdpdGhEb21haW5zXG4gIHJlc29sdmVkVmlhOiAnY3VzdG9tX2RvbWFpbicgfCAnc3ViZG9tYWluJyB8ICdoZWFkZXInIHwgJ3F1ZXJ5J1xuICBkb21haW4/OiBzdHJpbmdcbn1cblxuLy8gUm91dGVzIHRoYXQgZG9uJ3QgcmVxdWlyZSB0ZW5hbnQgcmVzb2x1dGlvblxuZXhwb3J0IGNvbnN0IFBVQkxJQ19ST1VURVMgPSBbXG4gICcvbG9naW4nLFxuICAnL3JlZ2lzdGVyJywgXG4gICcvYXBpL2F1dGgnLFxuICAnL2FwaS9oZWFsdGgnLFxuICAnL19uZXh0JyxcbiAgJy9mYXZpY29uLmljbycsXG4gICcvbWFuaWZlc3QuanNvbicsXG4gICcvc3cuanMnLFxuICAnL2ljb25zJ1xuXVxuXG4vLyBTdXBlciBBZG1pbiByb3V0ZXMgKHJlcXVpcmUgU1VQRVJfQURNSU4sIG5vIHRlbmFudCBuZWVkZWQpXG5leHBvcnQgY29uc3QgU1VQRVJfQURNSU5fUk9VVEVTID0gW1xuICAnL2FkbWluJyxcbiAgJy9hcGkvYWRtaW4nXG5dXG5cbi8qKlxuICogQ2hlY2sgaWYgYSBwYXRoIGlzIHB1YmxpYyAobm8gdGVuYW50IHJlc29sdXRpb24gbmVlZGVkKVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQdWJsaWNSb3V0ZShwYXRobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiBQVUJMSUNfUk9VVEVTLnNvbWUocm91dGUgPT4gcGF0aG5hbWUuc3RhcnRzV2l0aChyb3V0ZSkpXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBwYXRoIGlzIGEgU3VwZXIgQWRtaW4gcm91dGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3VwZXJBZG1pblJvdXRlKHBhdGhuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIFNVUEVSX0FETUlOX1JPVVRFUy5zb21lKHJvdXRlID0+IHBhdGhuYW1lLnN0YXJ0c1dpdGgocm91dGUpKVxufVxuXG4vKipcbiAqIFJlc29sdmVzIHRlbmFudCBmcm9tIGhvc3RuYW1lIHVzaW5nIHByb3BlciByZXNvbHV0aW9uIG9yZGVyOlxuICogMS4gQ3VzdG9tIGRvbWFpbiAoZXhhY3QgbWF0Y2ggaW4gVGVuYW50RG9tYWluKVxuICogMi4gU3ViZG9tYWluIChleHRyYWN0ZWQgZnJvbSBob3N0bmFtZSlcbiAqIDMuIFJldHVybnMgbnVsbCBpZiBubyBtYXRjaFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZVRlbmFudEZyb21Ib3N0KGhvc3RuYW1lOiBzdHJpbmcpOiBQcm9taXNlPFRlbmFudENvbnRleHQgfCBudWxsPiB7XG4gIGNvbnN0IGhvc3QgPSBob3N0bmFtZS5zcGxpdCgnOicpWzBdLnRvTG93ZXJDYXNlKClcbiAgXG4gIC8vIDEuIENoZWNrIGZvciBjdXN0b20gZG9tYWluIG1hdGNoIChoaWdoZXN0IHByaW9yaXR5KVxuICBjb25zdCBjdXN0b21Eb21haW4gPSBhd2FpdCBwcmlzbWEudGVuYW50RG9tYWluLmZpbmRGaXJzdCh7XG4gICAgd2hlcmU6IHsgXG4gICAgICBkb21haW46IGhvc3QsXG4gICAgICB0eXBlOiAnQ1VTVE9NJyxcbiAgICAgIHN0YXR1czogJ1ZFUklGSUVEJ1xuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgdGVuYW50OiB7XG4gICAgICAgIGluY2x1ZGU6IHsgZG9tYWluczogdHJ1ZSB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuICBcbiAgaWYgKGN1c3RvbURvbWFpbiAmJiBjdXN0b21Eb21haW4udGVuYW50LnN0YXR1cyA9PT0gJ0FDVElWRScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVuYW50OiBjdXN0b21Eb21haW4udGVuYW50LFxuICAgICAgcmVzb2x2ZWRWaWE6ICdjdXN0b21fZG9tYWluJyxcbiAgICAgIGRvbWFpbjogaG9zdFxuICAgIH1cbiAgfVxuICBcbiAgLy8gMi4gRXh0cmFjdCBhbmQgY2hlY2sgc3ViZG9tYWluXG4gIGNvbnN0IHBhcnRzID0gaG9zdC5zcGxpdCgnLicpXG4gIGlmIChwYXJ0cy5sZW5ndGggPj0gMykge1xuICAgIGNvbnN0IHN1YmRvbWFpbiA9IHBhcnRzWzBdXG4gICAgXG4gICAgLy8gU2tpcCBjb21tb24gbm9uLXRlbmFudCBzdWJkb21haW5zXG4gICAgaWYgKCFbJ3d3dycsICdhcGknLCAnYXBwJywgJ2FkbWluJywgJ3ByZXZpZXcnLCAnbG9jYWxob3N0J10uaW5jbHVkZXMoc3ViZG9tYWluKSkge1xuICAgICAgLy8gQ2hlY2sgVGVuYW50RG9tYWluIGZvciBzdWJkb21haW5cbiAgICAgIGNvbnN0IHN1YmRvbWFpbkVudHJ5ID0gYXdhaXQgcHJpc21hLnRlbmFudERvbWFpbi5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGRvbWFpbjogc3ViZG9tYWluLFxuICAgICAgICAgIHR5cGU6ICdTVUJET01BSU4nLFxuICAgICAgICAgIHN0YXR1czogJ1ZFUklGSUVEJ1xuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdGVuYW50OiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7IGRvbWFpbnM6IHRydWUgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgaWYgKHN1YmRvbWFpbkVudHJ5ICYmIHN1YmRvbWFpbkVudHJ5LnRlbmFudC5zdGF0dXMgPT09ICdBQ1RJVkUnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGVuYW50OiBzdWJkb21haW5FbnRyeS50ZW5hbnQsXG4gICAgICAgICAgcmVzb2x2ZWRWaWE6ICdzdWJkb21haW4nLFxuICAgICAgICAgIGRvbWFpbjogc3ViZG9tYWluXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRmFsbGJhY2s6IENoZWNrIFRlbmFudC5zbHVnIGRpcmVjdGx5XG4gICAgICBjb25zdCB0ZW5hbnQgPSBhd2FpdCBwcmlzbWEudGVuYW50LmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7IFxuICAgICAgICAgIHNsdWc6IHN1YmRvbWFpbixcbiAgICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHsgZG9tYWluczogdHJ1ZSB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAodGVuYW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGVuYW50LFxuICAgICAgICAgIHJlc29sdmVkVmlhOiAnc3ViZG9tYWluJyxcbiAgICAgICAgICBkb21haW46IHN1YmRvbWFpblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIFJlc29sdmVzIHRlbmFudCBmcm9tIFgtVGVuYW50LUlEIGhlYWRlciAoZm9yIGludGVybmFsIHRvb2xzKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZVRlbmFudEZyb21IZWFkZXIodGVuYW50SWQ6IHN0cmluZyk6IFByb21pc2U8VGVuYW50Q29udGV4dCB8IG51bGw+IHtcbiAgY29uc3QgdGVuYW50ID0gYXdhaXQgcHJpc21hLnRlbmFudC5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7IFxuICAgICAgaWQ6IHRlbmFudElkLFxuICAgICAgc3RhdHVzOiAnQUNUSVZFJ1xuICAgIH0sXG4gICAgaW5jbHVkZTogeyBkb21haW5zOiB0cnVlIH1cbiAgfSlcbiAgXG4gIGlmICh0ZW5hbnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVuYW50LFxuICAgICAgcmVzb2x2ZWRWaWE6ICdoZWFkZXInXG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIFJlc29sdmVzIHRlbmFudCBmcm9tIHF1ZXJ5IHBhcmFtZXRlciAoZm9yIHRlc3RpbmcvcHJldmlldylcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc29sdmVUZW5hbnRGcm9tUXVlcnkoc2x1Zzogc3RyaW5nKTogUHJvbWlzZTxUZW5hbnRDb250ZXh0IHwgbnVsbD4ge1xuICAvLyBGaXJzdCB0cnkgVGVuYW50RG9tYWluXG4gIGNvbnN0IGRvbWFpbkVudHJ5ID0gYXdhaXQgcHJpc21hLnRlbmFudERvbWFpbi5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7XG4gICAgICBkb21haW46IHNsdWcudG9Mb3dlckNhc2UoKSxcbiAgICAgIHR5cGU6ICdTVUJET01BSU4nXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB0ZW5hbnQ6IHtcbiAgICAgICAgaW5jbHVkZTogeyBkb21haW5zOiB0cnVlIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIFxuICBpZiAoZG9tYWluRW50cnkgJiYgZG9tYWluRW50cnkudGVuYW50LnN0YXR1cyA9PT0gJ0FDVElWRScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVuYW50OiBkb21haW5FbnRyeS50ZW5hbnQsXG4gICAgICByZXNvbHZlZFZpYTogJ3F1ZXJ5JyxcbiAgICAgIGRvbWFpbjogc2x1Z1xuICAgIH1cbiAgfVxuICBcbiAgLy8gRmFsbGJhY2sgdG8gc2x1Z1xuICBjb25zdCB0ZW5hbnQgPSBhd2FpdCBwcmlzbWEudGVuYW50LmZpbmRGaXJzdCh7XG4gICAgd2hlcmU6IHsgXG4gICAgICBzbHVnOiBzbHVnLnRvTG93ZXJDYXNlKCksXG4gICAgICBzdGF0dXM6ICdBQ1RJVkUnXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7IGRvbWFpbnM6IHRydWUgfVxuICB9KVxuICBcbiAgaWYgKHRlbmFudCkge1xuICAgIHJldHVybiB7XG4gICAgICB0ZW5hbnQsXG4gICAgICByZXNvbHZlZFZpYTogJ3F1ZXJ5JyxcbiAgICAgIGRvbWFpbjogc2x1Z1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIG51bGxcbn1cblxuLyoqXG4gKiBGdWxsIHRlbmFudCByZXNvbHV0aW9uIHdpdGggYWxsIGZhbGxiYWNrc1xuICogUmVzb2x1dGlvbiBvcmRlcjpcbiAqIDEuIEN1c3RvbSBkb21haW5cbiAqIDIuIFN1YmRvbWFpblxuICogMy4gWC1UZW5hbnQtSUQgaGVhZGVyXG4gKiA0LiA/dGVuYW50PSBxdWVyeSBwYXJhbVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZVRlbmFudChcbiAgaG9zdG5hbWU6IHN0cmluZyxcbiAgaGVhZGVyczogeyB0ZW5hbnRJZD86IHN0cmluZyB9LFxuICBxdWVyeTogeyB0ZW5hbnQ/OiBzdHJpbmcgfVxuKTogUHJvbWlzZTxUZW5hbnRDb250ZXh0IHwgbnVsbD4ge1xuICAvLyAxICYgMi4gVHJ5IGhvc3RuYW1lIHJlc29sdXRpb24gKGN1c3RvbSBkb21haW4sIHRoZW4gc3ViZG9tYWluKVxuICBsZXQgY29udGV4dCA9IGF3YWl0IHJlc29sdmVUZW5hbnRGcm9tSG9zdChob3N0bmFtZSlcbiAgaWYgKGNvbnRleHQpIHJldHVybiBjb250ZXh0XG4gIFxuICAvLyAzLiBUcnkgWC1UZW5hbnQtSUQgaGVhZGVyXG4gIGlmIChoZWFkZXJzLnRlbmFudElkKSB7XG4gICAgY29udGV4dCA9IGF3YWl0IHJlc29sdmVUZW5hbnRGcm9tSGVhZGVyKGhlYWRlcnMudGVuYW50SWQpXG4gICAgaWYgKGNvbnRleHQpIHJldHVybiBjb250ZXh0XG4gIH1cbiAgXG4gIC8vIDQuIFRyeSBxdWVyeSBwYXJhbWV0ZXJcbiAgaWYgKHF1ZXJ5LnRlbmFudCkge1xuICAgIGNvbnRleHQgPSBhd2FpdCByZXNvbHZlVGVuYW50RnJvbVF1ZXJ5KHF1ZXJ5LnRlbmFudClcbiAgICBpZiAoY29udGV4dCkgcmV0dXJuIGNvbnRleHRcbiAgfVxuICBcbiAgcmV0dXJuIG51bGxcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0ZW5hbnQgaXMgYWNjZXNzaWJsZSAobm90IHN1c3BlbmRlZC9kZWFjdGl2YXRlZClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVGVuYW50QWNjZXNzaWJsZSh0ZW5hbnQ6IFRlbmFudCk6IGJvb2xlYW4ge1xuICByZXR1cm4gdGVuYW50LnN0YXR1cyA9PT0gJ0FDVElWRSdcbn1cblxuLyoqXG4gKiBHZXQgdGVuYW50IGJ5IElEIChmb3IgaW50ZXJuYWwgdXNlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGVuYW50QnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxUZW5hbnRXaXRoRG9tYWlucyB8IG51bGw+IHtcbiAgcmV0dXJuIHByaXNtYS50ZW5hbnQuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQgfSxcbiAgICBpbmNsdWRlOiB7IGRvbWFpbnM6IHRydWUgfVxuICB9KVxufVxuXG4vKipcbiAqIEdldCB0ZW5hbnQgYnkgc2x1Z1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGVuYW50QnlTbHVnKHNsdWc6IHN0cmluZyk6IFByb21pc2U8VGVuYW50V2l0aERvbWFpbnMgfCBudWxsPiB7XG4gIHJldHVybiBwcmlzbWEudGVuYW50LmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IHNsdWcgfSxcbiAgICBpbmNsdWRlOiB7IGRvbWFpbnM6IHRydWUgfVxuICB9KVxufVxuXG4vKipcbiAqIEFsaWFzIGZvciBnZXRUZW5hbnRCeVNsdWcgKGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSlcbiAqL1xuZXhwb3J0IGNvbnN0IHJlc29sdmVUZW5hbnRCeVNsdWcgPSBnZXRUZW5hbnRCeVNsdWdcblxuLy8gUmUtZXhwb3J0IHR5cGVzXG5leHBvcnQgdHlwZSBSZXNvbHZlZFRlbmFudCA9IFRlbmFudFdpdGhEb21haW5zXG5leHBvcnQgdHlwZSB7IFRlbmFudENvbnRleHQgYXMgVGVuYW50UmVzb2x2ZXJDb250ZXh0IH1cblxuLy8gRXhwb3J0IGhlbHBlciBmdW5jdGlvbnMgZm9yIGNvcmUgbW9kdWxlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGVuYW50RnJvbVNsdWcoc2x1Zzogc3RyaW5nKTogUHJvbWlzZTxUZW5hbnRXaXRoRG9tYWlucyB8IG51bGw+IHtcbiAgcmV0dXJuIGdldFRlbmFudEJ5U2x1ZyhzbHVnKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGVuYW50RnJvbURvbWFpbihkb21haW46IHN0cmluZyk6IFByb21pc2U8VGVuYW50V2l0aERvbWFpbnMgfCBudWxsPiB7XG4gIGNvbnN0IGNvbnRleHQgPSBhd2FpdCByZXNvbHZlVGVuYW50RnJvbUhvc3QoZG9tYWluKVxuICByZXR1cm4gY29udGV4dD8udGVuYW50IHx8IG51bGxcbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJQVUJMSUNfUk9VVEVTIiwiU1VQRVJfQURNSU5fUk9VVEVTIiwiaXNQdWJsaWNSb3V0ZSIsInBhdGhuYW1lIiwic29tZSIsInJvdXRlIiwic3RhcnRzV2l0aCIsImlzU3VwZXJBZG1pblJvdXRlIiwicmVzb2x2ZVRlbmFudEZyb21Ib3N0IiwiaG9zdG5hbWUiLCJob3N0Iiwic3BsaXQiLCJ0b0xvd2VyQ2FzZSIsImN1c3RvbURvbWFpbiIsInRlbmFudERvbWFpbiIsImZpbmRGaXJzdCIsIndoZXJlIiwiZG9tYWluIiwidHlwZSIsInN0YXR1cyIsImluY2x1ZGUiLCJ0ZW5hbnQiLCJkb21haW5zIiwicmVzb2x2ZWRWaWEiLCJwYXJ0cyIsImxlbmd0aCIsInN1YmRvbWFpbiIsImluY2x1ZGVzIiwic3ViZG9tYWluRW50cnkiLCJzbHVnIiwicmVzb2x2ZVRlbmFudEZyb21IZWFkZXIiLCJ0ZW5hbnRJZCIsImlkIiwicmVzb2x2ZVRlbmFudEZyb21RdWVyeSIsImRvbWFpbkVudHJ5IiwicmVzb2x2ZVRlbmFudCIsImhlYWRlcnMiLCJxdWVyeSIsImNvbnRleHQiLCJpc1RlbmFudEFjY2Vzc2libGUiLCJnZXRUZW5hbnRCeUlkIiwiZmluZFVuaXF1ZSIsImdldFRlbmFudEJ5U2x1ZyIsInJlc29sdmVUZW5hbnRCeVNsdWciLCJnZXRUZW5hbnRGcm9tU2x1ZyIsImdldFRlbmFudEZyb21Eb21haW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/tenant-resolver.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fmanifest.json%2Froute&page=%2Fmanifest.json%2Froute&appPaths=&pagePath=private-next-app-dir%2Fmanifest.json%2Froute.ts&appDir=%2Fapp%2Fsaas-core%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Fsaas-core&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();