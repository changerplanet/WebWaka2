"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TENANT_ID_HEADER: () => (/* binding */ TENANT_ID_HEADER),\n/* harmony export */   TENANT_RESOLVED_VIA_HEADER: () => (/* binding */ TENANT_RESOLVED_VIA_HEADER),\n/* harmony export */   TENANT_SLUG_HEADER: () => (/* binding */ TENANT_SLUG_HEADER),\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n// Header names for tenant context\nconst TENANT_ID_HEADER = \"x-tenant-id\";\nconst TENANT_SLUG_HEADER = \"x-tenant-slug\";\nconst TENANT_RESOLVED_VIA_HEADER = \"x-tenant-resolved-via\";\n// Routes that don't require tenant resolution\nconst PUBLIC_PATHS = [\n    \"/login\",\n    \"/register\",\n    \"/api/auth\",\n    \"/api/health\",\n    \"/_next\",\n    \"/favicon.ico\",\n    \"/manifest.json\",\n    \"/sw.js\",\n    \"/icons\",\n    \"/robots.txt\",\n    \"/sitemap.xml\"\n];\n// Super Admin routes (no tenant needed, require SUPER_ADMIN role)\nconst SUPER_ADMIN_PATHS = [\n    \"/admin\",\n    \"/api/admin\"\n];\n// Static file extensions to skip\nconst STATIC_EXTENSIONS = [\n    \".js\",\n    \".css\",\n    \".png\",\n    \".jpg\",\n    \".jpeg\",\n    \".gif\",\n    \".svg\",\n    \".ico\",\n    \".woff\",\n    \".woff2\"\n];\nfunction isStaticFile(pathname) {\n    return STATIC_EXTENSIONS.some((ext)=>pathname.endsWith(ext));\n}\nfunction isPublicPath(pathname) {\n    return PUBLIC_PATHS.some((path)=>pathname.startsWith(path));\n}\nfunction isSuperAdminPath(pathname) {\n    return SUPER_ADMIN_PATHS.some((path)=>pathname.startsWith(path));\n}\nasync function middleware(request) {\n    const { pathname } = request.nextUrl;\n    const hostname = request.headers.get(\"host\") || \"\";\n    // Skip static files\n    if (isStaticFile(pathname)) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Skip public paths (login, register, auth APIs, health check)\n    if (isPublicPath(pathname)) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Super Admin paths - don't require tenant, but auth is checked in route handlers\n    if (isSuperAdminPath(pathname)) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Create response to modify headers\n    const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    // === TENANT RESOLUTION ORDER ===\n    // 1. Check for X-Tenant-ID header (internal tools)\n    const headerTenantId = request.headers.get(\"x-tenant-id\");\n    if (headerTenantId) {\n        response.headers.set(TENANT_ID_HEADER, headerTenantId);\n        response.headers.set(TENANT_RESOLVED_VIA_HEADER, \"header\");\n        return response;\n    }\n    // 2. Check for ?tenant= query parameter (testing/preview)\n    const tenantQuery = request.nextUrl.searchParams.get(\"tenant\");\n    if (tenantQuery) {\n        response.headers.set(TENANT_SLUG_HEADER, tenantQuery);\n        response.headers.set(TENANT_RESOLVED_VIA_HEADER, \"query\");\n        return response;\n    }\n    // 3. Check for tenant cookie (session persistence)\n    const tenantCookie = request.cookies.get(\"tenant_slug\")?.value;\n    if (tenantCookie) {\n        response.headers.set(TENANT_SLUG_HEADER, tenantCookie);\n        response.headers.set(TENANT_RESOLVED_VIA_HEADER, \"cookie\");\n        return response;\n    }\n    // 4. Extract from hostname\n    const host = hostname.split(\":\")[0].toLowerCase();\n    const parts = host.split(\".\");\n    // Check if this could be a custom domain (doesn't match our platform domain pattern)\n    const platformDomains = [\n        \"localhost\",\n        \"emergentagent.com\",\n        \"emarketwaka.com\",\n        \"vercel.app\"\n    ];\n    const isPlatformDomain = platformDomains.some((d)=>host.endsWith(d));\n    if (!isPlatformDomain) {\n        // This is a custom domain - pass the full hostname for resolution\n        response.headers.set(TENANT_SLUG_HEADER, host);\n        response.headers.set(TENANT_RESOLVED_VIA_HEADER, \"custom_domain\");\n        return response;\n    }\n    // 5. Extract subdomain from platform domain\n    if (parts.length >= 3) {\n        const subdomain = parts[0];\n        // Skip common non-tenant subdomains\n        if (![\n            \"www\",\n            \"api\",\n            \"app\",\n            \"admin\",\n            \"preview\"\n        ].includes(subdomain)) {\n            response.headers.set(TENANT_SLUG_HEADER, subdomain);\n            response.headers.set(TENANT_RESOLVED_VIA_HEADER, \"subdomain\");\n            return response;\n        }\n    }\n    // No tenant resolved - this is fine for homepage, super admin, etc.\n    // Individual API routes will handle tenant requirement\n    return response;\n}\nconst config = {\n    matcher: [\n        // Match all paths except static files\n        \"/((?!_next/static|_next/image|favicon.ico).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG1CQUFtQkQsZ0JBQWdCMUIsSUFBSSxDQUFDNEIsQ0FBQUEsSUFBS04sS0FBS3BCLFFBQVEsQ0FBQzBCO0lBRWpFLElBQUksQ0FBQ0Qsa0JBQWtCO1FBQ3JCLGtFQUFrRTtRQUNsRWIsU0FBU0gsT0FBTyxDQUFDSyxHQUFHLENBQUN2QixvQkFBb0I2QjtRQUN6Q1IsU0FBU0gsT0FBTyxDQUFDSyxHQUFHLENBQUN0Qiw0QkFBNEI7UUFDakQsT0FBT29CO0lBQ1Q7SUFFQSw0Q0FBNEM7SUFDNUMsSUFBSVcsTUFBTUksTUFBTSxJQUFJLEdBQUc7UUFDckIsTUFBTUMsWUFBWUwsS0FBSyxDQUFDLEVBQUU7UUFFMUIsb0NBQW9DO1FBQ3BDLElBQUksQ0FBQztZQUFDO1lBQU87WUFBTztZQUFPO1lBQVM7U0FBVSxDQUFDTSxRQUFRLENBQUNELFlBQVk7WUFDbEVoQixTQUFTSCxPQUFPLENBQUNLLEdBQUcsQ0FBQ3ZCLG9CQUFvQnFDO1lBQ3pDaEIsU0FBU0gsT0FBTyxDQUFDSyxHQUFHLENBQUN0Qiw0QkFBNEI7WUFDakQsT0FBT29CO1FBQ1Q7SUFDRjtJQUVBLG9FQUFvRTtJQUNwRSx1REFBdUQ7SUFDdkQsT0FBT0E7QUFDVDtBQUVPLE1BQU1rQixTQUFTO0lBQ3BCQyxTQUFTO1FBQ1Asc0NBQXNDO1FBQ3RDO0tBQ0Q7QUFDSCxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9taWRkbGV3YXJlLnRzP2QxOTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgdHlwZSB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5cbi8vIEhlYWRlciBuYW1lcyBmb3IgdGVuYW50IGNvbnRleHRcbmV4cG9ydCBjb25zdCBURU5BTlRfSURfSEVBREVSID0gJ3gtdGVuYW50LWlkJ1xuZXhwb3J0IGNvbnN0IFRFTkFOVF9TTFVHX0hFQURFUiA9ICd4LXRlbmFudC1zbHVnJ1xuZXhwb3J0IGNvbnN0IFRFTkFOVF9SRVNPTFZFRF9WSUFfSEVBREVSID0gJ3gtdGVuYW50LXJlc29sdmVkLXZpYSdcblxuLy8gUm91dGVzIHRoYXQgZG9uJ3QgcmVxdWlyZSB0ZW5hbnQgcmVzb2x1dGlvblxuY29uc3QgUFVCTElDX1BBVEhTID0gW1xuICAnL2xvZ2luJyxcbiAgJy9yZWdpc3RlcicsXG4gICcvYXBpL2F1dGgnLFxuICAnL2FwaS9oZWFsdGgnLFxuICAnL19uZXh0JyxcbiAgJy9mYXZpY29uLmljbycsXG4gICcvbWFuaWZlc3QuanNvbicsXG4gICcvc3cuanMnLFxuICAnL2ljb25zJyxcbiAgJy9yb2JvdHMudHh0JyxcbiAgJy9zaXRlbWFwLnhtbCdcbl1cblxuLy8gU3VwZXIgQWRtaW4gcm91dGVzIChubyB0ZW5hbnQgbmVlZGVkLCByZXF1aXJlIFNVUEVSX0FETUlOIHJvbGUpXG5jb25zdCBTVVBFUl9BRE1JTl9QQVRIUyA9IFtcbiAgJy9hZG1pbicsXG4gICcvYXBpL2FkbWluJ1xuXVxuXG4vLyBTdGF0aWMgZmlsZSBleHRlbnNpb25zIHRvIHNraXBcbmNvbnN0IFNUQVRJQ19FWFRFTlNJT05TID0gWycuanMnLCAnLmNzcycsICcucG5nJywgJy5qcGcnLCAnLmpwZWcnLCAnLmdpZicsICcuc3ZnJywgJy5pY28nLCAnLndvZmYnLCAnLndvZmYyJ11cblxuZnVuY3Rpb24gaXNTdGF0aWNGaWxlKHBhdGhuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIFNUQVRJQ19FWFRFTlNJT05TLnNvbWUoZXh0ID0+IHBhdGhuYW1lLmVuZHNXaXRoKGV4dCkpXG59XG5cbmZ1bmN0aW9uIGlzUHVibGljUGF0aChwYXRobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiBQVUJMSUNfUEFUSFMuc29tZShwYXRoID0+IHBhdGhuYW1lLnN0YXJ0c1dpdGgocGF0aCkpXG59XG5cbmZ1bmN0aW9uIGlzU3VwZXJBZG1pblBhdGgocGF0aG5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gU1VQRVJfQURNSU5fUEFUSFMuc29tZShwYXRoID0+IHBhdGhuYW1lLnN0YXJ0c1dpdGgocGF0aCkpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHsgcGF0aG5hbWUgfSA9IHJlcXVlc3QubmV4dFVybFxuICBjb25zdCBob3N0bmFtZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2hvc3QnKSB8fCAnJ1xuICBcbiAgLy8gU2tpcCBzdGF0aWMgZmlsZXNcbiAgaWYgKGlzU3RhdGljRmlsZShwYXRobmFtZSkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKVxuICB9XG4gIFxuICAvLyBTa2lwIHB1YmxpYyBwYXRocyAobG9naW4sIHJlZ2lzdGVyLCBhdXRoIEFQSXMsIGhlYWx0aCBjaGVjaylcbiAgaWYgKGlzUHVibGljUGF0aChwYXRobmFtZSkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKVxuICB9XG4gIFxuICAvLyBTdXBlciBBZG1pbiBwYXRocyAtIGRvbid0IHJlcXVpcmUgdGVuYW50LCBidXQgYXV0aCBpcyBjaGVja2VkIGluIHJvdXRlIGhhbmRsZXJzXG4gIGlmIChpc1N1cGVyQWRtaW5QYXRoKHBhdGhuYW1lKSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpXG4gIH1cbiAgXG4gIC8vIENyZWF0ZSByZXNwb25zZSB0byBtb2RpZnkgaGVhZGVyc1xuICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KClcbiAgXG4gIC8vID09PSBURU5BTlQgUkVTT0xVVElPTiBPUkRFUiA9PT1cbiAgXG4gIC8vIDEuIENoZWNrIGZvciBYLVRlbmFudC1JRCBoZWFkZXIgKGludGVybmFsIHRvb2xzKVxuICBjb25zdCBoZWFkZXJUZW5hbnRJZCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtdGVuYW50LWlkJylcbiAgaWYgKGhlYWRlclRlbmFudElkKSB7XG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoVEVOQU5UX0lEX0hFQURFUiwgaGVhZGVyVGVuYW50SWQpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoVEVOQU5UX1JFU09MVkVEX1ZJQV9IRUFERVIsICdoZWFkZXInKVxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG4gIFxuICAvLyAyLiBDaGVjayBmb3IgP3RlbmFudD0gcXVlcnkgcGFyYW1ldGVyICh0ZXN0aW5nL3ByZXZpZXcpXG4gIGNvbnN0IHRlbmFudFF1ZXJ5ID0gcmVxdWVzdC5uZXh0VXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3RlbmFudCcpXG4gIGlmICh0ZW5hbnRRdWVyeSkge1xuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KFRFTkFOVF9TTFVHX0hFQURFUiwgdGVuYW50UXVlcnkpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoVEVOQU5UX1JFU09MVkVEX1ZJQV9IRUFERVIsICdxdWVyeScpXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH1cbiAgXG4gIC8vIDMuIENoZWNrIGZvciB0ZW5hbnQgY29va2llIChzZXNzaW9uIHBlcnNpc3RlbmNlKVxuICBjb25zdCB0ZW5hbnRDb29raWUgPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCd0ZW5hbnRfc2x1ZycpPy52YWx1ZVxuICBpZiAodGVuYW50Q29va2llKSB7XG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoVEVOQU5UX1NMVUdfSEVBREVSLCB0ZW5hbnRDb29raWUpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoVEVOQU5UX1JFU09MVkVEX1ZJQV9IRUFERVIsICdjb29raWUnKVxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG4gIFxuICAvLyA0LiBFeHRyYWN0IGZyb20gaG9zdG5hbWVcbiAgY29uc3QgaG9zdCA9IGhvc3RuYW1lLnNwbGl0KCc6JylbMF0udG9Mb3dlckNhc2UoKVxuICBjb25zdCBwYXJ0cyA9IGhvc3Quc3BsaXQoJy4nKVxuICBcbiAgLy8gQ2hlY2sgaWYgdGhpcyBjb3VsZCBiZSBhIGN1c3RvbSBkb21haW4gKGRvZXNuJ3QgbWF0Y2ggb3VyIHBsYXRmb3JtIGRvbWFpbiBwYXR0ZXJuKVxuICBjb25zdCBwbGF0Zm9ybURvbWFpbnMgPSBbJ2xvY2FsaG9zdCcsICdlbWVyZ2VudGFnZW50LmNvbScsICdlbWFya2V0d2FrYS5jb20nLCAndmVyY2VsLmFwcCddXG4gIGNvbnN0IGlzUGxhdGZvcm1Eb21haW4gPSBwbGF0Zm9ybURvbWFpbnMuc29tZShkID0+IGhvc3QuZW5kc1dpdGgoZCkpXG4gIFxuICBpZiAoIWlzUGxhdGZvcm1Eb21haW4pIHtcbiAgICAvLyBUaGlzIGlzIGEgY3VzdG9tIGRvbWFpbiAtIHBhc3MgdGhlIGZ1bGwgaG9zdG5hbWUgZm9yIHJlc29sdXRpb25cbiAgICByZXNwb25zZS5oZWFkZXJzLnNldChURU5BTlRfU0xVR19IRUFERVIsIGhvc3QpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoVEVOQU5UX1JFU09MVkVEX1ZJQV9IRUFERVIsICdjdXN0b21fZG9tYWluJylcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuICBcbiAgLy8gNS4gRXh0cmFjdCBzdWJkb21haW4gZnJvbSBwbGF0Zm9ybSBkb21haW5cbiAgaWYgKHBhcnRzLmxlbmd0aCA+PSAzKSB7XG4gICAgY29uc3Qgc3ViZG9tYWluID0gcGFydHNbMF1cbiAgICBcbiAgICAvLyBTa2lwIGNvbW1vbiBub24tdGVuYW50IHN1YmRvbWFpbnNcbiAgICBpZiAoIVsnd3d3JywgJ2FwaScsICdhcHAnLCAnYWRtaW4nLCAncHJldmlldyddLmluY2x1ZGVzKHN1YmRvbWFpbikpIHtcbiAgICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KFRFTkFOVF9TTFVHX0hFQURFUiwgc3ViZG9tYWluKVxuICAgICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoVEVOQU5UX1JFU09MVkVEX1ZJQV9IRUFERVIsICdzdWJkb21haW4nKVxuICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgfVxuICB9XG4gIFxuICAvLyBObyB0ZW5hbnQgcmVzb2x2ZWQgLSB0aGlzIGlzIGZpbmUgZm9yIGhvbWVwYWdlLCBzdXBlciBhZG1pbiwgZXRjLlxuICAvLyBJbmRpdmlkdWFsIEFQSSByb3V0ZXMgd2lsbCBoYW5kbGUgdGVuYW50IHJlcXVpcmVtZW50XG4gIHJldHVybiByZXNwb25zZVxufVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXG4gICAgLy8gTWF0Y2ggYWxsIHBhdGhzIGV4Y2VwdCBzdGF0aWMgZmlsZXNcbiAgICAnLygoPyFfbmV4dC9zdGF0aWN8X25leHQvaW1hZ2V8ZmF2aWNvbi5pY28pLiopJyxcbiAgXSxcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJURU5BTlRfSURfSEVBREVSIiwiVEVOQU5UX1NMVUdfSEVBREVSIiwiVEVOQU5UX1JFU09MVkVEX1ZJQV9IRUFERVIiLCJQVUJMSUNfUEFUSFMiLCJTVVBFUl9BRE1JTl9QQVRIUyIsIlNUQVRJQ19FWFRFTlNJT05TIiwiaXNTdGF0aWNGaWxlIiwicGF0aG5hbWUiLCJzb21lIiwiZXh0IiwiZW5kc1dpdGgiLCJpc1B1YmxpY1BhdGgiLCJwYXRoIiwic3RhcnRzV2l0aCIsImlzU3VwZXJBZG1pblBhdGgiLCJtaWRkbGV3YXJlIiwicmVxdWVzdCIsIm5leHRVcmwiLCJob3N0bmFtZSIsImhlYWRlcnMiLCJnZXQiLCJuZXh0IiwicmVzcG9uc2UiLCJoZWFkZXJUZW5hbnRJZCIsInNldCIsInRlbmFudFF1ZXJ5Iiwic2VhcmNoUGFyYW1zIiwidGVuYW50Q29va2llIiwiY29va2llcyIsInZhbHVlIiwiaG9zdCIsInNwbGl0IiwidG9Mb3dlckNhc2UiLCJwYXJ0cyIsInBsYXRmb3JtRG9tYWlucyIsImlzUGxhdGZvcm1Eb21haW4iLCJkIiwibGVuZ3RoIiwic3ViZG9tYWluIiwiaW5jbHVkZXMiLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});