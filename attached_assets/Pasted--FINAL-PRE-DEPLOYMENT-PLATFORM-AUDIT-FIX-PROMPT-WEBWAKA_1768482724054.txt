
üîç FINAL PRE-DEPLOYMENT PLATFORM AUDIT & FIX PROMPT (WEBWAKA)

CONTEXT

You are working on WebWaka, a large, multi-tenant, Nigeria-first SaaS platform that has gone through extensive phased development (commerce, POS, SVM, MVM, ParkHub, payments, offline-first UX, PWA, marketing site, admin, partner, vendor, and public flows).

This task is the FINAL PRE-BUILD & PRE-DEPLOYMENT AUDIT before production deployment (Vercel).

This is NOT a feature request.
This is a defensive, correctness-first, production hardening exercise.

‚∏ª

üéØ OBJECTIVE

Conduct a VERY THOROUGH END-TO-END REVIEW of the entire WebWaka codebase and:
	1.	Identify every error, bug, inconsistency, risk, and misconfiguration
	2.	Fix all issues that are safe to fix pre-deployment
	3.	Explicitly document anything that should NOT be fixed now
	4.	Ensure the platform is:
	‚Ä¢	Build-safe
	‚Ä¢	Runtime-safe
	‚Ä¢	Multi-tenant safe
	‚Ä¢	Demo-safe
	‚Ä¢	Nigeria-context safe
	‚Ä¢	Production-ready

‚∏ª

üß≠ SCOPE ‚Äî WHAT YOU MUST REVIEW

1Ô∏è‚É£ BUILD & DEPLOY READINESS
	‚Ä¢	npm run build / next build
	‚Ä¢	TypeScript errors & implicit any
	‚Ä¢	ESLint issues
	‚Ä¢	Unused imports, dead code
	‚Ä¢	Environment variable safety (missing, unsafe defaults)
	‚Ä¢	Next.js App Router correctness
	‚Ä¢	Server vs client component misuse
	‚Ä¢	Dynamic imports & edge compatibility
	‚Ä¢	Vercel compatibility (no unsupported Node APIs)

‚∏ª

2Ô∏è‚É£ RUNTIME STABILITY
	‚Ä¢	Null/undefined access risks
	‚Ä¢	Error boundaries
	‚Ä¢	Infinite loaders or stuck states
	‚Ä¢	Broken routes or redirects
	‚Ä¢	404/500 edge cases
	‚Ä¢	API routes returning inconsistent shapes
	‚Ä¢	JSON vs HTML errors
	‚Ä¢	Public endpoints leaking stack traces

‚∏ª

3Ô∏è‚É£ SECURITY & ISOLATION
	‚Ä¢	Tenant isolation (NO cross-tenant reads/writes)
	‚Ä¢	Partner vs vendor vs admin boundaries
	‚Ä¢	Session handling correctness
	‚Ä¢	Authorization guards on every API
	‚Ä¢	Public endpoints safety
	‚Ä¢	Demo vs live data separation
	‚Ä¢	Webhook / payment safety (demo-safe where required)

‚∏ª

4Ô∏è‚É£ DATA INTEGRITY
	‚Ä¢	Orphan records
	‚Ä¢	Inconsistent foreign keys
	‚Ä¢	Enum mismatches
	‚Ä¢	Soft-delete handling
	‚Ä¢	Idempotency issues
	‚Ä¢	Duplicate records
	‚Ä¢	Race conditions (especially POS, inventory, payouts)

‚∏ª

5Ô∏è‚É£ OFFLINE & SYNC SAFETY
	‚Ä¢	Offline queue correctness
	‚Ä¢	Conflict resolution correctness
	‚Ä¢	Sync status accuracy
	‚Ä¢	Trust indicators correctness
	‚Ä¢	No silent data loss
	‚Ä¢	No auto-sync violations (must remain user-triggered)

‚∏ª

6Ô∏è‚É£ UX / UI CORRECTNESS
	‚Ä¢	Broken buttons or dead links
	‚Ä¢	Incorrect labels or states
	‚Ä¢	Misleading copy
	‚Ä¢	Mobile-first regressions
	‚Ä¢	Tap targets < 44px
	‚Ä¢	Nigerian currency formatting
	‚Ä¢	Trust messaging clarity
	‚Ä¢	Error messaging clarity

‚∏ª

7Ô∏è‚É£ PAYMENTS & FINANCIAL FLOWS
	‚Ä¢	Paystack integration safety
	‚Ä¢	Demo vs live behavior correctness
	‚Ä¢	Bank transfer & COD verification logic
	‚Ä¢	Receipt generation accuracy
	‚Ä¢	Rounding correctness
	‚Ä¢	Payout calculations
	‚Ä¢	No unintended money movement

‚∏ª

8Ô∏è‚É£ MARKETPLACE & COMMERCE LOGIC
	‚Ä¢	Product Channel Config correctness
	‚Ä¢	Inventory sync logic
	‚Ä¢	Oversell thresholds
	‚Ä¢	Vendor isolation
	‚Ä¢	Order splitting accuracy
	‚Ä¢	ParkHub seat & trip integrity
	‚Ä¢	Manifest accuracy

‚∏ª

üîß FIXING RULES (VERY IMPORTANT)

You are AUTHORIZED TO FIX:
	‚Ä¢	Bugs
	‚Ä¢	Errors
	‚Ä¢	Broken logic
	‚Ä¢	Misconfigurations
	‚Ä¢	Security issues
	‚Ä¢	Performance footguns
	‚Ä¢	UX defects
	‚Ä¢	Incomplete edge handling

You are NOT AUTHORIZED TO:
	‚Ä¢	Add new features
	‚Ä¢	Expand scope
	‚Ä¢	Introduce automation/background jobs
	‚Ä¢	Change business rules without documenting
	‚Ä¢	Introduce breaking schema changes without justification

If a fix requires scope change:
üëâ DO NOT IMPLEMENT IT
üëâ DOCUMENT IT CLEARLY

‚∏ª

üß© EXECUTION METHOD (MANDATORY)

STEP 1 ‚Äî FULL AUDIT (READ-ONLY FIRST)
	‚Ä¢	List ALL findings, grouped by:
	‚Ä¢	üî¥ Critical (must fix before deploy)
	‚Ä¢	üü† High
	‚Ä¢	üü° Medium
	‚Ä¢	üü¢ Low
	‚Ä¢	Include:
	‚Ä¢	File paths
	‚Ä¢	Root cause
	‚Ä¢	Impact
	‚Ä¢	Fix recommendation

STEP 2 ‚Äî FIX IN WAVES

Implement fixes in controlled waves:
	‚Ä¢	Wave A ‚Äî Build & Crash Blockers
	‚Ä¢	Wave B ‚Äî Security & Isolation
	‚Ä¢	Wave C ‚Äî Data Integrity
	‚Ä¢	Wave D ‚Äî UX & Trust
	‚Ä¢	Wave E ‚Äî Performance & Cleanup

üëâ After EACH wave, STOP and REPORT
üëâ Do NOT continue without explicit approval

‚∏ª

üìÑ REQUIRED OUTPUTS
	1.	PRE_DEPLOYMENT_AUDIT_REPORT.md
	2.	FIX_WAVE_REPORTS (A‚ÄìE)
	3.	Final GO / NO-GO recommendation

Each report must include:
	‚Ä¢	What was found
	‚Ä¢	What was fixed
	‚Ä¢	What was intentionally not fixed
	‚Ä¢	Residual risks (if any)

‚∏ª

üõë HARD STOP CONDITIONS
	‚Ä¢	If you are unsure ‚Üí STOP
	‚Ä¢	If a fix changes platform behavior ‚Üí STOP & DOCUMENT
	‚Ä¢	If something touches money, auth, or data isolation ‚Üí DOUBLE CHECK
	‚Ä¢	No silent assumptions

‚∏ª

üß† FINAL REMINDER

This is production software for real Nigerian businesses:
	‚Ä¢	Cash-based
	‚Ä¢	Offline-prone
	‚Ä¢	Trust-sensitive
	‚Ä¢	Multi-tenant
	‚Ä¢	Partner-driven

Treat this as a pre-flight checklist before takeoff, not a refactor exercise.

‚∏ª

When you are ready:
	1.	Start with STEP 1 (Audit Only)
	2.	Produce the Audit Report
	3.	STOP and wait for approval before fixing anything

‚∏ª