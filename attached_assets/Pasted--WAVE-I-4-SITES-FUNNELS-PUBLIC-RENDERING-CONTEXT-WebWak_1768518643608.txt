
üîµ WAVE I.4 ‚Äî SITES & FUNNELS PUBLIC RENDERING

CONTEXT

WebWaka already has a fully implemented Sites & Funnels backend:
	‚Ä¢	Site builder
	‚Ä¢	Page builder
	‚Ä¢	Funnel builder
	‚Ä¢	Form builder
	‚Ä¢	Publishing flags
	‚Ä¢	Templates (backend)
	‚Ä¢	Domain and slug logic (partial)

However, public rendering is missing.
Partners and tenants can build sites and funnels, but the public cannot view them.

This wave is about exposing what already exists ‚Äî NOT inventing anything new.

‚∏ª

üéØ WAVE I.4 OBJECTIVE

Expose public, read-only rendering of:
	1.	Published Sites
	2.	Published Pages
	3.	Published Funnels
	4.	Form landing pages (confirmation already exists)

This must work per tenant, using slug-based routing, with hard gating.

‚∏ª

üö´ HARD CONSTRAINTS (NON-NEGOTIABLE)

You MUST NOT:
	‚Ä¢	‚ùå Add new business logic
	‚Ä¢	‚ùå Add new schema fields or models
	‚Ä¢	‚ùå Modify page builder logic
	‚Ä¢	‚ùå Modify funnel logic
	‚Ä¢	‚ùå Add CMS features
	‚Ä¢	‚ùå Add editing, preview, or draft features
	‚Ä¢	‚ùå Add analytics, tracking, or SEO tooling beyond metadata exposure
	‚Ä¢	‚ùå Add automation or background jobs

If something required does not exist:
üëâ DOCUMENT IT AS A GAP. DO NOT FIX IT.

‚∏ª

‚úÖ WHAT YOU ARE ALLOWED TO DO

You MAY:
	‚Ä¢	Create public Next.js routes
	‚Ä¢	Read from existing Prisma models
	‚Ä¢	Use existing rendering components
	‚Ä¢	Reuse page builder block renderers
	‚Ä¢	Reuse form rendering logic
	‚Ä¢	Add read-only server resolvers
	‚Ä¢	Add strict gating (published + active + tenant-enabled)
	‚Ä¢	Return 404s aggressively

‚∏ª

üß© REQUIRED PUBLIC ROUTES

Implement the following public routes:

1Ô∏è‚É£ Tenant Site Homepage

/[tenantSlug]

Render:
	‚Ä¢	The tenant‚Äôs default published site
	‚Ä¢	Homepage page (isHomepage === true)

Hard rules:
	‚Ä¢	Tenant must exist
	‚Ä¢	Tenant must be ACTIVE
	‚Ä¢	Sites & Funnels module must be enabled
	‚Ä¢	Site must be PUBLISHED

‚∏ª

2Ô∏è‚É£ Published Site Page

/[tenantSlug]/site/[pageSlug]

Render:
	‚Ä¢	A published page belonging to a published site

Rules:
	‚Ä¢	Page must be PUBLISHED
	‚Ä¢	Page must belong to tenant
	‚Ä¢	Page must not be draft
	‚Ä¢	Otherwise ‚Üí 404

‚∏ª

3Ô∏è‚É£ Funnel Entry Page

/[tenantSlug]/funnel/[funnelSlug]

Render:
	‚Ä¢	First step of a published funnel

Rules:
	‚Ä¢	Funnel must be PUBLISHED
	‚Ä¢	Funnel must be ACTIVE
	‚Ä¢	Only sequential rendering (no skipping)
	‚Ä¢	No preview modes

‚∏ª

4Ô∏è‚É£ Funnel Step Page

/[tenantSlug]/funnel/[funnelSlug]/[stepSlug]

Render:
	‚Ä¢	Specific funnel step

Rules:
	‚Ä¢	Step must belong to funnel
	‚Ä¢	Step must be published
	‚Ä¢	Step order respected

‚∏ª

5Ô∏è‚É£ Form Landing Page (Confirm exposure)

/[tenantSlug]/form/[formSlug]

Render:
	‚Ä¢	Public form rendering using existing form renderer

NOTE:
If already implemented, verify and document ‚Äî do not rewrite.

‚∏ª

üß† RESOLUTION STRATEGY (MANDATORY)

Implement server-side resolvers ONLY:
	‚Ä¢	resolveTenantBySlug()
	‚Ä¢	resolvePublishedSite()
	‚Ä¢	resolvePublishedPage()
	‚Ä¢	resolvePublishedFunnel()
	‚Ä¢	resolvePublishedForm()

Resolvers must:
	‚Ä¢	Use Prisma read queries only
	‚Ä¢	Match existing access patterns
	‚Ä¢	Enforce tenant isolation
	‚Ä¢	Enforce published status
	‚Ä¢	Return notFound() on failure

‚∏ª

üñº RENDERING RULES
	‚Ä¢	Use existing block renderer
	‚Ä¢	Use existing form renderer
	‚Ä¢	Use existing theme / layout wrappers
	‚Ä¢	No new UI system
	‚Ä¢	No new design abstractions

If a renderer is missing:
üëâ Document as a gap

‚∏ª

üß™ DEMO VS LIVE BEHAVIOR
	‚Ä¢	Demo tenants:
	‚Ä¢	Render even if incomplete
	‚Ä¢	Show ‚ÄúDEMO‚Äù badge
	‚Ä¢	Live tenants:
	‚Ä¢	Strict gating
	‚Ä¢	No bypasses

‚∏ª

üìã REQUIRED OUTPUT ‚Äî WAVE I.4 COMPLETION REPORT

At completion, you MUST produce:

1Ô∏è‚É£ Routes Implemented Table
	‚Ä¢	Route
	‚Ä¢	Purpose
	‚Ä¢	Status (200 / 404)

2Ô∏è‚É£ Models & Services Used
	‚Ä¢	Prisma models touched
	‚Ä¢	Existing services reused

3Ô∏è‚É£ UI Components Used
	‚Ä¢	Reused components
	‚Ä¢	Newly created read-only only components

4Ô∏è‚É£ Explicit Confirmations

You must explicitly confirm:
	‚Ä¢	‚ùå No new business logic
	‚Ä¢	‚ùå No schema changes
	‚Ä¢	‚ùå No automation
	‚Ä¢	‚ùå No preview/edit modes
	‚Ä¢	‚ùå No analytics or tracking

5Ô∏è‚É£ GAP LIST (MANDATORY)

Examples (do not pre-assume):
	‚Ä¢	No public site renderer
	‚Ä¢	Missing homepage flag
	‚Ä¢	Missing SEO metadata
	‚Ä¢	Missing theme application
	‚Ä¢	Missing domain-based routing

Each gap must include:
	‚Ä¢	What is missing
	‚Ä¢	Why it cannot be solved in Wave I
	‚Ä¢	Deferred to: Post-Wave I

‚∏ª

üõë STOP CONDITION

After submitting the Wave I.4 Completion Report, you MUST STOP.

Do NOT proceed to Wave I.5 until explicitly approved.

‚∏ª

SUCCESS DEFINITION

Wave I.4 is successful if:
	‚Ä¢	Public users can view tenant sites and funnels
	‚Ä¢	All rendering is read-only
	‚Ä¢	Everything is strictly gated
	‚Ä¢	All missing pieces are explicitly documented

‚∏ª

‚úÖ CONFIRMATION

This wave completes public exposure of Sites & Funnels, aligning WebWaka with:
	‚Ä¢	SVM storefront exposure
	‚Ä¢	MVM marketplace exposure
	‚Ä¢	ParkHub marketplace exposure

Proceed now with Wave I.4 execution.

‚∏ª