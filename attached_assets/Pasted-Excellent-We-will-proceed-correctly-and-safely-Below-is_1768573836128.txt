Excellent. We will proceed correctly and safely.

Below is the exact Replit execution prompt for POS-P3, written to enforce Nigeria-first, mobile-first, offline-first, PWA-first, with strict stop-conditions and no scope bleed.

This prompt is designed so Replit cannot skip steps, invent features, or drift into other suites.

‚∏ª

üîê REPLIT EXECUTION PROMPT

POS-P3 ‚Äî Payments, Receipts, WhatsApp & Nigerian Fintechs

‚ö†Ô∏è MODE

EXECUTION MODE: IMPLEMENTATION
CONSTRAINT MODE: STRICT
STOP CONDITIONS: MANDATORY
PRIOR WAVES REQUIRED: POS-P1, POS-P2 ‚úÖ
DO NOT PROCEED BEYOND POS-P3

‚∏ª

üéØ WAVE OBJECTIVE

Complete real-world Nigerian POS payment and receipt workflows, ensuring:
	‚Ä¢	Merchants can collect money the way Nigerians actually pay
	‚Ä¢	Customers can receive proof the way Nigerians expect
	‚Ä¢	Staff can operate offline, on mobile, under stress
	‚Ä¢	No money loss, no silent failures, no automation without user action

‚∏ª

üß± SCOPE (ONLY THESE ITEMS)

1Ô∏è‚É£ PAYMENT METHODS (POS ONLY)

MUST IMPLEMENT
	‚Ä¢	Card payments
	‚Ä¢	Mobile payments
	‚Ä¢	Bank transfer confirmation flow (already added in P2 ‚Äì extend)
	‚Ä¢	Wallet/store credit (if already scaffolded)

NIGERIAN FINTECH INTEGRATIONS
Implement at least ONE Nigerian processor end-to-end:
	‚Ä¢	Moniepoint OR
	‚Ä¢	Paystack POS OR
	‚Ä¢	OPay (POS mode)

‚ö†Ô∏è Choose ONE.
‚ö†Ô∏è Use existing payment execution infrastructure.
‚ö†Ô∏è No new gateway abstractions unless already present.

‚∏ª

2Ô∏è‚É£ OFFLINE PAYMENT SAFETY

You MUST ensure:

Scenario	Required Behavior
Card/Mobile offline	Blocked with clear UI
Transfer offline	Allowed + queued
Cash offline	Allowed + queued
App crash mid-payment	Sale either recoverable or safely cancelled
Reconnect	User-triggered sync only

‚ùå NO background jobs
‚ùå NO auto-retry without user confirmation

‚∏ª

3Ô∏è‚É£ RECEIPT SYSTEM (POS)

RECEIPT GENERATION
Implement itemized POS receipts with:
	‚Ä¢	Line items
	‚Ä¢	VAT (7.5%)
	‚Ä¢	Cash rounding adjustment
	‚Ä¢	Payment method
	‚Ä¢	Timestamp
	‚Ä¢	Location / register
	‚Ä¢	Staff name

RECEIPT DELIVERY
Support:
	‚Ä¢	WhatsApp receipt (PRIMARY)
	‚Ä¢	Optional: SMS fallback
	‚Ä¢	On-screen receipt preview

‚ö†Ô∏è WhatsApp delivery MUST:
	‚Ä¢	Be user-triggered
	‚Ä¢	Use existing notification infrastructure
	‚Ä¢	Gracefully fail without blocking sale completion

‚∏ª

4Ô∏è‚É£ RECEIPT OUTPUT

Implement at least one:
	‚Ä¢	Thermal print (browser print / ESC-POS abstraction)
	‚Ä¢	Downloadable PDF
	‚Ä¢	QR-code receipt verification link

‚∏ª

5Ô∏è‚É£ TRANSACTION HISTORY (MINIMAL)

Add a read-only transaction list:
	‚Ä¢	Today only
	‚Ä¢	Local cache OK
	‚Ä¢	Shows: amount, payment type, status, receipt available
	‚Ä¢	Click ‚Üí view receipt

‚ùå No reporting
‚ùå No refunds here (already scaffolded)

‚∏ª

6Ô∏è‚É£ SECURITY & AUDIT (MANDATORY)

Ensure:
	‚Ä¢	Every completed sale:
	‚Ä¢	Has a receipt ID
	‚Ä¢	Is audit-logged
	‚Ä¢	Is immutable
	‚Ä¢	Voids link to original sale
	‚Ä¢	Transfer references + photos are stored safely
	‚Ä¢	No PII leakage to unauthorised staff roles

‚∏ª

üö´ EXPLICITLY FORBIDDEN IN POS-P3

Do NOT implement:
	‚Ä¢	Z-reports / X-reports
	‚Ä¢	Full accounting exports
	‚Ä¢	Inventory adjustments
	‚Ä¢	Automated refunds
	‚Ä¢	Background jobs
	‚Ä¢	New POS roles
	‚Ä¢	New schemas unrelated to POS payments/receipts
	‚Ä¢	Partner / marketplace logic

‚∏ª

üõë HARD STOP CONDITIONS

Replit MUST STOP and produce a POS-P3 COMPLETION REPORT that includes:

A. IMPLEMENTED FEATURES
	‚Ä¢	Payment methods (list + screenshots)
	‚Ä¢	Offline behaviors (table)
	‚Ä¢	Receipt formats
	‚Ä¢	WhatsApp flow details

B. VERIFIED FLOWS
	‚Ä¢	Online sale ‚Üí receipt ‚Üí WhatsApp
	‚Ä¢	Offline cash/transfer ‚Üí sync ‚Üí receipt
	‚Ä¢	Failed payment ‚Üí recovery behavior

C. GAP LIST (MANDATORY)

Document every missing or deferred item, including:
	‚Ä¢	Fintechs not implemented
	‚Ä¢	Printer limitations
	‚Ä¢	WhatsApp delivery failures
	‚Ä¢	Regulatory limitations

D. CONFIRMATION STATEMENT

Explicitly state:

‚ÄúNo assumptions were made. All behavior described is backed by existing code.‚Äù

‚∏ª

üö® FAILURE CONDITIONS (AUTO-REJECT)

This wave is INVALID if:
	‚Ä¢	Money moves automatically without user confirmation
	‚Ä¢	Receipts are not generated for POS
	‚Ä¢	WhatsApp is mocked or simulated
	‚Ä¢	Nigerian realities are ignored
	‚Ä¢	Scope bleeds into reports, inventory, or accounting

‚∏ª

üß† REMINDER TO AGENT

This is Nigeria-first POS:
	‚Ä¢	Transfers are common
	‚Ä¢	WhatsApp is essential
	‚Ä¢	Offline happens daily
	‚Ä¢	Staff share devices
	‚Ä¢	Customers demand proof

If it doesn‚Äôt survive a busy Lagos shop with bad network, it‚Äôs wrong.

‚∏ª

BEGIN POS-P3 IMPLEMENTATION NOW.
STOP AT COMPLETION REPORT.

‚∏ª

When Replit completes POS-P3, bring the report here and we will audit it line-by-line before moving to the next suite.