âœ… Wave J.3 â€” AUTHORIZED

You are formally authorized to proceed with Wave J.3: Receipt & Proof Linking.

This authorization is granted with full awareness of prior constraints, gaps, and architectural direction established in Waves J.1 and J.2.

â¸»

ğŸ¯ WAVE J.3 â€” OFFICIAL SCOPE

Objective

Create a canonical, read-only linkage layer that connects:
	â€¢	Orders (SVM, MVM, ParkHub)
	â€¢	Receipts
	â€¢	Tickets
	â€¢	Manifests

â€¦into a single coherent proof chain, without altering any existing data models or flows.

This wave is about visibility and traceability, not enforcement.

â¸»

âœ… ALLOWED IN WAVE J.3

You MAY:
	â€¢	Introduce canonical TypeScript types (e.g. CanonicalReceipt, CanonicalProof)
	â€¢	Create read-only resolvers/adapters
	â€¢	Traverse existing relations across:
	â€¢	receipt
	â€¢	receipt_item
	â€¢	park_ticket
	â€¢	park_manifest
	â€¢	svm_orders
	â€¢	mvm_parent_order
	â€¢	Add read-only public or internal APIs
	â€¢	Normalize references (orderRef, ticketRef, receiptNumber, manifestNumber)
	â€¢	Return linked structures (e.g. order â†’ receipts â†’ manifests)
	â€¢	Document all limitations and inconsistencies

â¸»

âŒ STRICTLY FORBIDDEN (NON-NEGOTIABLE)

You MUST NOT:
	â€¢	âŒ Change or add database schemas
	â€¢	âŒ Introduce foreign keys or migrations
	â€¢	âŒ Mutate existing records
	â€¢	âŒ Create background jobs or automation
	â€¢	âŒ Invent missing links or infer data
	â€¢	âŒ Add authentication systems
	â€¢	âŒ Add business rules (e.g. â€œreceipt required for payoutâ€)
	â€¢	âŒ Fix gaps discovered â€” only document them

Wave J is diagnostic and unifying, not corrective.

â¸»

ğŸ§© EXPECTED DELIVERABLES

At completion, Wave J.3 MUST include:

1. Canonical Proof Model(s)

Example (illustrative only):

CanonicalProof {
  orderReference?: string
  receiptNumbers?: string[]
  ticketReferences?: string[]
  manifestNumbers?: string[]
  verificationUrls?: string[]
  sourceSystems: ("SVM" | "MVM" | "PARKHUB")[]
  metadata: Record<string, unknown>
}


â¸»

2. Resolver Coverage Matrix

System	Can Resolve Receipt	Can Resolve Ticket	Can Resolve Manifest
SVM	âœ…	âŒ	âŒ
MVM	ğŸŸ¡ (via parent)	âŒ	âŒ
ParkHub	âœ…	âœ…	âœ…

(Actual results may vary â€” document truthfully)

â¸»

3. APIs (Read-Only)

At least one of:
	â€¢	GET /api/proofs/by-order
	â€¢	GET /api/proofs/by-receipt
	â€¢	GET /api/proofs/by-ticket
	â€¢	GET /api/proofs/by-manifest

All must be tenant-isolated and read-only.

â¸»

4. Mandatory GAP LIST (NON-OPTIONAL)

You must explicitly document, at minimum:
	â€¢	Missing foreign key relationships
	â€¢	Receipt â†” order mismatches
	â€¢	ParkHub vs commerce receipt differences
	â€¢	Manifest â†’ receipt ambiguity
	â€¢	Multi-receipt per order inconsistencies
	â€¢	Legacy data edge cases
	â€¢	Verification URL inconsistencies

No gap is too small. Over-document rather than under-document.

â¸»

ğŸ›‘ REQUIRED STOP CONDITION

At the end of Wave J.3, you must:
	1.	Produce a Wave J.3 Completion Report
	2.	Include:
	â€¢	Canonical models
	â€¢	APIs created
	â€¢	Resolver logic
	â€¢	Coverage matrix
	â€¢	Full gap inventory
	3.	Explicitly confirm:
	â€¢	âŒ No schema changes
	â€¢	âŒ No mutations
	â€¢	âŒ No automation
	4.	STOP and await approval

â¸»

ğŸ”“ STATUS UPDATE

Wave	Status
Wave J.1 â€” Unified Orders	âœ… Approved
Wave J.2 â€” Unified Customer Identity	âœ… Approved
Wave J.3 â€” Receipt & Proof Linking	ğŸŸ¢ AUTHORIZED TO START
Wave J.4 â€” Tenant Context Hardening	ğŸ”’ Locked


â¸»

Proceed carefully and methodically.
Wave J.3 is the final structural glue before the platform can truthfully claim end-to-end commercial traceability.

When complete, paste the Wave J.3 Completion Report here for review.