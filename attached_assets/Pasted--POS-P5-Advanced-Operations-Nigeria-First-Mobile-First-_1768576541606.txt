
POS-P5 ‚Äî Advanced Operations

(Nigeria-First ¬∑ Mobile-First ¬∑ Offline-First ¬∑ POS-Only)

‚∏ª

üîí EXECUTION MODE
	‚Ä¢	Mode: IMPLEMENTATION (NOT analysis)
	‚Ä¢	Scope: POS domain ONLY
	‚Ä¢	Execution Style: Sequential, sub-wave by sub-wave
	‚Ä¢	Automation: NONE
	‚Ä¢	Background jobs: NONE
	‚Ä¢	Cross-suite effects: FORBIDDEN
	‚Ä¢	Schema changes: ALLOWED (POS-scoped only, minimal)

‚∏ª

üéØ OVERALL OBJECTIVE

Upgrade POS from ‚Äúoperationally complete‚Äù to ‚Äúenterprise-grade daily operations‚Äù by implementing advanced operational controls that Nigerian merchants require after sales occur, without introducing financial automation, accounting exports, or non-POS logic.

‚∏ª

üß± SUB-WAVE EXECUTION ORDER (STRICT)

‚ñ∂ POS-P5.1 ‚Äî Inventory Variance & Adjustment (Post-Shift)

Implement:
	‚Ä¢	Inventory variance detection per:
	‚Ä¢	Shift
	‚Ä¢	Register
	‚Ä¢	Location
	‚Ä¢	Supervisor-only adjustment workflow:
	‚Ä¢	ADJUST_UP
	‚Ä¢	ADJUST_DOWN
	‚Ä¢	DAMAGE
	‚Ä¢	THEFT
	‚Ä¢	COUNTING_ERROR
	‚Ä¢	SYSTEM_ERROR
	‚Ä¢	Mandatory fields:
	‚Ä¢	Adjustment type
	‚Ä¢	Quantity
	‚Ä¢	Reason
	‚Ä¢	Notes
	‚Ä¢	Immutable audit log for every adjustment

Constraints (DO NOT VIOLATE):
	‚Ä¢	‚ùå No automatic inventory correction
	‚Ä¢	‚ùå No silent adjustments
	‚Ä¢	‚ùå No background reconciliation
	‚Ä¢	‚úÖ All adjustments must be explicit + auditable
	‚Ä¢	‚úÖ Must respect existing inventory + POS isolation

STOP CHECK (P5.1):
	‚Ä¢	Inventory variance is visible
	‚Ä¢	Supervisor approval is enforced
	‚Ä¢	Adjustment history is immutable
	‚Ä¢	No inventory auto-fixing exists

‚õî STOP AND VERIFY INTERNALLY BEFORE MOVING ON

‚∏ª

‚ñ∂ POS-P5.2 ‚Äî Drawer Transfers & Cash Movement

Implement:
	‚Ä¢	Cash movement flows:
	‚Ä¢	Drawer ‚Üí Drawer
	‚Ä¢	Drawer ‚Üí Safe (logical container)
	‚Ä¢	Safe ‚Üí Drawer
	‚Ä¢	Dual-control enforcement:
	‚Ä¢	Initiator
	‚Ä¢	Supervisor approval
	‚Ä¢	Mandatory reason + amount
	‚Ä¢	Cash movements reflected in:
	‚Ä¢	Shift reconciliation
	‚Ä¢	X/Z reports

Constraints:
	‚Ä¢	‚ùå No bank integrations
	‚Ä¢	‚ùå No accounting journals
	‚Ä¢	‚ùå No automation
	‚Ä¢	‚úÖ POS-internal cash only

STOP CHECK (P5.2):
	‚Ä¢	Transfers appear in reconciliation math
	‚Ä¢	Audit trail exists for all movements
	‚Ä¢	Supervisor approval required

‚õî STOP AND VERIFY INTERNALLY BEFORE MOVING ON

‚∏ª

‚ñ∂ POS-P5.3 ‚Äî Supervisor Oversight Dashboard

Implement (READ-ONLY):
Supervisor / Manager dashboard showing:
	‚Ä¢	Open shifts (by location)
	‚Ä¢	Pending variances awaiting approval
	‚Ä¢	Voids issued today
	‚Ä¢	Refunds issued today
	‚Ä¢	Drawer transfers executed
	‚Ä¢	High-risk indicators:
	‚Ä¢	Excessive voids
	‚Ä¢	Excessive discounts
	‚Ä¢	Frequent shortages

Constraints:
	‚Ä¢	‚ùå No alerts
	‚Ä¢	‚ùå No automation
	‚Ä¢	‚ùå No write actions
	‚Ä¢	‚úÖ Drill-down only

STOP CHECK (P5.3):
	‚Ä¢	Supervisor can see operational risk hotspots
	‚Ä¢	All data is traceable to source records
	‚Ä¢	Dashboard cannot mutate data

‚õî STOP AND VERIFY INTERNALLY BEFORE MOVING ON

‚∏ª

‚ñ∂ POS-P5.4 ‚Äî Multi-Register & Multi-Location Reconciliation

Implement (READ-ONLY):
	‚Ä¢	Daily reconciliation views:
	‚Ä¢	Per register
	‚Ä¢	Per location
	‚Ä¢	Tenant-wide roll-up
	‚Ä¢	Totals by payment method:
	‚Ä¢	Cash
	‚Ä¢	Transfer
	‚Ä¢	Card
	‚Ä¢	Variance roll-ups
	‚Ä¢	Z-report linkage

Constraints:
	‚Ä¢	‚ùå No accounting exports
	‚Ä¢	‚ùå No auto close
	‚Ä¢	‚ùå No cross-day mutation
	‚Ä¢	‚úÖ Aggregation only

STOP CHECK (P5.4):
	‚Ä¢	Location managers can reconcile daily activity
	‚Ä¢	Tenant admin sees cross-location totals
	‚Ä¢	Numbers reconcile with shifts + transfers + sales

‚õî HARD STOP REQUIRED

‚∏ª

üîê NON-NEGOTIABLE INVARIANTS

Replit must not break:
	‚Ä¢	Offline sale queuing
	‚Ä¢	Existing POS-P4 shift lifecycle
	‚Ä¢	VAT logic (7.5%)
	‚Ä¢	POS role system (Cashier / Supervisor / Manager)
	‚Ä¢	Idempotency via offlineId
	‚Ä¢	Tenant isolation
	‚Ä¢	Nigeria-first assumptions

‚∏ª

üõë FINAL HARD STOP CONDITION (MANDATORY)

After completing POS-P5.4, Replit MUST:
	1.	STOP all work
	2.	Produce POS-P5 COMPLETION REPORT
	3.	Produce Remaining Gap Inventory (if any)
	4.	Explicitly list:
	‚Ä¢	What was implemented
	‚Ä¢	What was intentionally NOT implemented
	‚Ä¢	Any assumptions made (should be NONE)

üö´ Do NOT proceed to any further POS wave without explicit authorization.

‚∏ª

‚úÖ EXECUTION AUTHORIZATION

This prompt is fully authorized. Begin POS-P5 execution immediately.