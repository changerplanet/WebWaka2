Below are two exact, production-grade Replit execution prompts, issued back-to-back, each with hard scope boundaries, non-negotiable stop conditions, and verification gates.

These are written so Replit cannot drift, cannot invent, and cannot silently continue.

‚∏ª

üîí WAVE A2 ‚Äî SECURITY & EXPOSURE AUDIT

Replit Execution Prompt (STRICT)

‚∏ª

CONTEXT

You are operating on the WebWaka codebase.

A V2 Ground Truth Audit has already been completed and approved.
Your task is NOT to re-audit features or build anything.

Your task is to perform a SECURITY & EXPOSURE AUDIT ONLY, focused on risk, leakage, and incorrect exposure.

This is a READ-ONLY ANALYSIS WAVE.

‚∏ª

üéØ WAVE A2 OBJECTIVE

Produce a complete, verifiable Security & Exposure Risk Report that answers:

‚ÄúWhich parts of WebWaka are exposed in ways that are unsafe, unintended, undocumented, or inconsistent with tenant / role boundaries?‚Äù

‚∏ª

üîç SCOPE (MANDATORY)

You MUST inspect all of the following ‚Äî no exceptions:

1. Public Routes & Pages
	‚Ä¢	All /[tenantSlug]/* routes
	‚Ä¢	All /verify/* routes
	‚Ä¢	All /parkhub/* public routes
	‚Ä¢	All /store, /marketplace, /site, /funnel, /form routes
	‚Ä¢	All demo pages (*-demo)
	‚Ä¢	All /test-* routes

2. Public API Endpoints
	‚Ä¢	Any API callable without authentication
	‚Ä¢	Any API gated only by query params (email, phone, tenantSlug)
	‚Ä¢	Canonical APIs (/api/orders/*, /api/customers/*, /api/proofs/*)
	‚Ä¢	Payment-adjacent APIs (even if read-only)

3. Tenant Isolation
	‚Ä¢	Confirm tenantSlug ‚Üí tenantId resolution correctness
	‚Ä¢	Identify any place tenantId is trusted from client input
	‚Ä¢	Identify cross-tenant query risks

4. Role Boundary Enforcement
	‚Ä¢	SUPER_ADMIN vs PARTNER vs TENANT_ADMIN vs PUBLIC
	‚Ä¢	Implicit roles (CUSTOMER, DRIVER, VENDOR)
	‚Ä¢	Any UI/API callable outside its intended role

5. Demo vs Live Leakage
	‚Ä¢	Demo tenants accessing live data
	‚Ä¢	Demo bypass logic inconsistencies
	‚Ä¢	Demo routes reachable in production context

‚∏ª

‚ùå HARD CONSTRAINTS

You are NOT ALLOWED to:
	‚Ä¢	Fix code
	‚Ä¢	Add guards
	‚Ä¢	Refactor logic
	‚Ä¢	Change schemas
	‚Ä¢	Introduce middleware
	‚Ä¢	Add authentication
	‚Ä¢	Remove routes

This wave is DOCUMENTATION ONLY.

‚∏ª

üì¶ REQUIRED DELIVERABLE

Produce ONE SINGLE REPORT named:

WAVE_A2_SECURITY_EXPOSURE_REPORT.md

The report MUST contain the following sections:

1. Exposure Risk Matrix

A table with:
	‚Ä¢	Route / API
	‚Ä¢	Exposure Type (Public, Semi-Public, Authenticated)
	‚Ä¢	Intended Audience
	‚Ä¢	Actual Audience
	‚Ä¢	Risk Level (LOW / MEDIUM / HIGH / CRITICAL)

2. Tenant Isolation Findings
	‚Ä¢	Confirmed safe patterns
	‚Ä¢	Confirmed violations
	‚Ä¢	Ambiguous / fragile patterns

3. Demo Leakage Findings
	‚Ä¢	Where demo logic is too permissive
	‚Ä¢	Where demo detection is inconsistent

4. Test & Dev Artifacts in Production
	‚Ä¢	/test-*
	‚Ä¢	/phase*
	‚Ä¢	Demo pages
	‚Ä¢	Severity classification

5. Canonical API Risk Review
	‚Ä¢	Orders
	‚Ä¢	Customers
	‚Ä¢	Proofs
	‚Ä¢	What data is inferable
	‚Ä¢	What identity assumptions are unsafe

6. Explicit Gap List

Each gap must include:
	‚Ä¢	What is wrong
	‚Ä¢	Why it is risky
	‚Ä¢	Why it is NOT fixed in Wave A2
	‚Ä¢	Which future wave should own it

‚∏ª

üõë ABSOLUTE STOP CONDITION

After generating WAVE_A2_SECURITY_EXPOSURE_REPORT.md:
	1.	STOP IMMEDIATELY
	2.	Do NOT fix anything
	3.	Do NOT continue to any other wave
	4.	Respond ONLY with:

‚ÄúWave A2 complete. Awaiting explicit approval before any remediation or further analysis.‚Äù

‚∏ª

‚∏ª

üß† WAVE B1 ‚Äî COMMERCE INTEGRITY VALIDATION

Replit Execution Prompt (STRICT)

‚ö†Ô∏è This wave may ONLY begin after Wave A2 has been explicitly approved.

‚∏ª

CONTEXT

WebWaka contains multiple commerce systems:
	‚Ä¢	SVM
	‚Ä¢	MVM
	‚Ä¢	ParkHub
	‚Ä¢	POS
	‚Ä¢	Inventory
	‚Ä¢	Payments
	‚Ä¢	Accounting links

Money movement either exists or is imminent.

This wave validates CORRECTNESS, CONSISTENCY, and FAILURE SAFETY.

‚∏ª

üéØ WAVE B1 OBJECTIVE

Produce a Commerce Integrity Validation Report that answers:

‚ÄúIf real customers transact money today, where can the system break, miscount, double-charge, lose inventory, or enter an unrecoverable state?‚Äù

‚∏ª

üîç SCOPE (MANDATORY)

You must validate end-to-end flows, not isolated functions.

1. Order Lifecycles

For each system:
	‚Ä¢	SVM
	‚Ä¢	MVM (parent + sub-orders)
	‚Ä¢	ParkHub (tickets)

Validate:
	‚Ä¢	Status transitions
	‚Ä¢	Failure paths
	‚Ä¢	Cancellation paths
	‚Ä¢	Partial fulfillment paths

2. Inventory Integrity
	‚Ä¢	When inventory is deducted
	‚Ä¢	When it is restored
	‚Ä¢	What happens on:
	‚Ä¢	Payment failure
	‚Ä¢	Webhook duplication
	‚Ä¢	Partial vendor failure
	‚Ä¢	Offline replay

3. Payment Integrity
	‚Ä¢	Payment initiation vs confirmation
	‚Ä¢	Webhook idempotency
	‚Ä¢	Retry behavior
	‚Ä¢	Double-execution risk

4. Cross-System Consistency
	‚Ä¢	Order ‚Üî inventory ‚Üî payment ‚Üî accounting
	‚Ä¢	POS vs online sales collision
	‚Ä¢	Offline vs online reconciliation

5. Customer-Visible Outcomes
	‚Ä¢	What the customer sees on:
	‚Ä¢	Failure
	‚Ä¢	Partial success
	‚Ä¢	Retry
	‚Ä¢	Where confusion or disputes can arise

‚∏ª

‚ùå HARD CONSTRAINTS

You are NOT ALLOWED to:
	‚Ä¢	Add new logic
	‚Ä¢	Modify payment flows
	‚Ä¢	Fix edge cases
	‚Ä¢	Add retries
	‚Ä¢	Introduce automation
	‚Ä¢	Change schemas
	‚Ä¢	Touch payouts

This is ANALYSIS ONLY.

‚∏ª

üì¶ REQUIRED DELIVERABLE

Produce ONE SINGLE REPORT named:

WAVE_B1_COMMERCE_INTEGRITY_REPORT.md

The report MUST include:

1. Commerce Flow Maps

Textual (step-by-step) flows for:
	‚Ä¢	SVM checkout
	‚Ä¢	MVM checkout
	‚Ä¢	ParkHub booking
	‚Ä¢	POS sales
	‚Ä¢	Offline sales replay

2. Integrity Risk Table

For each risk:
	‚Ä¢	System
	‚Ä¢	Scenario
	‚Ä¢	Failure mode
	‚Ä¢	Impact (Customer / Vendor / Platform)
	‚Ä¢	Severity

3. Idempotency & Duplication Review
	‚Ä¢	Where duplicates are safely handled
	‚Ä¢	Where they are not
	‚Ä¢	Why it matters

4. Partial Fulfillment Review
	‚Ä¢	What is supported
	‚Ä¢	What is undefined
	‚Ä¢	What is dangerous

5. Explicit Gap Inventory

Each gap must include:
	‚Ä¢	Why it exists
	‚Ä¢	Why it is dangerous
	‚Ä¢	Why it is NOT fixed in Wave B1
	‚Ä¢	Which future wave should own it

‚∏ª

üõë ABSOLUTE STOP CONDITION

After generating WAVE_B1_COMMERCE_INTEGRITY_REPORT.md:
	1.	STOP IMMEDIATELY
	2.	Do NOT apply fixes
	3.	Do NOT proceed to payouts
	4.	Respond ONLY with:

‚ÄúWave B1 complete. Awaiting explicit approval before any commerce remediation.‚Äù

‚∏ª

‚úÖ FINAL NOTE (IMPORTANT)

These two waves are foundational safety gates.

üö´ No payouts (Wave L)
üö´ No branding
üö´ No white-label domains

‚Ä¶should proceed until A2 + B1 are reviewed and accepted.

‚∏ª