Authorized.
Below is the exact Replit execution prompt for Wave B1 â€” Commerce Integrity Validation, written to enforce discipline, completeness, and hard stop conditions.
This prompt is audit-only, not feature work.

â¸»

ğŸ”’ REPLIT EXECUTION PROMPT

WAVE B1 â€” COMMERCE INTEGRITY VALIDATION

Mode: READ-ONLY ANALYSIS
Fixes: âŒ NOT ALLOWED
Schema Changes: âŒ FORBIDDEN
Business Logic: âŒ FORBIDDEN
Outcome: VALIDATION REPORT ONLY
STOP CONDITION: END OF REPORT â€” DO NOT PROCEED FURTHER

â¸»

ğŸ¯ OBJECTIVE

Conduct a full end-to-end integrity validation of all commerce flows across:
	â€¢	SVM (Single Vendor Marketplace)
	â€¢	MVM (Multi-Vendor Marketplace)
	â€¢	ParkHub (Transport / Ticketing)

This wave is NOT about building or refactoring.
It is about answering one question truthfully:

â€œIs WebWaka safe to move real money without silent failure, leakage, or inconsistent states?â€

â¸»

ğŸš« ABSOLUTE CONSTRAINTS (NON-NEGOTIABLE)

You MUST:
	â€¢	âŒ NOT add new features
	â€¢	âŒ NOT modify schemas
	â€¢	âŒ NOT refactor logic
	â€¢	âŒ NOT invent workarounds
	â€¢	âŒ NOT â€˜fix while reviewingâ€™

You MUST:
	â€¢	âœ… Trace what EXISTS
	â€¢	âœ… Validate correctness
	â€¢	âœ… Document gaps precisely
	â€¢	âœ… Stop completely at the end

Any violation of these constraints invalidates the wave.

â¸»

ğŸ§  SCOPE OF VALIDATION (MANDATORY)

You must validate ALL of the following, without skipping any item.

â¸»

1ï¸âƒ£ ORDER LIFECYCLE INTEGRITY

For each system (SVM, MVM, ParkHub):
	â€¢	Enumerate all order states
	â€¢	Map:
	â€¢	Creation â†’ Payment â†’ Fulfillment â†’ Completion â†’ Cancellation
	â€¢	Identify:
	â€¢	Impossible transitions
	â€¢	Silent failure paths
	â€¢	States reachable without prerequisites
	â€¢	Confirm:
	â€¢	Status aggregation logic (especially MVM parent â†” sub-orders)
	â€¢	Partial fulfillment handling correctness

ğŸ“Œ Output required:
Order Lifecycle State Table (per system)

â¸»

2ï¸âƒ£ PAYMENT â†” ORDER CONSISTENCY

Validate:
	â€¢	When payment is initiated vs when order is created
	â€¢	When inventory is deducted vs when payment is confirmed
	â€¢	Failure scenarios:
	â€¢	Payment fails after order creation
	â€¢	Payment succeeds but webhook fails
	â€¢	Duplicate webhook delivery
	â€¢	Idempotency guarantees

Confirm:
	â€¢	No double charges
	â€¢	No paid orders without fulfillment path
	â€¢	No fulfilled orders without payment

ğŸ“Œ Output required:
Paymentâ€“Order Consistency Matrix

â¸»

3ï¸âƒ£ INVENTORY INTEGRITY

Validate:
	â€¢	SVM stock deduction timing
	â€¢	MVM per-vendor stock handling
	â€¢	ParkHub seat availability vs ticket issuance

Check:
	â€¢	Oversell risks
	â€¢	Race condition exposure
	â€¢	Offline / retry behavior

ğŸ“Œ Output required:
Inventory Risk Assessment Table

â¸»

4ï¸âƒ£ PARTIAL FULFILLMENT & EDGE CASES (MVM)

Explicitly validate:
	â€¢	Mixed vendor outcomes (some deliver, some fail)
	â€¢	Parent order status derivation
	â€¢	Customer visibility correctness
	â€¢	Vendor isolation (one vendor failure must not corrupt others)

ğŸ“Œ Output required:
Partial Fulfillment Integrity Report

â¸»

5ï¸âƒ£ REFUND INTENT & FAILURE PATHS (NO MONEY MOVEMENT)

Validate:
	â€¢	Refund intent creation conditions
	â€¢	Visibility to:
	â€¢	Customer
	â€¢	Vendor
	â€¢	Partner
	â€¢	Admin
	â€¢	Ensure:
	â€¢	Refund intent does NOT move money
	â€¢	No automatic reversals exist

ğŸ“Œ Output required:
Refund Intent Safety Verification

â¸»

6ï¸âƒ£ CROSS-SYSTEM CONSISTENCY CHECK

Verify alignment between:
	â€¢	CanonicalOrder (Wave J.1)
	â€¢	CanonicalCustomer (Wave J.2)
	â€¢	Proof chains (Wave J.3)

Check:
	â€¢	Missing mappings
	â€¢	Data loss across abstraction layers
	â€¢	Incorrect assumptions

ğŸ“Œ Output required:
Cross-System Consistency Findings

â¸»

ğŸ“„ REQUIRED FINAL DELIVERABLE

You MUST produce a single document:

ğŸ“˜ WAVE_B1_COMMERCE_INTEGRITY_REPORT.md

The report MUST contain:
	1.	Executive Summary
	â€¢	Overall system health
	â€¢	High-level risk posture
	2.	Validated Areas (SAFE)
	â€¢	Explicitly list what is correct
	3.	WARNINGS
	â€¢	Non-fatal but concerning issues
	4.	BLOCKERS
	â€¢	Issues that make payouts unsafe
	5.	System-by-System Verdict
	â€¢	SVM: SAFE / WARN / BLOCK
	â€¢	MVM: SAFE / WARN / BLOCK
	â€¢	ParkHub: SAFE / WARN / BLOCK
	6.	Explicit GO / NO-GO Recommendation for Live Payouts

â¸»

ğŸ›‘ HARD STOP CONDITION (MANDATORY)

After producing the report:
	â€¢	âŒ DO NOT fix anything
	â€¢	âŒ DO NOT continue to Wave C2 / payouts
	â€¢	âŒ DO NOT suggest implementation

STOP COMPLETELY and wait for human approval.

â¸»

ğŸ§¾ VERIFICATION CHECKLIST (SELF-AUDIT)

Before stopping, confirm in writing:
	â€¢	All three commerce systems reviewed
	â€¢	No fixes applied
	â€¢	No schema changes made
	â€¢	All edge cases documented
	â€¢	Report is exhaustive
	â€¢	Stop condition respected

â¸»

â›” FAILURE TO RESPECT STOP CONDITIONS = INVALID WAVE

â¸»

This prompt is authoritative.
Once Replit completes this wave, we review before touching money.

When youâ€™re ready, the only valid next instruction after the report will be either:
	â€¢	â€œProceed to fixes for BLOCKERS identified in Wave B1â€
or
	â€¢	â€œAuthorize Wave C2 â€” Live Money Movementâ€

Nothing else.