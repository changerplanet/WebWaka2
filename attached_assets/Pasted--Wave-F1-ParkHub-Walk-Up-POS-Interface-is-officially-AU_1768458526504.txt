‚úÖ Wave F1 ‚Äî ParkHub Walk-Up POS Interface is officially AUTHORIZED

We‚Äôre now ready to begin the first item in Priority Band 0 that remains unimplemented. Below is a precise, production-ready execution plan and prompt you can send to Replit (or use as a blueprint for internal implementation), including all required constraints, deliverables, and stop conditions.

‚∏ª

üîì AUTHORIZATION ‚Äî WAVE F1

Feature

ParkHub Walk-Up POS Interface

Objective

Implement a fast, offline-first ParkHub POS interface optimized for real-world Nigerian motor park/transport operators. This interface enables agents to:
	‚Ä¢	Quickly sell tickets in ‚â§3 taps
	‚Ä¢	Select route/destination and trip
	‚Ä¢	Choose seat(s)
	‚Ä¢	Handle cash and bank/mobile payments
	‚Ä¢	Print/preview receipts or share via WhatsApp/SMS
	‚Ä¢	Work reliably offline

This must integrate with existing Wave 1 structures:
	‚Ä¢	POS Offline Queue
	‚Ä¢	Inventory Sync (trip seats as stock)
	‚Ä¢	Cash Rounding
	‚Ä¢	Channel Product Config
	‚Ä¢	Dynamic departure model

‚∏ª

üéØ SCOPE

UI/UX

ParkHub POS Screen

Accessible at:

/parkhub/[parkId]/pos

Mobile-first layout:
	‚Ä¢	Step 1: Route Selection
	‚Ä¢	Searchable dropdown (destination / route name)
	‚Ä¢	Touchable list (large tap targets)
	‚Ä¢	Step 2: Trip & Seat Selection
	‚Ä¢	Next available trip(s)
	‚Ä¢	Show seats left
	‚Ä¢	Visual seat buttons (grid)
	‚Ä¢	Departure status (Leaves when full / timed)
	‚Ä¢	Step 3: Ticket Info
	‚Ä¢	Passenger name (optional)
	‚Ä¢	Ticket count
	‚Ä¢	Price summary
	‚Ä¢	Step 4: Payment Method
	‚Ä¢	Cash
	‚Ä¢	Bank Transfer
	‚Ä¢	POS (QR/Paystack if enabled)
	‚Ä¢	COD (agent collects later)
	‚Ä¢	Step 5: Confirmation
	‚Ä¢	Show total, rounding suggestion
	‚Ä¢	‚ÄúConfirm & Print/Share‚Äù button
	‚Ä¢	Update offline queue + sync indicator

Offline/Online Indicators

Integrate with:
	‚Ä¢	OfflineIndicator
	‚Ä¢	SyncStatusBadge

Must show:
	‚Ä¢	Online/offline state
	‚Ä¢	Queued vs synced tickets
	‚Ä¢	Last synced timestamp

‚∏ª

Behavior

Offline-First
	‚Ä¢	Sales must be queued locally
	‚Ä¢	Sync on reconnect
	‚Ä¢	Price & rounding rules apply offline
	‚Ä¢	No loss of intent

Seat Deduction
	‚Ä¢	Trip seats should behave like inventory:
	‚Ä¢	Shared or ALLOCATED mode
	‚Ä¢	Deduct seats in queue until sync
	‚Ä¢	Conflict rules apply (e.g., multiple agents offline)

Payment Toggle
	‚Ä¢	Cash: Default
	‚Ä¢	Bank Transfer: Allow screenshot upload/notes
	‚Ä¢	POS/Paystack: Optional if enabled
	‚Ä¢	COD: Flag for later reconciliation

‚∏ª

üß± API REQUIREMENTS

Replit must implement/update these endpoints:

Endpoint	Purpose
POST /api/parkhub/pos/ticket	Queue or process ticket sale
GET /api/parkhub/pos/trips	List trips and available seats
GET /api/parkhub/pos/routes	List routes for park
POST /api/parkhub/pos/sync	Sync queued tickets
GET /api/parkhub/pos/sync-status	Sync status per agent

All APIs must:
	‚Ä¢	Use session auth
	‚Ä¢	Derive parkId from tenant context
	‚Ä¢	Enforce authorization
	‚Ä¢	Be demo-safe (log-only if demo)

‚∏ª

üìä Data Model Changes (if needed)

Minimal additive models only:
	‚Ä¢	parkhub_pos_queue
	‚Ä¢	id
	‚Ä¢	tenantId, parkId
	‚Ä¢	agentId
	‚Ä¢	routeId, tripId
	‚Ä¢	seatNumbers
	‚Ä¢	paymentMethod
	‚Ä¢	status (QUEUED, SYNCED, ERROR)
	‚Ä¢	timestamps
	‚Ä¢	Ensure park_ticket integrates with offline queue on sync

‚∏ª

üß† Security & Constraints

‚ùå No automation
‚ùå No background jobs
‚ùå No silent background sync ‚Äî agent must control sync
‚ùå No business logic outside defined behavior
‚ùå Must respect offline/online trust indicators

‚∏ª

üìÑ Required Deliverables

At completion, Replit must deliver:

1Ô∏è‚É£ Wave F1 Completion Report

Including:
	‚Ä¢	Components created
	‚Ä¢	APIs added
	‚Ä¢	Data models changed
	‚Ä¢	Offline behaviors
	‚Ä¢	Demo vs live behavior
	‚Ä¢	Screenshots or mock walkthroughs
	‚Ä¢	Any assumptions

2Ô∏è‚É£ Explicit Confirmations
	‚Ä¢	‚ùå No automation
	‚Ä¢	‚ùå No background jobs
	‚Ä¢	‚ùå No scope creep

3Ô∏è‚É£ Stop Condition

Work must STOP and await your approval before proceeding to Wave F2 (Vendor Payout Execution).

‚∏ª

üõë STOP

Do not start any related or downstream work until:
	‚Ä¢	You review the Wave F1 Completion Report
	‚Ä¢	You give explicit approval to proceed

‚∏ª

‚úî Next Step

When Replit finishes Wave F1, they should submit the Wave F1 Completion Report here.

I‚Äôll review it line-by-line and then we‚Äôll unlock Wave F2.